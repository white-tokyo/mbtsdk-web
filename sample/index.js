!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){(function(process,global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function interopDefault(ex){return ex&&"object"===("undefined"==typeof ex?"undefined":(0,_typeof3.default)(ex))&&"default"in ex?ex.default:ex}function createCommonjsModule(fn,module){return module={exports:{}},fn(module,module.exports),module.exports}function Angle(degree){var _this=this,normalize=function normalize(degree){return degree<0?normalize(degree+360):degree>=360?normalize(degree-360):degree};this.degree=normalize(degree),this.abs=function(){return Math.abs(_this.degree180())},this.degree180=function(){return _this.degree>180?360-_this.degree:_this.degree},this.angleBlock=function(){return 0<=_this.degree&&_this.degree<90?"UpperRight":90<=_this.degree&&_this.degree<180?"UpperLeft":180<=_this.degree&&_this.degree<270?"LowerLeft":"LowerRight"},this.add=function(other){return Angle.prototype.add(_this,other)},this.sub=function(other){return Angle.prototype.sub(_this,other)}}function AngleFactory(leftBounds,rightBounds){var _this2=this;this.leftBounds=leftBounds,this.rightBounds=rightBounds,this.toAngle=function(pos){pos<_this2.leftBounds?pos=_this2.leftBounds:_this2.rightBounds<pos&&(pos=_this2.rightBounds);var dir=pos-_this2.leftBounds,limit=_this2.rightBounds-_this2.leftBounds,rate=dir/limit,correction=170,angle=360*rate+correction;return new Angle(angle)},this.toAngleDelta=function(delta){var limit=_this2.rightBounds-_this2.leftBounds,rate=delta/limit,angle=360*rate;return new Angle(angle)}}function Swipe(startAnglePosition,endAnglePosition,timeDuration){this.getSpeed=function(){return Math.abs(endAnglePosition.sub(startAnglePosition).abs())/timeDuration*1e3},this.getDirection=function(){var s=startAnglePosition.angleBlock,e=endAnglePosition.angleBlock;switch(s){case"UpperLeft":if("UpperRight"==e)return SwipeDirection.Right;if("LowerLeft"==e)return SwipeDirection.Down;break;case"UpperRight":if("UpperLeft"==e)return SwipeDirection.Left;if("LowerRight"==e)return SwipeDirection.Down;break;case"LowerLeft":if("UpperLeft"==e)return SwipeDirection.Up;if("LowerRight"==e)return SwipeDirection.Right;break;case"LowerRight":if("UpperRight"==e)return SwipeDirection.Up;if("LowerLeft"==e)return SwipeDirection.Left}return startAnglePosition>endAnglePosition?SwipeDirection.Right:SwipeDirection.Left}}function MBT(option,target){var _this3=this;this.option=option||{},this.target=target,this.setupStageLimit=this.option.setupStageLimit||10,this.setupTorrelance=this.option.setupTorrelance||5,this.tapDetectTolerance=this.option.tapDetectTolerance||10,this.tapDetectDuration=this.option.tapDetectDuration||300;var _eventListeners={};this.addListener=function(eventName,callback){_eventListeners[eventName]||(_eventListeners[eventName]=[]),_eventListeners[eventName].push(callback)},this.removeListener=function(eventName,callback){_eventListeners[eventName]&&(_eventListeners[eventName].remove(callback),0===_eventListeners[eventName].length&&delete _eventListeners[eventName])};var invoke=function(eventName,args){var listeners=_eventListeners[eventName];listeners&&listeners.forEach(function(listener){listener.apply(_this3,args)})},onTapSubject=new Rx.Subject,onDoubleTapSubject=new Rx.Subject,onScrollBeganSubject=new Rx.Subject,onScrollEndedSubject=new Rx.Subject,onScrollSubject=new Rx.Subject,onSwipeSubject=new Rx.Subject,onSetupProgressSubject=new Rx.Subject,onSetupCompletedSubject=new Rx.Subject,touchBeganSubject=new Rx.Subject,touchMovedSubject=new Rx.Subject,touchEndedSubject=new Rx.Subject;onSetupProgressSubject.subscribe(function(){invoke("setupprogress")}),onSetupCompletedSubject.subscribe(function(){invoke("setupcompleted")}),onTapSubject.subscribe(function(){invoke("tap")}),onDoubleTapSubject.subscribe(function(){invoke("doubletap")}),onScrollBeganSubject.subscribe(function(){invoke("scrollbegan")}),onScrollSubject.subscribe(function(delta){invoke("scroll",[delta])}),onScrollEndedSubject.subscribe(function(){invoke("scrollended")}),onSwipeSubject.subscribe(function(swipe){invoke("swipe",[swipe.speed,swipe.direction])});var subscriptions=[];this.reset=function(){subscriptions.forEach(function(subscription){subscription.unsubscribe()}),subscriptions.length=0},this.setup=function(){var _this4=this;console.log("setupStart"),this.reset();var angleFactory=new AngleFactory(500,590),upOrDown=Rx.Observable.merge(touchBeganSubject,touchEndedSubject),moveOverBounds=touchMovedSubject.bufferWithCount(2,1).filter(function(val,index){return Math.abs(val[0]-val[1])>100}).flatMap(function(it){return Rx.Observable.of(it[0],it[1])}),setupSignal=Rx.Observable.merge(upOrDown,moveOverBounds),average=setupSignal.list().map(function(list){return Util.average(list)}),left=Rx.Observable.zip(setupSignal,average).filter(function(it){return it[0]<it[1]}).map(function(it){return it[0]}),right=Rx.Observable.zip(setupSignal,average).filter(function(it){return it[0]>=it[1]}).map(function(it){return it[0]}),leftFin=left.list().map(function(it){return Util.takeLast(it,10)}).doOnNext(function(x){onSetupProgressSubject.onNext(null)}).filter(function(it){return 10==it.length}).filter(function(it){var clone=it.concat(),max=Util.max(clone),min=Util.min(clone);Util.remove(clone,max),Util.remove(clone,min);var diff=max-min;return console.log("left diff: "+diff),diff<50}),rightFin=right.list().map(function(it){return Util.takeLast(it,10)}).doOnNext(function(x){onSetupProgressSubject.onNext(null)}).filter(function(it){return 10==it.length}).filter(function(it){var clone=it.concat(),max=Util.max(clone),min=Util.min(clone);Util.remove(clone,max),Util.remove(clone,min);var diff=max-min;return console.log("right diff: "+diff),diff<50});subscriptions.push(Rx.Observable.combineLatest(leftFin.timestamp(),rightFin.timestamp()).filter(function(it){return Math.abs(it[0].timestamp-it[1].timestamp)<5e3}).first().subscribe(function(it){angleFactory.leftBounds=Util.average(it[0].value),angleFactory.rightBounds=Util.average(it[1].value),onSetupCompletedSubject.onNext(null)}));var detectAngles=Rx.Observable.merge(touchBeganSubject.map(function(it){return["began",it]}),touchMovedSubject.map(function(it){return["moved",it]}),touchEndedSubject.map(function(it){return["ended",it]})).skipUntil(onSetupCompletedSubject).map(function(it){return[it[0],angleFactory.toAngle(it[1])]}).publish(),sequence=detectAngles.skipWhile(function(it){return"began"!==it[0]}).takeUntil(detectAngles.debounce(50).filter(function(it){return"ended"===it[0]})),seq_began=sequence.map(function(it){return it[1]}).filter(function(x,idx){return 0===idx}).repeat().publish(),seq_move=sequence.skip(1).map(function(it){return it[1]}).repeat().publish(),seq_ended=sequence.last({defaultValue:null}).filter(function(x){return x}).map(function(it){return it[1]}).repeat().publish();seq_began.connect(),seq_move.connect(),seq_ended.connect(),detectAngles.connect();var tap=sequence.first({defaultValue:null}).filter(function(x){return x}).timestamp().zip(sequence.last({defaultValue:null}).timestamp()).repeat().filter(function(it){return it[1].timestamp-it[0].timestamp<_this4.tapDetectDuration}).filter(function(it){return it[1].value[1].sub(it[0].value[1]).abs()<_this4.tapDetectTolerance}).map(function(it){return it[1]});subscriptions.push(tap.pre().map(function(it){var preTime=it[0]?it[0].timestamp:0,cond=it[1].timestamp-preTime<500;return cond?"doubleTap":"tap"}).subscribe(function(it){"tap"===it?onTapSubject.onNext(null):onDoubleTapSubject.onNext(null)}));var moveDelta=seq_move.pre().map(function(it){return[it[1],it[1].sub(it[0]||it[1])]}),scrollStart=moveDelta.map(function(it){return it[1].degree180()}).filter(function(deltaScale){return.3<Math.abs(deltaScale)&&Math.abs(deltaScale)<30}),scrollStroke=scrollStart.takeUntil(seq_ended);subscriptions.push(scrollStroke.take(1).doOnNext(function(it){onScrollBeganSubject.onNext(null)}).zip(scrollStroke.count()).repeat().subscribe()),subscriptions.push(scrollStroke.count().repeat().subscribe(function(it){0!==it&&onScrollEndedSubject.onNext(null)})),subscriptions.push(scrollStroke.repeat().subscribe(function(delta){onScrollSubject.onNext(delta)})),subscriptions.push(sequence.timestamp().toArray().repeat().filter(function(it){return it.length>=2}).subscribe(function(it){var startAngle=it[0].value[1],endAngle=it[it.length-1].value[1],angleDelta=startAngle.sub(endAngle).abs(),timeDelta=it[it.length-1].timestamp-it[0].timestamp,positionCondition=angleDelta>_this4.tapDetectTolerance,timeCondition=timeDelta<_this4.tapDetectDuration;if(positionCondition&&timeCondition){var swipe=new Swipe(startAngle,endAngle,timeDelta);onSwipeSubject.onNext({speed:swipe.getSpeed(),direction:swipe.getDirection()})}}))};var tapFlag=!1;_ua.Mobile?(console.log("agent is mobile"),this.target.addEventListener("touchstart",function(e){tapFlag=!0,touchBeganSubject.onNext(e.changedTouches[0].pageX)}),this.target.addEventListener("touchmove",function(e){if(tapFlag){var x=e.changedTouches[0].pageX;touchMovedSubject.onNext(x)}}),this.target.addEventListener("touchend",function(e){touchEndedSubject.onNext(e.changedTouches[0].pageX),tapFlag=!1})):(console.log("agent is not mobile"),this.target.addEventListener("mousedown",function(e){tapFlag=!0,touchBeganSubject.onNext(e.pageX)}),this.target.addEventListener("mouseup",function(e){tapFlag=!1,touchEndedSubject.onNext(e.pageX)}),this.target.addEventListener("mousemove",function(e){tapFlag&&touchMovedSubject.onNext(e.pageX)}))}var _keys=require("babel-runtime/core-js/object/keys"),_keys2=_interopRequireDefault(_keys),_iterator=require("babel-runtime/core-js/symbol/iterator"),_iterator2=_interopRequireDefault(_iterator),_symbol=require("babel-runtime/core-js/symbol"),_symbol2=_interopRequireDefault(_symbol),_create=require("babel-runtime/core-js/object/create"),_create2=_interopRequireDefault(_create),_typeof2=require("babel-runtime/helpers/typeof"),_typeof3=_interopRequireDefault(_typeof2),commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},rx_all=createCommonjsModule(function(module,exports){(function(undefined){function checkGlobal(value){return value&&value.Object===Object?value:null}function cloneArray(arr){for(var a=[],i=0,len=arr.length;i<len;i++)a.push(arr[i]);return a}function tryCatcherGen(tryCatchTarget){return function(){try{return tryCatchTarget.apply(this,arguments)}catch(e){return errorObj.e=e,errorObj}}}function thrower(e){throw e}function makeStackTraceLong(error,observable){if(hasStacks&&observable.stack&&"object"===("undefined"==typeof error?"undefined":(0,_typeof3.default)(error))&&null!==error&&error.stack&&error.stack.indexOf(STACK_JUMP_SEPARATOR)===-1){for(var stacks=[],o=observable;o;o=o.source)o.stack&&stacks.unshift(o.stack);stacks.unshift(error.stack);var concatedStacks=stacks.join("\n"+STACK_JUMP_SEPARATOR+"\n");error.stack=filterStackString(concatedStacks)}}function filterStackString(stackString){for(var lines=stackString.split("\n"),desiredLines=[],i=0,len=lines.length;i<len;i++){var line=lines[i];isInternalFrame(line)||isNodeFrame(line)||!line||desiredLines.push(line)}return desiredLines.join("\n")}function isInternalFrame(stackLine){var fileNameAndLineNumber=getFileNameAndLineNumber(stackLine);if(!fileNameAndLineNumber)return!1;var fileName=fileNameAndLineNumber[0],lineNumber=fileNameAndLineNumber[1];return fileName===rFileName&&lineNumber>=rStartingLine&&lineNumber<=rEndingLine}function isNodeFrame(stackLine){return stackLine.indexOf("(module.js:")!==-1||stackLine.indexOf("(node.js:")!==-1}function captureLine(){if(hasStacks)try{throw new Error}catch(e){var lines=e.stack.split("\n"),firstLine=lines[0].indexOf("@")>0?lines[1]:lines[2],fileNameAndLineNumber=getFileNameAndLineNumber(firstLine);if(!fileNameAndLineNumber)return;return rFileName=fileNameAndLineNumber[0],fileNameAndLineNumber[1]}}function getFileNameAndLineNumber(stackLine){var attempt1=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(stackLine);if(attempt1)return[attempt1[1],Number(attempt1[2])];var attempt2=/at ([^ ]+):(\d+):(?:\d+)$/.exec(stackLine);if(attempt2)return[attempt2[1],Number(attempt2[2])];var attempt3=/.*@(.+):(\d+)$/.exec(stackLine);return attempt3?[attempt3[1],Number(attempt3[2])]:void 0}function equalObjects(object,other,equalFunc,isLoose,stackA,stackB){var objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength!==othLength&&!isLoose)return!1;for(var key,index=objLength;index--;)if(key=objProps[index],!(isLoose?key in other:hasOwnProperty.call(other,key)))return!1;for(var skipCtor=isLoose;++index<objLength;){key=objProps[index];var result,objValue=object[key],othValue=other[key];if(!(result===undefined?equalFunc(objValue,othValue,isLoose,stackA,stackB):result))return!1;skipCtor||(skipCtor="constructor"===key)}if(!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!==othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor))return!1}return!0}function equalByTag(object,other,tag){switch(tag){case boolTag:case dateTag:return+object===+other;case errorTag:return object.name===other.name&&object.message===other.message;case numberTag:return object!==+object?other!==+other:object===+other;case regexpTag:case stringTag:return object===other+""}return!1}function isObjectLike(value){return!!value&&"object"===("undefined"==typeof value?"undefined":(0,_typeof3.default)(value))}function isLength(value){return"number"==typeof value&&value>-1&&value%1===0&&value<=MAX_SAFE_INTEGER}function isTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objToString.call(value)]}function arraySome(array,predicate){for(var index=-1,length=array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}function equalArrays(array,other,equalFunc,isLoose,stackA,stackB){var index=-1,arrLength=array.length,othLength=other.length;if(arrLength!==othLength&&!(isLoose&&othLength>arrLength))return!1;for(;++index<arrLength;){var result,arrValue=array[index],othValue=other[index];if(result!==undefined){if(result)continue;return!1}if(isLoose){if(!arraySome(other,function(othValue){return arrValue===othValue||equalFunc(arrValue,othValue,isLoose,stackA,stackB)}))return!1}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,isLoose,stackA,stackB))return!1}return!0}function baseIsEqualDeep(object,other,equalFunc,isLoose,stackA,stackB){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;objIsArr||(objTag=objToString.call(object),objTag===argsTag?objTag=objectTag:objTag!==objectTag&&(objIsArr=isTypedArray(object))),othIsArr||(othTag=objToString.call(other),othTag===argsTag&&(othTag=objectTag));var objIsObj=objTag===objectTag&&!isHostObject(object),othIsObj=othTag===objectTag&&!isHostObject(other),isSameTag=objTag===othTag;if(isSameTag&&!objIsArr&&!objIsObj)return equalByTag(object,other,objTag);if(!isLoose){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped)return equalFunc(objIsWrapped?object.value():object,othIsWrapped?other.value():other,isLoose,stackA,stackB)}if(!isSameTag)return!1;stackA||(stackA=[]),stackB||(stackB=[]);for(var length=stackA.length;length--;)if(stackA[length]===object)return stackB[length]===other;stackA.push(object),stackB.push(other);var result=(objIsArr?equalArrays:equalObjects)(object,other,equalFunc,isLoose,stackA,stackB);return stackA.pop(),stackB.pop(),result}function baseIsEqual(value,other,isLoose,stackA,stackB){return value===other||(null==value||null==other||!isObject(value)&&!isObjectLike(other)?value!==value&&other!==other:baseIsEqualDeep(value,other,baseIsEqual,isLoose,stackA,stackB))}function arrayInitialize(count,factory){for(var a=new Array(count),i=0;i<count;i++)a[i]=factory();return a}function IndexedItem(id,value){this.id=id,this.value=value}function ScheduledDisposable(scheduler,disposable){this.scheduler=scheduler,this.disposable=disposable,this.isDisposed=!1}function scheduleItem(s,self){self.isDisposed||(self.isDisposed=!0,self.disposable.dispose())}function IsDisposedDisposable(state){this._s=state,this.isDisposed=!1}function StringIterable(s){this._s=s}function StringIterator(s){this._s=s,this._l=s.length,this._i=0}function ArrayIterable(a){this._a=a}function ArrayIterator(a){this._a=a,this._l=toLength(a),this._i=0}function numberIsFinite(value){return"number"==typeof value&&root.isFinite(value)}function getIterable(o){var it,i=o[$iterator$];if(!i&&"string"==typeof o)return it=new StringIterable(o),it[$iterator$]();if(!i&&o.length!==undefined)return it=new ArrayIterable(o),it[$iterator$]();if(!i)throw new TypeError("Object is not iterable");return o[$iterator$]()}function sign(value){var number=+value;return 0===number?number:isNaN(number)?number:number<0?-1:1}function toLength(o){var len=+o.length;return isNaN(len)?0:0!==len&&numberIsFinite(len)?(len=sign(len)*Math.floor(Math.abs(len)),len<=0?0:len>maxSafeInteger?maxSafeInteger:len):len}function observableOf(scheduler,array){return isScheduler(scheduler)||(scheduler=currentThreadScheduler),new FromArrayObservable(array,scheduler)}function RepeatSink(observer,parent){this.observer=observer,this.parent=parent}function amb(p,c){return p.amb(c)}function falseFactory(){return!1}function argumentsToArray(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];return args}function falseFactory(){return!1}function argumentsToArray(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];return args}function falseFactory(){return!1}function emptyArrayFactory(){return[]}function falseFactory(){return!1}function emptyArrayFactory(){return[]}function argumentsToArray(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];return args}function asObservable(source){return function(o){return source.subscribe(o)}}function toArray(x){return x.toArray()}function notEmpty(x){return x.length>0}function repeat(value){return{"@@iterator":function(){return{next:function(){return{done:!1,value:value}}}}}}function repeat(value){return{"@@iterator":function(){return{next:function(){return{done:!1,value:value}}}}}}function concatMap(source,selector,thisArg){var selectorFunc=bindCallback(selector,thisArg,3);return source.map(function(x,i){var result=selectorFunc(x,i,source);return isPromise(result)&&(result=observableFromPromise(result)),(isArrayLike(result)||isIterable(result))&&(result=observableFrom(result)),result}).concatAll()}function arrayIndexOfComparer(array,item,comparer){for(var i=0,len=array.length;i<len;i++)if(comparer(array[i],item))return i;return-1}function HashSet(comparer){this.comparer=comparer,this.set=[]}function plucker(args,len){return function(x){for(var currentProp=x,i=0;i<len;i++){var p=currentProp[args[i]];if("undefined"==typeof p)return undefined;currentProp=p}return currentProp}}function firstOnly(x){if(0===x.length)throw new EmptyError;return x[0]}function findValue(source,predicate,thisArg,yieldIndex){var callback=bindCallback(predicate,thisArg,3);return new AnonymousObservable(function(o){return source.subscribe(new FindValueObserver(o,source,callback,yieldIndex))},source)}function toObservable(obj){return obj?Observable.isObservable(obj)?obj:isPromise(obj)?Observable.fromPromise(obj):isGeneratorFunction(obj)||isGenerator(obj)?spawn.call(this,obj):isFunction(obj)?thunkToObservable.call(this,obj):isArrayLike(obj)||isIterable(obj)?arrayToObservable.call(this,obj):isObject(obj)?objectToObservable.call(this,obj):obj:obj}function arrayToObservable(obj){return Observable.from(obj).concatMap(function(o){return Observable.isObservable(o)||isObject(o)?toObservable.call(null,o):Rx.Observable.just(o)}).toArray()}function objectToObservable(obj){function defer(observable,key){results[key]=undefined,observables.push(observable.map(function(next){results[key]=next}))}for(var results=new obj.constructor,keys=(0,_keys2.default)(obj),observables=[],i=0,len=keys.length;i<len;i++){var key=keys[i],observable=toObservable.call(this,obj[key]);observable&&Observable.isObservable(observable)?defer(observable,key):results[key]=obj[key]}return Observable.forkJoin.apply(Observable,observables).map(function(){return results})}function thunkToObservable(fn){var self=this;return new AnonymousObservable(function(o){fn.call(self,function(){var err=arguments[0],res=arguments[1];if(err)return o.onError(err);if(arguments.length>2){for(var args=[],i=1,len=arguments.length;i<len;i++)args.push(arguments[i]);res=args}o.onNext(res),o.onCompleted()})})}function isGenerator(obj){return isFunction(obj.next)&&isFunction(obj.throw)}function isGeneratorFunction(obj){var ctor=obj.constructor;return!!ctor&&("GeneratorFunction"===ctor.name||"GeneratorFunction"===ctor.displayName||isGenerator(ctor.prototype))}function isObject(val){return Object==val.constructor}function createCbObservable(fn,ctx,selector,args){var o=new AsyncSubject;return args.push(createCbHandler(o,ctx,selector)),fn.apply(ctx,args),o.asObservable()}function createCbHandler(o,ctx,selector){return function(){for(var len=arguments.length,results=new Array(len),i=0;i<len;i++)results[i]=arguments[i];if(isFunction(selector)){if(results=tryCatch(selector).apply(ctx,results),results===errorObj)return o.onError(results.e);o.onNext(results)}else results.length<=1?o.onNext(results[0]):o.onNext(results);o.onCompleted()}}function createNodeObservable(fn,ctx,selector,args){var o=new AsyncSubject;return args.push(createNodeHandler(o,ctx,selector)),fn.apply(ctx,args),o.asObservable()}function createNodeHandler(o,ctx,selector){return function(){var err=arguments[0];if(err)return o.onError(err);for(var len=arguments.length,results=[],i=1;i<len;i++)results[i-1]=arguments[i];if(isFunction(selector)){var results=tryCatch(selector).apply(ctx,results);if(results===errorObj)return o.onError(results.e);o.onNext(results)}else results.length<=1?o.onNext(results[0]):o.onNext(results);o.onCompleted()}}function isNodeList(el){return root.StaticNodeList?el instanceof root.StaticNodeList||el instanceof root.NodeList:"[object NodeList]"===Object.prototype.toString.call(el)}function ListenDisposable(e,n,fn){this._e=e,this._n=n,this._fn=fn,this._e.addEventListener(this._n,this._fn,!1),this.isDisposed=!1}function createEventListener(el,eventName,handler){var disposables=new CompositeDisposable,elemToString=Object.prototype.toString.call(el);if(isNodeList(el)||"[object HTMLCollection]"===elemToString)for(var i=0,len=el.length;i<len;i++)disposables.add(createEventListener(el.item(i),eventName,handler));else el&&disposables.add(new ListenDisposable(el,eventName,handler));return disposables}function combineLatestSource(source,subject,resultSelector){return new AnonymousObservable(function(o){function next(x,i){if(values[i]=x,hasValue[i]=!0,hasValueAll||(hasValueAll=hasValue.every(identity))){if(err)return o.onError(err);var res=tryCatch(resultSelector).apply(null,values);if(res===errorObj)return o.onError(res.e);o.onNext(res)}isDone&&values[1]&&o.onCompleted()}var err,hasValue=[!1,!1],hasValueAll=!1,isDone=!1,values=new Array(2);return new BinaryDisposable(source.subscribe(function(x){next(x,0)},function(e){values[1]?o.onError(e):err=e},function(){isDone=!0,values[1]&&o.onCompleted()}),subject.subscribe(function(x){next(x,1)},function(e){o.onError(e)},function(){isDone=!0,next(!0,1)}))},source)}function toArray(x){return x.toArray()}function observableWindowWithOpenings(windowOpenings,windowClosingSelector){return windowOpenings.groupJoin(this,windowClosingSelector,observableEmpty,function(_,win){return win})}function observableWindowWithBoundaries(windowBoundaries){var source=this;return new AnonymousObservable(function(observer){var win=new Subject,d=new CompositeDisposable,r=new RefCountDisposable(d);return observer.onNext(addRef(win,r)),d.add(source.subscribe(function(x){win.onNext(x)},function(err){win.onError(err),observer.onError(err)},function(){win.onCompleted(),observer.onCompleted()})),isPromise(windowBoundaries)&&(windowBoundaries=observableFromPromise(windowBoundaries)),d.add(windowBoundaries.subscribe(function(w){win.onCompleted(),win=new Subject,observer.onNext(addRef(win,r))},function(err){win.onError(err),observer.onError(err)},function(){win.onCompleted(),observer.onCompleted()})),r},source)}function observableWindowWithClosingSelector(windowClosingSelector){var source=this;return new AnonymousObservable(function(observer){function createWindowClose(){var windowClose;try{windowClose=windowClosingSelector()}catch(e){return void observer.onError(e)}isPromise(windowClose)&&(windowClose=observableFromPromise(windowClose));var m1=new SingleAssignmentDisposable;m.setDisposable(m1),m1.setDisposable(windowClose.take(1).subscribe(noop,function(err){win.onError(err),observer.onError(err)},function(){win.onCompleted(),win=new Subject,observer.onNext(addRef(win,r)),createWindowClose()}))}var m=new SerialDisposable,d=new CompositeDisposable(m),r=new RefCountDisposable(d),win=new Subject;return observer.onNext(addRef(win,r)),d.add(source.subscribe(function(x){win.onNext(x)},function(err){win.onError(err),observer.onError(err)},function(){win.onCompleted(),observer.onCompleted()})),createWindowClose(),r},source)}function enumerableWhile(condition,source){return new WhileEnumerable(condition,source)}function argumentsToArray(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];return args}function Pattern(patterns){this.patterns=patterns}function Plan(expression,selector){this.expression=expression,this.selector=selector}function handleOnError(o){return function(e){o.onError(e)}}function handleOnNext(self,observer){return function(){var result=tryCatch(self.selector).apply(self,arguments);return result===errorObj?observer.onError(result.e):void observer.onNext(result)}}function planCreateObserver(externalSubscriptions,observable,onError){var entry=externalSubscriptions.get(observable);if(!entry){var observer=new JoinObserver(observable,onError);return externalSubscriptions.set(observable,observer),observer}return entry}function ActivePlan(joinObserverArray,onNext,onCompleted){this.joinObserverArray=joinObserverArray,this.onNext=onNext,this.onCompleted=onCompleted,this.joinObservers=new Map;for(var i=0,len=this.joinObserverArray.length;i<len;i++){var joinObserver=this.joinObserverArray[i];this.joinObservers.set(joinObserver,joinObserver)}}function _observableTimer(dueTime,scheduler){return new TimerObservable(dueTime,scheduler)}function observableTimerDateAndPeriod(dueTime,period,scheduler){return new AnonymousObservable(function(observer){var d=dueTime,p=normalizeTime(period);return scheduler.scheduleRecursiveFuture(0,d,function(count,self){if(p>0){var now=scheduler.now();d=new Date(d.getTime()+p),d.getTime()<=now&&(d=new Date(now+p))}observer.onNext(count),self(count+1,new Date(d))})})}function observableTimerTimeSpanAndPeriod(dueTime,period,scheduler){return dueTime===period?new AnonymousObservable(function(observer){return scheduler.schedulePeriodic(0,period,function(count){return observer.onNext(count),count+1})}):observableDefer(function(){return observableTimerDateAndPeriod(new Date(scheduler.now()+dueTime),period,scheduler)})}function observableDelayRelative(source,dueTime,scheduler){return new AnonymousObservable(function(o){var subscription,active=!1,cancelable=new SerialDisposable,exception=null,q=[],running=!1;return subscription=source.materialize().timestamp(scheduler).subscribe(function(notification){var d,shouldRun;"E"===notification.value.kind?(q=[],q.push(notification),exception=notification.value.error,shouldRun=!running):(q.push({value:notification.value,timestamp:notification.timestamp+dueTime}),shouldRun=!active,active=!0),shouldRun&&(null!==exception?o.onError(exception):(d=new SingleAssignmentDisposable,cancelable.setDisposable(d),d.setDisposable(scheduler.scheduleRecursiveFuture(null,dueTime,function(_,self){var e,recurseDueTime,result,shouldRecurse;if(null===exception){running=!0;do result=null,q.length>0&&q[0].timestamp-scheduler.now()<=0&&(result=q.shift().value),null!==result&&result.accept(o);while(null!==result);shouldRecurse=!1,recurseDueTime=0,q.length>0?(shouldRecurse=!0,recurseDueTime=Math.max(0,q[0].timestamp-scheduler.now())):active=!1,e=exception,running=!1,null!==e?o.onError(e):shouldRecurse&&self(null,recurseDueTime)}}))))}),new BinaryDisposable(subscription,cancelable)},source)}function observableDelayAbsolute(source,dueTime,scheduler){return observableDefer(function(){return observableDelayRelative(source,dueTime-scheduler.now(),scheduler)})}function delayWithSelector(source,subscriptionDelay,delayDurationSelector){var subDelay,selector;return isFunction(subscriptionDelay)?selector=subscriptionDelay:(subDelay=subscriptionDelay,selector=delayDurationSelector),new AnonymousObservable(function(o){function start(){subscription.setDisposable(source.subscribe(function(x){var delay=tryCatch(selector)(x);if(delay===errorObj)return o.onError(delay.e);var d=new SingleAssignmentDisposable;delays.add(d),d.setDisposable(delay.subscribe(function(){o.onNext(x),delays.remove(d),done()},function(e){o.onError(e)},function(){o.onNext(x),delays.remove(d),done()}))},function(e){o.onError(e)},function(){atEnd=!0,subscription.dispose(),done()}))}function done(){atEnd&&0===delays.length&&o.onCompleted()}var delays=new CompositeDisposable,atEnd=!1,subscription=new SerialDisposable;return subDelay?subscription.setDisposable(subDelay.subscribe(start,function(e){o.onError(e)},start)):start(),new BinaryDisposable(subscription,delays)},source)}function debounceWithSelector(source,durationSelector){return new AnonymousObservable(function(o){var value,hasValue=!1,cancelable=new SerialDisposable,id=0,subscription=source.subscribe(function(x){var throttle=tryCatch(durationSelector)(x);if(throttle===errorObj)return o.onError(throttle.e);isPromise(throttle)&&(throttle=observableFromPromise(throttle)),hasValue=!0,value=x,id++;var currentid=id,d=new SingleAssignmentDisposable;cancelable.setDisposable(d),d.setDisposable(throttle.subscribe(function(){hasValue&&id===currentid&&o.onNext(value),hasValue=!1,d.dispose()},function(e){o.onError(e)},function(){hasValue&&id===currentid&&o.onNext(value),hasValue=!1,d.dispose()}))},function(e){cancelable.dispose(),o.onError(e),hasValue=!1,id++},function(){cancelable.dispose(),hasValue&&o.onNext(value),o.onCompleted(),hasValue=!1,id++});return new BinaryDisposable(subscription,cancelable)},source)}function toArray(x){return x.toArray()}function toArray(x){return x.toArray()}function timeoutWithSelector(source,firstTimeout,timeoutDurationSelector,other){return isFunction(firstTimeout)&&(other=timeoutDurationSelector,timeoutDurationSelector=firstTimeout,firstTimeout=observableNever()),Observable.isObservable(other)||(other=observableThrow(new TimeoutError)),new AnonymousObservable(function(o){function setTimer(timeout){function timerWins(){return switched=myId===id}var myId=id,d=new SingleAssignmentDisposable;timer.setDisposable(d),d.setDisposable(timeout.subscribe(function(){timerWins()&&subscription.setDisposable(other.subscribe(o)),d.dispose()},function(e){timerWins()&&o.onError(e)},function(){timerWins()&&subscription.setDisposable(other.subscribe(o))}))}function oWins(){var res=!switched;return res&&id++,res}var subscription=new SerialDisposable,timer=new SerialDisposable,original=new SingleAssignmentDisposable;
subscription.setDisposable(original);var id=0,switched=!1;return setTimer(firstTimeout),original.setDisposable(source.subscribe(function(x){if(oWins()){o.onNext(x);var timeout=tryCatch(timeoutDurationSelector)(x);if(timeout===errorObj)return o.onError(timeout.e);setTimer(isPromise(timeout)?observableFromPromise(timeout):timeout)}},function(e){oWins()&&o.onError(e)},function(){oWins()&&o.onCompleted()})),new BinaryDisposable(subscription,timer)},source)}function timeout(source,dueTime,other,scheduler){return isScheduler(other)&&(scheduler=other,other=observableThrow(new TimeoutError)),other instanceof Error&&(other=observableThrow(other)),isScheduler(scheduler)||(scheduler=defaultScheduler),Observable.isObservable(other)||(other=observableThrow(new TimeoutError)),new AnonymousObservable(function(o){function createTimer(){var myId=id;timer.setDisposable(scheduler.scheduleFuture(null,dueTime,function(){switched=id===myId,switched&&(isPromise(other)&&(other=observableFromPromise(other)),subscription.setDisposable(other.subscribe(o)))}))}var id=0,original=new SingleAssignmentDisposable,subscription=new SerialDisposable,switched=!1,timer=new SerialDisposable;return subscription.setDisposable(original),createTimer(),original.setDisposable(source.subscribe(function(x){switched||(id++,o.onNext(x),createTimer())},function(e){switched||(id++,o.onError(e))},function(){switched||(id++,o.onCompleted())})),new BinaryDisposable(subscription,timer)},source)}function transformForObserver(o){return{"@@transducer/init":function(){return o},"@@transducer/step":function(obs,input){return obs.onNext(input)},"@@transducer/result":function(obs){return obs.onCompleted()}}}function OnNextPredicate(predicate){this.predicate=predicate}function OnErrorPredicate(predicate){this.predicate=predicate}function MockPromise(scheduler,messages){var self=this;this.scheduler=scheduler,this.messages=messages,this.subscriptions=[],this.observers=[];for(var i=0,len=this.messages.length;i<len;i++){var message=this.messages[i],notification=message.value;!function(innerNotification){scheduler.scheduleAbsolute(null,message.time,function(){for(var obs=self.observers.slice(0),j=0,jLen=obs.length;j<jLen;j++)innerNotification.accept(obs[j]);return disposableEmpty})}(notification)}}var objectTypes={function:!0,object:!0},freeExports=objectTypes["undefined"==typeof exports?"undefined":(0,_typeof3.default)(exports)]&&exports&&!exports.nodeType?exports:null,freeModule=objectTypes["undefined"==typeof module?"undefined":(0,_typeof3.default)(module)]&&module&&!module.nodeType?module:null,freeGlobal=checkGlobal(freeExports&&freeModule&&"object"===("undefined"==typeof commonjsGlobal?"undefined":(0,_typeof3.default)(commonjsGlobal))&&commonjsGlobal),freeSelf=checkGlobal(objectTypes["undefined"==typeof self?"undefined":(0,_typeof3.default)(self)]&&self),freeWindow=checkGlobal(objectTypes["undefined"==typeof window?"undefined":(0,_typeof3.default)(window)]&&window),moduleExports=freeModule&&freeModule.exports===freeExports?freeExports:null,thisGlobal=checkGlobal(objectTypes[(0,_typeof3.default)(this)]&&this),root=freeGlobal||freeWindow!==(thisGlobal&&thisGlobal.window)&&freeWindow||freeSelf||thisGlobal||Function("return this")(),Rx={internals:{},config:{Promise:root.Promise},helpers:{}},noop=Rx.helpers.noop=function(){},identity=Rx.helpers.identity=function(x){return x},defaultNow=Rx.helpers.defaultNow=Date.now,defaultComparer=Rx.helpers.defaultComparer=function(x,y){return isEqual(x,y)},defaultSubComparer=Rx.helpers.defaultSubComparer=function(x,y){return x>y?1:x<y?-1:0},defaultError=(Rx.helpers.defaultKeySerializer=function(x){return x.toString()},Rx.helpers.defaultError=function(err){throw err}),isPromise=Rx.helpers.isPromise=function(p){return!!p&&"function"!=typeof p.subscribe&&"function"==typeof p.then},isFunction=Rx.helpers.isFunction=function(){var isFn=function(value){return"function"==typeof value||!1};return isFn(/x/)&&(isFn=function(value){return"function"==typeof value&&"[object Function]"==toString.call(value)}),isFn}(),errorObj={e:{}},tryCatch=Rx.internals.tryCatch=function(fn){if(!isFunction(fn))throw new TypeError("fn must be a function");return tryCatcherGen(fn)};Rx.config.longStackSupport=!1;var hasStacks=!1,stacks=tryCatch(function(){throw new Error})();hasStacks=!!stacks.e&&!!stacks.e.stack;var rFileName,rStartingLine=captureLine(),STACK_JUMP_SEPARATOR="From previous event:",EmptyError=Rx.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)};EmptyError.prototype=(0,_create2.default)(Error.prototype),EmptyError.prototype.name="EmptyError";var ObjectDisposedError=Rx.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)};ObjectDisposedError.prototype=(0,_create2.default)(Error.prototype),ObjectDisposedError.prototype.name="ObjectDisposedError";var ArgumentOutOfRangeError=Rx.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)};ArgumentOutOfRangeError.prototype=(0,_create2.default)(Error.prototype),ArgumentOutOfRangeError.prototype.name="ArgumentOutOfRangeError";var NotSupportedError=Rx.NotSupportedError=function(message){this.message=message||"This operation is not supported",Error.call(this)};NotSupportedError.prototype=(0,_create2.default)(Error.prototype),NotSupportedError.prototype.name="NotSupportedError";var NotImplementedError=Rx.NotImplementedError=function(message){this.message=message||"This operation is not implemented",Error.call(this)};NotImplementedError.prototype=(0,_create2.default)(Error.prototype),NotImplementedError.prototype.name="NotImplementedError";var notImplemented=Rx.helpers.notImplemented=function(){throw new NotImplementedError},$iterator$=(Rx.helpers.notSupported=function(){throw new NotSupportedError},"function"==typeof _symbol2.default&&_iterator2.default||"_es6shim_iterator_");root.Set&&"function"==typeof(new root.Set)["@@iterator"]&&($iterator$="@@iterator");var doneEnumerator=Rx.doneEnumerator={done:!0,value:undefined},isIterable=Rx.helpers.isIterable=function(o){return o&&o[$iterator$]!==undefined},isArrayLike=Rx.helpers.isArrayLike=function(o){return o&&o.length!==undefined};Rx.helpers.iterator=$iterator$;var bindCallback=Rx.internals.bindCallback=function(func,thisArg,argCount){if("undefined"==typeof thisArg)return func;switch(argCount){case 0:return function(){return func.call(thisArg)};case 1:return function(arg){return func.call(thisArg,arg)};case 2:return function(value,index){return func.call(thisArg,value,index)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)}}return function(){return func.apply(thisArg,arguments)}},dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],argsTag=(dontEnums.length,"[object Arguments]"),arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objToString=objectProto.toString,MAX_SAFE_INTEGER=Math.pow(2,53)-1,keys=_keys2.default||function(){var hasOwnProperty=Object.prototype.hasOwnProperty,hasDontEnumBug=!{toString:null}.propertyIsEnumerable("toString"),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length;return function(obj){if("object"!==("undefined"==typeof obj?"undefined":(0,_typeof3.default)(obj))&&("function"!=typeof obj||null===obj))throw new TypeError("Object.keys called on non-object");var prop,i,result=[];for(prop in obj)hasOwnProperty.call(obj,prop)&&result.push(prop);if(hasDontEnumBug)for(i=0;i<dontEnumsLength;i++)hasOwnProperty.call(obj,dontEnums[i])&&result.push(dontEnums[i]);return result}}(),isObject=Rx.internals.isObject=function(value){var type="undefined"==typeof value?"undefined":(0,_typeof3.default)(value);return!!value&&("object"===type||"function"===type)},isHostObject=function(){try{Object({toString:0}+"")}catch(e){return function(){return!1}}return function(value){return"function"!=typeof value.toString&&"string"==typeof(value+"")}}(),isArray=Array.isArray||function(value){return isObjectLike(value)&&isLength(value.length)&&objToString.call(value)===arrayTag},isEqual=Rx.internals.isEqual=function(value,other){return baseIsEqual(value,other)},inherits=({}.hasOwnProperty,Array.prototype.slice,Rx.internals.inherits=function(child,parent){function __(){this.constructor=child}__.prototype=parent.prototype,child.prototype=new __}),addProperties=Rx.internals.addProperties=function(obj){for(var sources=[],i=1,len=arguments.length;i<len;i++)sources.push(arguments[i]);for(var idx=0,ln=sources.length;idx<ln;idx++){var source=sources[idx];for(var prop in source)obj[prop]=source[prop]}},addRef=Rx.internals.addRef=function(xs,r){return new AnonymousObservable(function(observer){return new BinaryDisposable(r.getDisposable(),xs.subscribe(observer))})};IndexedItem.prototype.compareTo=function(other){var c=this.value.compareTo(other.value);return 0===c&&(c=this.id-other.id),c};var PriorityQueue=Rx.internals.PriorityQueue=function(capacity){this.items=new Array(capacity),this.length=0},priorityProto=PriorityQueue.prototype;priorityProto.isHigherPriority=function(left,right){return this.items[left].compareTo(this.items[right])<0},priorityProto.percolate=function(index){if(!(index>=this.length||index<0)){var parent=index-1>>1;if(!(parent<0||parent===index)&&this.isHigherPriority(index,parent)){var temp=this.items[index];this.items[index]=this.items[parent],this.items[parent]=temp,this.percolate(parent)}}},priorityProto.heapify=function(index){if(+index||(index=0),!(index>=this.length||index<0)){var left=2*index+1,right=2*index+2,first=index;if(left<this.length&&this.isHigherPriority(left,first)&&(first=left),right<this.length&&this.isHigherPriority(right,first)&&(first=right),first!==index){var temp=this.items[index];this.items[index]=this.items[first],this.items[first]=temp,this.heapify(first)}}},priorityProto.peek=function(){return this.items[0].value},priorityProto.removeAt=function(index){this.items[index]=this.items[--this.length],this.items[this.length]=undefined,this.heapify()},priorityProto.dequeue=function(){var result=this.peek();return this.removeAt(0),result},priorityProto.enqueue=function(item){var index=this.length++;this.items[index]=new IndexedItem(PriorityQueue.count++,item),this.percolate(index)},priorityProto.remove=function(item){for(var i=0;i<this.length;i++)if(this.items[i].value===item)return this.removeAt(i),!0;return!1},PriorityQueue.count=0;var CompositeDisposable=Rx.CompositeDisposable=function(){var i,len,args=[];if(Array.isArray(arguments[0]))args=arguments[0];else for(len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];this.disposables=args,this.isDisposed=!1,this.length=args.length},CompositeDisposablePrototype=CompositeDisposable.prototype;CompositeDisposablePrototype.add=function(item){this.isDisposed?item.dispose():(this.disposables.push(item),this.length++)},CompositeDisposablePrototype.remove=function(item){var shouldDispose=!1;if(!this.isDisposed){var idx=this.disposables.indexOf(item);idx!==-1&&(shouldDispose=!0,this.disposables.splice(idx,1),this.length--,item.dispose())}return shouldDispose},CompositeDisposablePrototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var len=this.disposables.length,currentDisposables=new Array(len),i=0;i<len;i++)currentDisposables[i]=this.disposables[i];for(this.disposables=[],this.length=0,i=0;i<len;i++)currentDisposables[i].dispose()}};var Disposable=Rx.Disposable=function(action){this.isDisposed=!1,this.action=action||noop};Disposable.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var disposableCreate=Disposable.create=function(action){return new Disposable(action)},disposableEmpty=Disposable.empty={dispose:noop},isDisposable=Disposable.isDisposable=function(d){return d&&isFunction(d.dispose)},checkDisposed=Disposable.checkDisposed=function(disposable){if(disposable.isDisposed)throw new ObjectDisposedError},disposableFixup=Disposable._fixup=function(result){return isDisposable(result)?result:disposableEmpty},SingleAssignmentDisposable=Rx.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null};SingleAssignmentDisposable.prototype.getDisposable=function(){return this.current},SingleAssignmentDisposable.prototype.setDisposable=function(value){if(this.current)throw new Error("Disposable has already been assigned");var shouldDispose=this.isDisposed;!shouldDispose&&(this.current=value),shouldDispose&&value&&value.dispose()},SingleAssignmentDisposable.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var old=this.current;this.current=null,old&&old.dispose()}};var SerialDisposable=Rx.SerialDisposable=function(){this.isDisposed=!1,this.current=null};SerialDisposable.prototype.getDisposable=function(){return this.current},SerialDisposable.prototype.setDisposable=function(value){var shouldDispose=this.isDisposed;if(!shouldDispose){var old=this.current;this.current=value}old&&old.dispose(),shouldDispose&&value&&value.dispose()},SerialDisposable.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var old=this.current;this.current=null}old&&old.dispose()};var BinaryDisposable=Rx.BinaryDisposable=function(first,second){this._first=first,this._second=second,this.isDisposed=!1};BinaryDisposable.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var old1=this._first;this._first=null,old1&&old1.dispose();var old2=this._second;this._second=null,old2&&old2.dispose()}};var NAryDisposable=Rx.NAryDisposable=function(disposables){this._disposables=disposables,this.isDisposed=!1};NAryDisposable.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var i=0,len=this._disposables.length;i<len;i++)this._disposables[i].dispose();this._disposables.length=0}};var RefCountDisposable=Rx.RefCountDisposable=function(){function InnerDisposable(disposable){this.disposable=disposable,this.disposable.count++,this.isInnerDisposed=!1}function RefCountDisposable(disposable){this.underlyingDisposable=disposable,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return InnerDisposable.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},RefCountDisposable.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},RefCountDisposable.prototype.getDisposable=function(){return this.isDisposed?disposableEmpty:new InnerDisposable(this)},RefCountDisposable}();ScheduledDisposable.prototype.dispose=function(){this.scheduler.schedule(this,scheduleItem)};var ScheduledItem=Rx.internals.ScheduledItem=function(scheduler,state,action,dueTime,comparer){this.scheduler=scheduler,this.state=state,this.action=action,this.dueTime=dueTime,this.comparer=comparer||defaultSubComparer,this.disposable=new SingleAssignmentDisposable};ScheduledItem.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},ScheduledItem.prototype.compareTo=function(other){return this.comparer(this.dueTime,other.dueTime)},ScheduledItem.prototype.isCancelled=function(){return this.disposable.isDisposed},ScheduledItem.prototype.invokeCore=function(){return disposableFixup(this.action(this.scheduler,this.state))};var Scheduler=Rx.Scheduler=function(){function Scheduler(){}Scheduler.isScheduler=function(s){return s instanceof Scheduler};var schedulerProto=Scheduler.prototype;return schedulerProto.schedule=function(state,action){throw new NotImplementedError},schedulerProto.scheduleFuture=function(state,dueTime,action){var dt=dueTime;return dt instanceof Date&&(dt-=this.now()),dt=Scheduler.normalize(dt),0===dt?this.schedule(state,action):this._scheduleFuture(state,dt,action)},schedulerProto._scheduleFuture=function(state,dueTime,action){throw new NotImplementedError},Scheduler.now=defaultNow,Scheduler.prototype.now=defaultNow,Scheduler.normalize=function(timeSpan){return timeSpan<0&&(timeSpan=0),timeSpan},Scheduler}(),normalizeTime=Scheduler.normalize,isScheduler=Scheduler.isScheduler;!function(schedulerProto){function invokeRecImmediate(scheduler,pair){function innerAction(state2){function scheduleWork(_,state3){return isAdded?group.remove(d):isDone=!0,action(state3,innerAction),disposableEmpty}var isAdded=!1,isDone=!1,d=scheduler.schedule(state2,scheduleWork);isDone||(group.add(d),isAdded=!0)}var state=pair[0],action=pair[1],group=new CompositeDisposable;return action(state,innerAction),group}function invokeRecDate(scheduler,pair){function innerAction(state2,dueTime1){function scheduleWork(_,state3){return isAdded?group.remove(d):isDone=!0,action(state3,innerAction),disposableEmpty}var isAdded=!1,isDone=!1,d=scheduler.scheduleFuture(state2,dueTime1,scheduleWork);isDone||(group.add(d),isAdded=!0)}var state=pair[0],action=pair[1],group=new CompositeDisposable;return action(state,innerAction),group}schedulerProto.scheduleRecursive=function(state,action){return this.schedule([state,action],invokeRecImmediate)},schedulerProto.scheduleRecursiveFuture=function(state,dueTime,action){return this.scheduleFuture([state,action],dueTime,invokeRecDate)}}(Scheduler.prototype),function(schedulerProto){schedulerProto.schedulePeriodic=function(state,period,action){if("undefined"==typeof root.setInterval)throw new NotSupportedError;period=normalizeTime(period);var s=state,id=root.setInterval(function(){s=action(s)},period);return disposableCreate(function(){root.clearInterval(id)})}}(Scheduler.prototype),function(schedulerProto){schedulerProto.catchError=schedulerProto.catch=function(handler){return new CatchScheduler(this,handler)}}(Scheduler.prototype);var scheduleMethod,clearMethod,SchedulePeriodicRecursive=Rx.internals.SchedulePeriodicRecursive=function(){function createTick(self){return function(command,recurse){recurse(0,self._period);var state=tryCatch(self._action)(self._state);state===errorObj&&(self._cancel.dispose(),thrower(state.e)),self._state=state}}function SchedulePeriodicRecursive(scheduler,state,period,action){this._scheduler=scheduler,this._state=state,this._period=period,this._action=action}return SchedulePeriodicRecursive.prototype.start=function(){var d=new SingleAssignmentDisposable;return this._cancel=d,d.setDisposable(this._scheduler.scheduleRecursiveFuture(0,this._period,createTick(this))),d},SchedulePeriodicRecursive}(),ImmediateScheduler=function(__super__){function ImmediateScheduler(){__super__.call(this)}return inherits(ImmediateScheduler,__super__),ImmediateScheduler.prototype.schedule=function(state,action){return disposableFixup(action(this,state))},ImmediateScheduler}(Scheduler),immediateScheduler=Scheduler.immediate=new ImmediateScheduler,CurrentThreadScheduler=function(__super__){function runTrampoline(){for(;queue.length>0;){var item=queue.dequeue();!item.isCancelled()&&item.invoke()}}function CurrentThreadScheduler(){__super__.call(this)}var queue;return inherits(CurrentThreadScheduler,__super__),CurrentThreadScheduler.prototype.schedule=function(state,action){var si=new ScheduledItem(this,state,action,this.now());if(queue)queue.enqueue(si);else{queue=new PriorityQueue(4),queue.enqueue(si);var result=tryCatch(runTrampoline)();queue=null,result===errorObj&&thrower(result.e)}return si.disposable},CurrentThreadScheduler.prototype.scheduleRequired=function(){return!queue},CurrentThreadScheduler}(Scheduler),currentThreadScheduler=Scheduler.currentThread=new CurrentThreadScheduler,localTimer=function(){var localSetTimeout,localClearTimeout=noop;if(root.setTimeout)localSetTimeout=root.setTimeout,localClearTimeout=root.clearTimeout;else{if(!root.WScript)throw new NotSupportedError;localSetTimeout=function(fn,time){root.WScript.Sleep(time),fn()}}return{setTimeout:localSetTimeout,clearTimeout:localClearTimeout}}(),localSetTimeout=localTimer.setTimeout,localClearTimeout=localTimer.clearTimeout;!function(){function runTask(handle){if(currentlyRunning)localSetTimeout(function(){runTask(handle)},0);else{var task=tasksByHandle[handle];if(task){currentlyRunning=!0;var result=tryCatch(task)();clearMethod(handle),currentlyRunning=!1,result===errorObj&&thrower(result.e)}}}function postMessageSupported(){if(!root.postMessage||root.importScripts)return!1;var isAsync=!1,oldHandler=root.onmessage;return root.onmessage=function(){isAsync=!0},root.postMessage("","*"),root.onmessage=oldHandler,isAsync}var nextHandle=1,tasksByHandle={},currentlyRunning=!1;clearMethod=function(handle){delete tasksByHandle[handle]};var reNative=new RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),setImmediate="function"==typeof(setImmediate=freeGlobal&&moduleExports&&freeGlobal.setImmediate)&&!reNative.test(setImmediate)&&setImmediate;if(isFunction(setImmediate))scheduleMethod=function(action){var id=nextHandle++;return tasksByHandle[id]=action,setImmediate(function(){runTask(id)}),id};else if("undefined"!=typeof process&&"[object process]"==={}.toString.call(process))scheduleMethod=function(action){var id=nextHandle++;return tasksByHandle[id]=action,process.nextTick(function(){runTask(id)}),id};else if(postMessageSupported()){var MSG_PREFIX="ms.rx.schedule"+Math.random(),onGlobalPostMessage=function(event){"string"==typeof event.data&&event.data.substring(0,MSG_PREFIX.length)===MSG_PREFIX&&runTask(event.data.substring(MSG_PREFIX.length))};root.addEventListener("message",onGlobalPostMessage,!1),scheduleMethod=function(action){var id=nextHandle++;return tasksByHandle[id]=action,root.postMessage(MSG_PREFIX+id,"*"),id}}else if(root.MessageChannel){var channel=new root.MessageChannel;channel.port1.onmessage=function(e){runTask(e.data)},scheduleMethod=function(action){var id=nextHandle++;return tasksByHandle[id]=action,channel.port2.postMessage(id),id}}else scheduleMethod="document"in root&&"onreadystatechange"in root.document.createElement("script")?function(action){var scriptElement=root.document.createElement("script"),id=nextHandle++;return tasksByHandle[id]=action,scriptElement.onreadystatechange=function(){runTask(id),scriptElement.onreadystatechange=null,scriptElement.parentNode.removeChild(scriptElement),scriptElement=null},root.document.documentElement.appendChild(scriptElement),id}:function(action){var id=nextHandle++;return tasksByHandle[id]=action,localSetTimeout(function(){runTask(id)},0),id}}();var DefaultScheduler=function(__super__){function DefaultScheduler(){__super__.call(this)}function scheduleAction(disposable,action,scheduler,state){return function(){disposable.setDisposable(Disposable._fixup(action(scheduler,state)))}}function ClearDisposable(id){this._id=id,this.isDisposed=!1}function LocalClearDisposable(id){this._id=id,this.isDisposed=!1}function scheduleLongRunning(state,action,disposable){return function(){action(state,disposable)}}return inherits(DefaultScheduler,__super__),ClearDisposable.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,clearMethod(this._id))},LocalClearDisposable.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,localClearTimeout(this._id))},DefaultScheduler.prototype.schedule=function(state,action){var disposable=new SingleAssignmentDisposable,id=scheduleMethod(scheduleAction(disposable,action,this,state));return new BinaryDisposable(disposable,new ClearDisposable(id))},DefaultScheduler.prototype._scheduleFuture=function(state,dueTime,action){if(0===dueTime)return this.schedule(state,action);var disposable=new SingleAssignmentDisposable,id=localSetTimeout(scheduleAction(disposable,action,this,state),dueTime);return new BinaryDisposable(disposable,new LocalClearDisposable(id))},DefaultScheduler.prototype.scheduleLongRunning=function(state,action){var disposable=disposableCreate(noop);return scheduleMethod(scheduleLongRunning(state,action,disposable)),disposable},DefaultScheduler}(Scheduler),defaultScheduler=Scheduler.default=Scheduler.async=new DefaultScheduler,CatchScheduler=function(__super__){function CatchScheduler(scheduler,handler){this._scheduler=scheduler,this._handler=handler,this._recursiveOriginal=null,this._recursiveWrapper=null,__super__.call(this)}return inherits(CatchScheduler,__super__),CatchScheduler.prototype.schedule=function(state,action){return this._scheduler.schedule(state,this._wrap(action))},CatchScheduler.prototype._scheduleFuture=function(state,dueTime,action){return this._scheduler.schedule(state,dueTime,this._wrap(action))},CatchScheduler.prototype.now=function(){return this._scheduler.now()},CatchScheduler.prototype._clone=function(scheduler){return new CatchScheduler(scheduler,this._handler)},CatchScheduler.prototype._wrap=function(action){var parent=this;return function(self,state){var res=tryCatch(action)(parent._getRecursiveWrapper(self),state);return res===errorObj?(parent._handler(res.e)||thrower(res.e),disposableEmpty):disposableFixup(res)}},CatchScheduler.prototype._getRecursiveWrapper=function(scheduler){if(this._recursiveOriginal!==scheduler){this._recursiveOriginal=scheduler;var wrapper=this._clone(scheduler);wrapper._recursiveOriginal=scheduler,wrapper._recursiveWrapper=wrapper,this._recursiveWrapper=wrapper}return this._recursiveWrapper},CatchScheduler.prototype.schedulePeriodic=function(state,period,action){var self=this,failed=!1,d=new SingleAssignmentDisposable;return d.setDisposable(this._scheduler.schedulePeriodic(state,period,function(state1){if(failed)return null;var res=tryCatch(action)(state1);return res===errorObj?(failed=!0,self._handler(res.e)||thrower(res.e),d.dispose(),null):res})),d},CatchScheduler}(Scheduler),Notification=Rx.Notification=function(){function Notification(){}return Notification.prototype._accept=function(onNext,onError,onCompleted){throw new NotImplementedError},Notification.prototype._acceptObserver=function(onNext,onError,onCompleted){throw new NotImplementedError},Notification.prototype.accept=function(observerOrOnNext,onError,onCompleted){return observerOrOnNext&&"object"===("undefined"==typeof observerOrOnNext?"undefined":(0,_typeof3.default)(observerOrOnNext))?this._acceptObserver(observerOrOnNext):this._accept(observerOrOnNext,onError,onCompleted)},Notification.prototype.toObservable=function(scheduler){var self=this;return isScheduler(scheduler)||(scheduler=immediateScheduler),new AnonymousObservable(function(o){return scheduler.schedule(self,function(_,notification){notification._acceptObserver(o),"N"===notification.kind&&o.onCompleted()})})},Notification}(),OnNextNotification=function(__super__){function OnNextNotification(value){this.value=value,this.kind="N"}return inherits(OnNextNotification,__super__),OnNextNotification.prototype._accept=function(onNext){return onNext(this.value)},OnNextNotification.prototype._acceptObserver=function(o){return o.onNext(this.value)},OnNextNotification.prototype.toString=function(){return"OnNext("+this.value+")"},OnNextNotification}(Notification),OnErrorNotification=function(__super__){function OnErrorNotification(error){this.error=error,this.kind="E"}return inherits(OnErrorNotification,__super__),OnErrorNotification.prototype._accept=function(onNext,onError){return onError(this.error)},OnErrorNotification.prototype._acceptObserver=function(o){return o.onError(this.error)},OnErrorNotification.prototype.toString=function(){return"OnError("+this.error+")"},OnErrorNotification}(Notification),OnCompletedNotification=function(__super__){function OnCompletedNotification(){this.kind="C"}return inherits(OnCompletedNotification,__super__),OnCompletedNotification.prototype._accept=function(onNext,onError,onCompleted){return onCompleted()},OnCompletedNotification.prototype._acceptObserver=function(o){return o.onCompleted()},OnCompletedNotification.prototype.toString=function(){return"OnCompleted()"},OnCompletedNotification}(Notification),notificationCreateOnNext=Notification.createOnNext=function(value){return new OnNextNotification(value)},notificationCreateOnError=Notification.createOnError=function(error){return new OnErrorNotification(error)},notificationCreateOnCompleted=Notification.createOnCompleted=function(){return new OnCompletedNotification},Observer=Rx.Observer=function(){};Observer.prototype.toNotifier=function(){var observer=this;return function(n){return n.accept(observer)}},Observer.prototype.asObserver=function(){var self=this;return new AnonymousObserver(function(x){self.onNext(x)},function(err){self.onError(err)},function(){self.onCompleted()})},Observer.prototype.checked=function(){return new CheckedObserver(this)};var observerCreate=Observer.create=function(onNext,onError,onCompleted){return onNext||(onNext=noop),onError||(onError=defaultError),onCompleted||(onCompleted=noop),new AnonymousObserver(onNext,onError,onCompleted)};Observer.fromNotifier=function(handler,thisArg){var cb=bindCallback(handler,thisArg,1);return new AnonymousObserver(function(x){return cb(notificationCreateOnNext(x))},function(e){return cb(notificationCreateOnError(e))},function(){return cb(notificationCreateOnCompleted())})},Observer.prototype.notifyOn=function(scheduler){return new ObserveOnObserver(scheduler,this)},Observer.prototype.makeSafe=function(disposable){return new AnonymousSafeObserver(this._onNext,this._onError,this._onCompleted,disposable)};var observableProto,AbstractObserver=Rx.internals.AbstractObserver=function(__super__){function AbstractObserver(){this.isStopped=!1}return inherits(AbstractObserver,__super__),AbstractObserver.prototype.next=notImplemented,AbstractObserver.prototype.error=notImplemented,AbstractObserver.prototype.completed=notImplemented,AbstractObserver.prototype.onNext=function(value){!this.isStopped&&this.next(value)},AbstractObserver.prototype.onError=function(error){this.isStopped||(this.isStopped=!0,this.error(error))},AbstractObserver.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},AbstractObserver.prototype.dispose=function(){this.isStopped=!0},AbstractObserver.prototype.fail=function(e){return!this.isStopped&&(this.isStopped=!0,this.error(e),!0)},AbstractObserver}(Observer),AnonymousObserver=Rx.AnonymousObserver=function(__super__){function AnonymousObserver(onNext,onError,onCompleted){__super__.call(this),this._onNext=onNext,this._onError=onError,this._onCompleted=onCompleted}return inherits(AnonymousObserver,__super__),AnonymousObserver.prototype.next=function(value){this._onNext(value)},AnonymousObserver.prototype.error=function(error){this._onError(error)},AnonymousObserver.prototype.completed=function(){
this._onCompleted()},AnonymousObserver}(AbstractObserver),CheckedObserver=function(__super__){function CheckedObserver(observer){__super__.call(this),this._observer=observer,this._state=0}inherits(CheckedObserver,__super__);var CheckedObserverPrototype=CheckedObserver.prototype;return CheckedObserverPrototype.onNext=function(value){this.checkAccess();var res=tryCatch(this._observer.onNext).call(this._observer,value);this._state=0,res===errorObj&&thrower(res.e)},CheckedObserverPrototype.onError=function(err){this.checkAccess();var res=tryCatch(this._observer.onError).call(this._observer,err);this._state=2,res===errorObj&&thrower(res.e)},CheckedObserverPrototype.onCompleted=function(){this.checkAccess();var res=tryCatch(this._observer.onCompleted).call(this._observer);this._state=2,res===errorObj&&thrower(res.e)},CheckedObserverPrototype.checkAccess=function(){if(1===this._state)throw new Error("Re-entrancy detected");if(2===this._state)throw new Error("Observer completed");0===this._state&&(this._state=1)},CheckedObserver}(Observer),ScheduledObserver=Rx.internals.ScheduledObserver=function(__super__){function ScheduledObserver(scheduler,observer){__super__.call(this),this.scheduler=scheduler,this.observer=observer,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new SerialDisposable}function enqueueNext(observer,x){return function(){observer.onNext(x)}}function enqueueError(observer,e){return function(){observer.onError(e)}}function enqueueCompleted(observer){return function(){observer.onCompleted()}}function scheduleMethod(state,recurse){var work;if(!(state.queue.length>0))return void(state.isAcquired=!1);work=state.queue.shift();var res=tryCatch(work)();return res===errorObj?(state.queue=[],state.hasFaulted=!0,thrower(res.e)):void recurse(state)}return inherits(ScheduledObserver,__super__),ScheduledObserver.prototype.next=function(x){this.queue.push(enqueueNext(this.observer,x))},ScheduledObserver.prototype.error=function(e){this.queue.push(enqueueError(this.observer,e))},ScheduledObserver.prototype.completed=function(){this.queue.push(enqueueCompleted(this.observer))},ScheduledObserver.prototype.ensureActive=function(){var isOwner=!1;!this.hasFaulted&&this.queue.length>0&&(isOwner=!this.isAcquired,this.isAcquired=!0),isOwner&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(this,scheduleMethod))},ScheduledObserver.prototype.dispose=function(){__super__.prototype.dispose.call(this),this.disposable.dispose()},ScheduledObserver}(AbstractObserver),ObserveOnObserver=function(__super__){function ObserveOnObserver(scheduler,observer,cancel){__super__.call(this,scheduler,observer),this._cancel=cancel}return inherits(ObserveOnObserver,__super__),ObserveOnObserver.prototype.next=function(value){__super__.prototype.next.call(this,value),this.ensureActive()},ObserveOnObserver.prototype.error=function(e){__super__.prototype.error.call(this,e),this.ensureActive()},ObserveOnObserver.prototype.completed=function(){__super__.prototype.completed.call(this),this.ensureActive()},ObserveOnObserver.prototype.dispose=function(){__super__.prototype.dispose.call(this),this._cancel&&this._cancel.dispose(),this._cancel=null},ObserveOnObserver}(ScheduledObserver),Observable=Rx.Observable=function(){function makeSubscribe(self,subscribe){return function(o){var oldOnError=o.onError;return o.onError=function(e){makeStackTraceLong(e,self),oldOnError.call(o,e)},subscribe.call(self,o)}}function Observable(){if(Rx.config.longStackSupport&&hasStacks){var oldSubscribe=this._subscribe,e=tryCatch(thrower)(new Error).e;this.stack=e.stack.substring(e.stack.indexOf("\n")+1),this._subscribe=makeSubscribe(this,oldSubscribe)}}return observableProto=Observable.prototype,Observable.isObservable=function(o){return o&&isFunction(o.subscribe)},observableProto.subscribe=observableProto.forEach=function(oOrOnNext,onError,onCompleted){return this._subscribe("object"===("undefined"==typeof oOrOnNext?"undefined":(0,_typeof3.default)(oOrOnNext))?oOrOnNext:observerCreate(oOrOnNext,onError,onCompleted))},observableProto.subscribeOnNext=function(onNext,thisArg){return this._subscribe(observerCreate("undefined"!=typeof thisArg?function(x){onNext.call(thisArg,x)}:onNext))},observableProto.subscribeOnError=function(onError,thisArg){return this._subscribe(observerCreate(null,"undefined"!=typeof thisArg?function(e){onError.call(thisArg,e)}:onError))},observableProto.subscribeOnCompleted=function(onCompleted,thisArg){return this._subscribe(observerCreate(null,null,"undefined"!=typeof thisArg?function(){onCompleted.call(thisArg)}:onCompleted))},Observable}(),ObservableBase=Rx.ObservableBase=function(__super__){function fixSubscriber(subscriber){return subscriber&&isFunction(subscriber.dispose)?subscriber:isFunction(subscriber)?disposableCreate(subscriber):disposableEmpty}function setDisposable(s,state){var ado=state[0],self=state[1],sub=tryCatch(self.subscribeCore).call(self,ado);sub!==errorObj||ado.fail(errorObj.e)||thrower(errorObj.e),ado.setDisposable(fixSubscriber(sub))}function ObservableBase(){__super__.call(this)}return inherits(ObservableBase,__super__),ObservableBase.prototype._subscribe=function(o){var ado=new AutoDetachObserver(o),state=[ado,this];return currentThreadScheduler.scheduleRequired()?currentThreadScheduler.schedule(state,setDisposable):setDisposable(null,state),ado},ObservableBase.prototype.subscribeCore=notImplemented,ObservableBase}(Observable),FlatMapObservable=Rx.FlatMapObservable=function(__super__){function FlatMapObservable(source,selector,resultSelector,thisArg){this.resultSelector=isFunction(resultSelector)?resultSelector:null,this.selector=bindCallback(isFunction(selector)?selector:function(){return selector},thisArg,3),this.source=source,__super__.call(this)}function InnerObserver(observer,selector,resultSelector,source){this.i=0,this.selector=selector,this.resultSelector=resultSelector,this.source=source,this.o=observer,AbstractObserver.call(this)}return inherits(FlatMapObservable,__super__),FlatMapObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new InnerObserver(o,this.selector,this.resultSelector,this))},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype._wrapResult=function(result,x,i){return this.resultSelector?result.map(function(y,i2){return this.resultSelector(x,y,i,i2)},this):result},InnerObserver.prototype.next=function(x){var i=this.i++,result=tryCatch(this.selector)(x,i,this.source);return result===errorObj?this.o.onError(result.e):(isPromise(result)&&(result=observableFromPromise(result)),(isArrayLike(result)||isIterable(result))&&(result=Observable.from(result)),void this.o.onNext(this._wrapResult(result,x,i)))},InnerObserver.prototype.error=function(e){this.o.onError(e)},InnerObserver.prototype.completed=function(){this.o.onCompleted()},FlatMapObservable}(ObservableBase),Enumerable=Rx.internals.Enumerable=function(){};IsDisposedDisposable.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.isDisposed=!0)};var ConcatEnumerableObservable=function(__super__){function ConcatEnumerableObservable(sources){this.sources=sources,__super__.call(this)}function scheduleMethod(state,recurse){if(!state.isDisposed){var currentItem=tryCatch(state.e.next).call(state.e);if(currentItem===errorObj)return state.o.onError(currentItem.e);if(currentItem.done)return state.o.onCompleted();var currentValue=currentItem.value;isPromise(currentValue)&&(currentValue=observableFromPromise(currentValue));var d=new SingleAssignmentDisposable;state.subscription.setDisposable(d),d.setDisposable(currentValue.subscribe(new InnerObserver(state,recurse)))}}function InnerObserver(state,recurse){this._state=state,this._recurse=recurse,AbstractObserver.call(this)}return inherits(ConcatEnumerableObservable,__super__),ConcatEnumerableObservable.prototype.subscribeCore=function(o){var subscription=new SerialDisposable,state={isDisposed:!1,o:o,subscription:subscription,e:this.sources[$iterator$]()},cancelable=currentThreadScheduler.scheduleRecursive(state,scheduleMethod);return new NAryDisposable([subscription,cancelable,new IsDisposedDisposable(state)])},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype.next=function(x){this._state.o.onNext(x)},InnerObserver.prototype.error=function(e){this._state.o.onError(e)},InnerObserver.prototype.completed=function(){this._recurse(this._state)},ConcatEnumerableObservable}(ObservableBase);Enumerable.prototype.concat=function(){return new ConcatEnumerableObservable(this)};var CatchErrorObservable=function(__super__){function CatchErrorObservable(sources){this.sources=sources,__super__.call(this)}function scheduleMethod(state,recurse){if(!state.isDisposed){var currentItem=tryCatch(state.e.next).call(state.e);if(currentItem===errorObj)return state.o.onError(currentItem.e);if(currentItem.done)return null!==state.lastError?state.o.onError(state.lastError):state.o.onCompleted();var currentValue=currentItem.value;isPromise(currentValue)&&(currentValue=observableFromPromise(currentValue));var d=new SingleAssignmentDisposable;state.subscription.setDisposable(d),d.setDisposable(currentValue.subscribe(new InnerObserver(state,recurse)))}}function InnerObserver(state,recurse){this._state=state,this._recurse=recurse,AbstractObserver.call(this)}return inherits(CatchErrorObservable,__super__),CatchErrorObservable.prototype.subscribeCore=function(o){var subscription=new SerialDisposable,state={isDisposed:!1,e:this.sources[$iterator$](),subscription:subscription,lastError:null,o:o},cancelable=currentThreadScheduler.scheduleRecursive(state,scheduleMethod);return new NAryDisposable([subscription,cancelable,new IsDisposedDisposable(state)])},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype.next=function(x){this._state.o.onNext(x)},InnerObserver.prototype.error=function(e){this._state.lastError=e,this._recurse(this._state)},InnerObserver.prototype.completed=function(){this._state.o.onCompleted()},CatchErrorObservable}(ObservableBase);Enumerable.prototype.catchError=function(){return new CatchErrorObservable(this)};var RepeatEnumerable=function(__super__){function RepeatEnumerable(v,c){this.v=v,this.c=null==c?-1:c}function RepeatEnumerator(p){this.v=p.v,this.l=p.c}return inherits(RepeatEnumerable,__super__),RepeatEnumerable.prototype[$iterator$]=function(){return new RepeatEnumerator(this)},RepeatEnumerator.prototype.next=function(){return 0===this.l?doneEnumerator:(this.l>0&&this.l--,{done:!1,value:this.v})},RepeatEnumerable}(Enumerable),enumerableRepeat=Enumerable.repeat=function(value,repeatCount){return new RepeatEnumerable(value,repeatCount)},OfEnumerable=function(__super__){function OfEnumerable(s,fn,thisArg){this.s=s,this.fn=fn?bindCallback(fn,thisArg,3):null}function OfEnumerator(p){this.i=-1,this.s=p.s,this.l=this.s.length,this.fn=p.fn}return inherits(OfEnumerable,__super__),OfEnumerable.prototype[$iterator$]=function(){return new OfEnumerator(this)},OfEnumerator.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:doneEnumerator},OfEnumerable}(Enumerable),enumerableOf=Enumerable.of=function(source,selector,thisArg){return new OfEnumerable(source,selector,thisArg)},ObserveOnObservable=function(__super__){function ObserveOnObservable(source,s){this.source=source,this._s=s,__super__.call(this)}return inherits(ObserveOnObservable,__super__),ObserveOnObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new ObserveOnObserver(this._s,o))},ObserveOnObservable}(ObservableBase);observableProto.observeOn=function(scheduler){return new ObserveOnObservable(this,scheduler)};var SubscribeOnObservable=function(__super__){function SubscribeOnObservable(source,s){this.source=source,this._s=s,__super__.call(this)}function scheduleMethod(scheduler,state){var source=state[0],d=state[1],o=state[2];d.setDisposable(new ScheduledDisposable(scheduler,source.subscribe(o)))}return inherits(SubscribeOnObservable,__super__),SubscribeOnObservable.prototype.subscribeCore=function(o){var m=new SingleAssignmentDisposable,d=new SerialDisposable;return d.setDisposable(m),m.setDisposable(this._s.schedule([this.source,d,o],scheduleMethod)),d},SubscribeOnObservable}(ObservableBase);observableProto.subscribeOn=function(scheduler){return new SubscribeOnObservable(this,scheduler)};var FromPromiseObservable=function(__super__){function FromPromiseObservable(p,s){this._p=p,this._s=s,__super__.call(this)}function scheduleNext(s,state){var o=state[0],data=state[1];o.onNext(data),o.onCompleted()}function scheduleError(s,state){var o=state[0],err=state[1];o.onError(err)}return inherits(FromPromiseObservable,__super__),FromPromiseObservable.prototype.subscribeCore=function(o){var sad=new SingleAssignmentDisposable,self=this,p=this._p;return isFunction(p)&&(p=tryCatch(p)(),p===errorObj)?(o.onError(p.e),sad):(p.then(function(data){sad.setDisposable(self._s.schedule([o,data],scheduleNext))},function(err){sad.setDisposable(self._s.schedule([o,err],scheduleError))}),sad)},FromPromiseObservable}(ObservableBase),observableFromPromise=Observable.fromPromise=function(promise,scheduler){return scheduler||(scheduler=defaultScheduler),new FromPromiseObservable(promise,scheduler)};observableProto.toPromise=function(promiseCtor){if(promiseCtor||(promiseCtor=Rx.config.Promise),!promiseCtor)throw new NotSupportedError("Promise type not provided nor in Rx.config.Promise");var source=this;return new promiseCtor(function(resolve,reject){var value;source.subscribe(function(v){value=v},reject,function(){resolve(value)})})};var ToArrayObservable=function(__super__){function ToArrayObservable(source){this.source=source,__super__.call(this)}function InnerObserver(o){this.o=o,this.a=[],AbstractObserver.call(this)}return inherits(ToArrayObservable,__super__),ToArrayObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new InnerObserver(o))},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype.next=function(x){this.a.push(x)},InnerObserver.prototype.error=function(e){this.o.onError(e)},InnerObserver.prototype.completed=function(){this.o.onNext(this.a),this.o.onCompleted()},ToArrayObservable}(ObservableBase);observableProto.toArray=function(){return new ToArrayObservable(this)},Observable.create=function(subscribe,parent){return new AnonymousObservable(subscribe,parent)};var Defer=function(__super__){function Defer(factory){this._f=factory,__super__.call(this)}return inherits(Defer,__super__),Defer.prototype.subscribeCore=function(o){var result=tryCatch(this._f)();return result===errorObj?observableThrow(result.e).subscribe(o):(isPromise(result)&&(result=observableFromPromise(result)),result.subscribe(o))},Defer}(ObservableBase),observableDefer=Observable.defer=function(observableFactory){return new Defer(observableFactory)},EmptyObservable=function(__super__){function EmptyObservable(scheduler){this.scheduler=scheduler,__super__.call(this)}function EmptySink(observer,scheduler){this.observer=observer,this.scheduler=scheduler}function scheduleItem(s,state){return state.onCompleted(),disposableEmpty}return inherits(EmptyObservable,__super__),EmptyObservable.prototype.subscribeCore=function(observer){var sink=new EmptySink(observer,this.scheduler);return sink.run()},EmptySink.prototype.run=function(){var state=this.observer;return this.scheduler===immediateScheduler?scheduleItem(null,state):this.scheduler.schedule(state,scheduleItem)},EmptyObservable}(ObservableBase),EMPTY_OBSERVABLE=new EmptyObservable(immediateScheduler),observableEmpty=Observable.empty=function(scheduler){return isScheduler(scheduler)||(scheduler=immediateScheduler),scheduler===immediateScheduler?EMPTY_OBSERVABLE:new EmptyObservable(scheduler)},FromObservable=function(__super__){function FromObservable(iterable,fn,scheduler){this._iterable=iterable,this._fn=fn,this._scheduler=scheduler,__super__.call(this)}function createScheduleMethod(o,it,fn){return function(i,recurse){var next=tryCatch(it.next).call(it);if(next===errorObj)return o.onError(next.e);if(next.done)return o.onCompleted();var result=next.value;return isFunction(fn)&&(result=tryCatch(fn)(result,i),result===errorObj)?o.onError(result.e):(o.onNext(result),void recurse(i+1))}}return inherits(FromObservable,__super__),FromObservable.prototype.subscribeCore=function(o){var list=Object(this._iterable),it=getIterable(list);return this._scheduler.scheduleRecursive(0,createScheduleMethod(o,it,this._fn))},FromObservable}(ObservableBase),maxSafeInteger=Math.pow(2,53)-1;StringIterable.prototype[$iterator$]=function(){return new StringIterator(this._s)},StringIterator.prototype[$iterator$]=function(){return this},StringIterator.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:doneEnumerator},ArrayIterable.prototype[$iterator$]=function(){return new ArrayIterator(this._a)},ArrayIterator.prototype[$iterator$]=function(){return this},ArrayIterator.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:doneEnumerator};var observableFrom=Observable.from=function(iterable,mapFn,thisArg,scheduler){if(null==iterable)throw new Error("iterable cannot be null.");if(mapFn&&!isFunction(mapFn))throw new Error("mapFn when provided must be a function");if(mapFn)var mapper=bindCallback(mapFn,thisArg,2);return isScheduler(scheduler)||(scheduler=currentThreadScheduler),new FromObservable(iterable,mapper,scheduler)},FromArrayObservable=function(__super__){function FromArrayObservable(args,scheduler){this._args=args,this._scheduler=scheduler,__super__.call(this)}function scheduleMethod(o,args){var len=args.length;return function(i,recurse){i<len?(o.onNext(args[i]),recurse(i+1)):o.onCompleted()}}return inherits(FromArrayObservable,__super__),FromArrayObservable.prototype.subscribeCore=function(o){return this._scheduler.scheduleRecursive(0,scheduleMethod(o,this._args))},FromArrayObservable}(ObservableBase),observableFromArray=Observable.fromArray=function(array,scheduler){return isScheduler(scheduler)||(scheduler=currentThreadScheduler),new FromArrayObservable(array,scheduler)},GenerateObservable=function(__super__){function GenerateObservable(state,cndFn,itrFn,resFn,s){this._initialState=state,this._cndFn=cndFn,this._itrFn=itrFn,this._resFn=resFn,this._s=s,__super__.call(this)}function scheduleRecursive(state,recurse){if(state.first)state.first=!1;else if(state.newState=tryCatch(state.self._itrFn)(state.newState),state.newState===errorObj)return state.o.onError(state.newState.e);var hasResult=tryCatch(state.self._cndFn)(state.newState);if(hasResult===errorObj)return state.o.onError(hasResult.e);if(hasResult){var result=tryCatch(state.self._resFn)(state.newState);if(result===errorObj)return state.o.onError(result.e);state.o.onNext(result),recurse(state)}else state.o.onCompleted()}return inherits(GenerateObservable,__super__),GenerateObservable.prototype.subscribeCore=function(o){var state={o:o,self:this,first:!0,newState:this._initialState};return this._s.scheduleRecursive(state,scheduleRecursive)},GenerateObservable}(ObservableBase);Observable.generate=function(initialState,condition,iterate,resultSelector,scheduler){return isScheduler(scheduler)||(scheduler=currentThreadScheduler),new GenerateObservable(initialState,condition,iterate,resultSelector,scheduler)},Observable.of=function(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];return new FromArrayObservable(args,currentThreadScheduler)},Observable.ofWithScheduler=function(scheduler){for(var len=arguments.length,args=new Array(len-1),i=1;i<len;i++)args[i-1]=arguments[i];return new FromArrayObservable(args,scheduler)},Observable.ofArrayChanges=function(array){if(!Array.isArray(array))throw new TypeError("Array.observe only accepts arrays.");if("function"!=typeof Array.observe&&"function"!=typeof Array.unobserve)throw new TypeError("Array.observe is not supported on your platform");return new AnonymousObservable(function(observer){function observerFn(changes){for(var i=0,len=changes.length;i<len;i++)observer.onNext(changes[i])}return Array.observe(array,observerFn),function(){Array.unobserve(array,observerFn)}})},Observable.ofObjectChanges=function(obj){if(null==obj)throw new TypeError("object must not be null or undefined.");if("function"!=typeof Object.observe&&"function"!=typeof Object.unobserve)throw new TypeError("Object.observe is not supported on your platform");return new AnonymousObservable(function(observer){function observerFn(changes){for(var i=0,len=changes.length;i<len;i++)observer.onNext(changes[i])}return Object.observe(obj,observerFn),function(){Object.unobserve(obj,observerFn)}})};var NeverObservable=function(__super__){function NeverObservable(){__super__.call(this)}return inherits(NeverObservable,__super__),NeverObservable.prototype.subscribeCore=function(observer){return disposableEmpty},NeverObservable}(ObservableBase),NEVER_OBSERVABLE=new NeverObservable,observableNever=Observable.never=function(){return NEVER_OBSERVABLE},PairsObservable=function(__super__){function PairsObservable(o,scheduler){this._o=o,this._keys=(0,_keys2.default)(o),this._scheduler=scheduler,__super__.call(this)}function scheduleMethod(o,obj,keys){return function(i,recurse){if(i<keys.length){var key=keys[i];o.onNext([key,obj[key]]),recurse(i+1)}else o.onCompleted()}}return inherits(PairsObservable,__super__),PairsObservable.prototype.subscribeCore=function(o){return this._scheduler.scheduleRecursive(0,scheduleMethod(o,this._o,this._keys))},PairsObservable}(ObservableBase);Observable.pairs=function(obj,scheduler){return scheduler||(scheduler=currentThreadScheduler),new PairsObservable(obj,scheduler)};var RangeObservable=function(__super__){function RangeObservable(start,count,scheduler){this.start=start,this.rangeCount=count,this.scheduler=scheduler,__super__.call(this)}function loopRecursive(start,count,o){return function(i,recurse){i<count?(o.onNext(start+i),recurse(i+1)):o.onCompleted()}}return inherits(RangeObservable,__super__),RangeObservable.prototype.subscribeCore=function(o){return this.scheduler.scheduleRecursive(0,loopRecursive(this.start,this.rangeCount,o))},RangeObservable}(ObservableBase);Observable.range=function(start,count,scheduler){return isScheduler(scheduler)||(scheduler=currentThreadScheduler),new RangeObservable(start,count,scheduler)};var RepeatObservable=function(__super__){function RepeatObservable(value,repeatCount,scheduler){this.value=value,this.repeatCount=null==repeatCount?-1:repeatCount,this.scheduler=scheduler,__super__.call(this)}return inherits(RepeatObservable,__super__),RepeatObservable.prototype.subscribeCore=function(observer){var sink=new RepeatSink(observer,this);return sink.run()},RepeatObservable}(ObservableBase);RepeatSink.prototype.run=function(){function loopRecursive(i,recurse){return(i===-1||i>0)&&(observer.onNext(value),i>0&&i--),0===i?observer.onCompleted():void recurse(i)}var observer=this.observer,value=this.parent.value;return this.parent.scheduler.scheduleRecursive(this.parent.repeatCount,loopRecursive)},Observable.repeat=function(value,repeatCount,scheduler){return isScheduler(scheduler)||(scheduler=currentThreadScheduler),new RepeatObservable(value,repeatCount,scheduler)};var JustObservable=function(__super__){function JustObservable(value,scheduler){this._value=value,this._scheduler=scheduler,__super__.call(this)}function scheduleItem(s,state){var value=state[0],observer=state[1];return observer.onNext(value),observer.onCompleted(),disposableEmpty}return inherits(JustObservable,__super__),JustObservable.prototype.subscribeCore=function(o){var state=[this._value,o];return this._scheduler===immediateScheduler?scheduleItem(null,state):this._scheduler.schedule(state,scheduleItem)},JustObservable}(ObservableBase),ThrowObservable=(Observable.return=Observable.just=function(value,scheduler){return isScheduler(scheduler)||(scheduler=immediateScheduler),new JustObservable(value,scheduler)},function(__super__){function ThrowObservable(error,scheduler){this._error=error,this._scheduler=scheduler,__super__.call(this)}function scheduleItem(s,state){var e=state[0],o=state[1];return o.onError(e),disposableEmpty}return inherits(ThrowObservable,__super__),ThrowObservable.prototype.subscribeCore=function(o){var state=[this._error,o];return this._scheduler===immediateScheduler?scheduleItem(null,state):this._scheduler.schedule(state,scheduleItem)},ThrowObservable}(ObservableBase)),observableThrow=Observable.throw=function(error,scheduler){return isScheduler(scheduler)||(scheduler=immediateScheduler),new ThrowObservable(error,scheduler)},UsingObservable=function(__super__){function UsingObservable(resFn,obsFn){this._resFn=resFn,this._obsFn=obsFn,__super__.call(this)}return inherits(UsingObservable,__super__),UsingObservable.prototype.subscribeCore=function(o){var disposable=disposableEmpty,resource=tryCatch(this._resFn)();if(resource===errorObj)return new BinaryDisposable(observableThrow(resource.e).subscribe(o),disposable);resource&&(disposable=resource);var source=tryCatch(this._obsFn)(resource);return source===errorObj?new BinaryDisposable(observableThrow(source.e).subscribe(o),disposable):new BinaryDisposable(source.subscribe(o),disposable)},UsingObservable}(ObservableBase);Observable.using=function(resourceFactory,observableFactory){return new UsingObservable(resourceFactory,observableFactory)},observableProto.amb=function(rightSource){var leftSource=this;return new AnonymousObservable(function(observer){function choiceL(){choice||(choice=leftChoice,rightSubscription.dispose())}function choiceR(){choice||(choice=rightChoice,leftSubscription.dispose())}var choice,leftChoice="L",rightChoice="R",leftSubscription=new SingleAssignmentDisposable,rightSubscription=new SingleAssignmentDisposable;isPromise(rightSource)&&(rightSource=observableFromPromise(rightSource));var leftSubscribe=observerCreate(function(left){choiceL(),choice===leftChoice&&observer.onNext(left)},function(e){choiceL(),choice===leftChoice&&observer.onError(e)},function(){choiceL(),choice===leftChoice&&observer.onCompleted()}),rightSubscribe=observerCreate(function(right){choiceR(),choice===rightChoice&&observer.onNext(right)},function(e){choiceR(),choice===rightChoice&&observer.onError(e)},function(){choiceR(),choice===rightChoice&&observer.onCompleted()});return leftSubscription.setDisposable(leftSource.subscribe(leftSubscribe)),rightSubscription.setDisposable(rightSource.subscribe(rightSubscribe)),new BinaryDisposable(leftSubscription,rightSubscription)})},Observable.amb=function(){var items,acc=observableNever();if(Array.isArray(arguments[0]))items=arguments[0];else{var len=arguments.length;items=new Array(items);for(var i=0;i<len;i++)items[i]=arguments[i]}for(var i=0,len=items.length;i<len;i++)acc=amb(acc,items[i]);return acc};var CatchObservable=function(__super__){function CatchObservable(source,fn){this.source=source,this._fn=fn,__super__.call(this)}return inherits(CatchObservable,__super__),CatchObservable.prototype.subscribeCore=function(o){var d1=new SingleAssignmentDisposable,subscription=new SerialDisposable;return subscription.setDisposable(d1),d1.setDisposable(this.source.subscribe(new CatchObserver(o,subscription,this._fn))),subscription},CatchObservable}(ObservableBase),CatchObserver=function(__super__){function CatchObserver(o,s,fn){this._o=o,this._s=s,this._fn=fn,__super__.call(this)}return inherits(CatchObserver,__super__),CatchObserver.prototype.next=function(x){this._o.onNext(x)},CatchObserver.prototype.completed=function(){return this._o.onCompleted()},CatchObserver.prototype.error=function(e){var result=tryCatch(this._fn)(e);if(result===errorObj)return this._o.onError(result.e);isPromise(result)&&(result=observableFromPromise(result));var d=new SingleAssignmentDisposable;this._s.setDisposable(d),d.setDisposable(result.subscribe(this._o))},CatchObserver}(AbstractObserver);observableProto.catch=function(handlerOrSecond){return isFunction(handlerOrSecond)?new CatchObservable(this,handlerOrSecond):observableCatch([this,handlerOrSecond])};var observableCatch=Observable.catch=function(){var items;if(Array.isArray(arguments[0]))items=arguments[0];else{var len=arguments.length;items=new Array(len);for(var i=0;i<len;i++)items[i]=arguments[i]}return enumerableOf(items).catchError()};observableProto.combineLatest=function(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];return Array.isArray(args[0])?args[0].unshift(this):args.unshift(this),combineLatest.apply(this,args)};var CombineLatestObservable=function(__super__){function CombineLatestObservable(params,cb){this._params=params,this._cb=cb,__super__.call(this)}return inherits(CombineLatestObservable,__super__),CombineLatestObservable.prototype.subscribeCore=function(observer){for(var len=this._params.length,subscriptions=new Array(len),state={hasValue:arrayInitialize(len,falseFactory),hasValueAll:!1,isDone:arrayInitialize(len,falseFactory),values:new Array(len)},i=0;i<len;i++){var source=this._params[i],sad=new SingleAssignmentDisposable;subscriptions[i]=sad,isPromise(source)&&(source=observableFromPromise(source)),sad.setDisposable(source.subscribe(new CombineLatestObserver(observer,i,this._cb,state)))}return new NAryDisposable(subscriptions)},CombineLatestObservable}(ObservableBase),CombineLatestObserver=function(__super__){function CombineLatestObserver(o,i,cb,state){this._o=o,this._i=i,this._cb=cb,this._state=state,__super__.call(this)}function notTheSame(i){return function(x,j){return j!==i}}return inherits(CombineLatestObserver,__super__),CombineLatestObserver.prototype.next=function(x){if(this._state.values[this._i]=x,this._state.hasValue[this._i]=!0,this._state.hasValueAll||(this._state.hasValueAll=this._state.hasValue.every(identity))){var res=tryCatch(this._cb).apply(null,this._state.values);if(res===errorObj)return this._o.onError(res.e);this._o.onNext(res)}else this._state.isDone.filter(notTheSame(this._i)).every(identity)&&this._o.onCompleted()},CombineLatestObserver.prototype.error=function(e){this._o.onError(e)},CombineLatestObserver.prototype.completed=function(){this._state.isDone[this._i]=!0,this._state.isDone.every(identity)&&this._o.onCompleted()},CombineLatestObserver}(AbstractObserver),combineLatest=Observable.combineLatest=function(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];var resultSelector=isFunction(args[len-1])?args.pop():argumentsToArray;return Array.isArray(args[0])&&(args=args[0]),new CombineLatestObservable(args,resultSelector)};observableProto.concat=function(){for(var args=[],i=0,len=arguments.length;i<len;i++)args.push(arguments[i]);return args.unshift(this),observableConcat.apply(null,args)};var ConcatObserver=function(__super__){function ConcatObserver(s,fn){this._s=s,this._fn=fn,__super__.call(this)}return inherits(ConcatObserver,__super__),ConcatObserver.prototype.next=function(x){this._s.o.onNext(x)},ConcatObserver.prototype.error=function(e){this._s.o.onError(e)},ConcatObserver.prototype.completed=function(){this._s.i++,this._fn(this._s)},ConcatObserver}(AbstractObserver),ConcatObservable=function(__super__){function ConcatObservable(sources){this._sources=sources,__super__.call(this)}function scheduleRecursive(state,recurse){if(!state.disposable.isDisposed){if(state.i===state.sources.length)return state.o.onCompleted();var currentValue=state.sources[state.i];isPromise(currentValue)&&(currentValue=observableFromPromise(currentValue));var d=new SingleAssignmentDisposable;state.subscription.setDisposable(d),d.setDisposable(currentValue.subscribe(new ConcatObserver(state,recurse)))}}return inherits(ConcatObservable,__super__),ConcatObservable.prototype.subscribeCore=function(o){var subscription=new SerialDisposable,disposable=disposableCreate(noop),state={o:o,i:0,subscription:subscription,disposable:disposable,sources:this._sources},cancelable=immediateScheduler.scheduleRecursive(state,scheduleRecursive);return new NAryDisposable([subscription,disposable,cancelable]);
},ConcatObservable}(ObservableBase),observableConcat=Observable.concat=function(){var args;if(Array.isArray(arguments[0]))args=arguments[0];else{args=new Array(arguments.length);for(var i=0,len=arguments.length;i<len;i++)args[i]=arguments[i]}return new ConcatObservable(args)};observableProto.concatAll=function(){return this.merge(1)};var MergeObservable=function(__super__){function MergeObservable(source,maxConcurrent){this.source=source,this.maxConcurrent=maxConcurrent,__super__.call(this)}return inherits(MergeObservable,__super__),MergeObservable.prototype.subscribeCore=function(observer){var g=new CompositeDisposable;return g.add(this.source.subscribe(new MergeObserver(observer,this.maxConcurrent,g))),g},MergeObservable}(ObservableBase),MergeObserver=function(__super__){function MergeObserver(o,max,g){this.o=o,this.max=max,this.g=g,this.done=!1,this.q=[],this.activeCount=0,__super__.call(this)}function InnerObserver(parent,sad){this.parent=parent,this.sad=sad,__super__.call(this)}return inherits(MergeObserver,__super__),MergeObserver.prototype.handleSubscribe=function(xs){var sad=new SingleAssignmentDisposable;this.g.add(sad),isPromise(xs)&&(xs=observableFromPromise(xs)),sad.setDisposable(xs.subscribe(new InnerObserver(this,sad)))},MergeObserver.prototype.next=function(innerSource){this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(innerSource)):this.q.push(innerSource)},MergeObserver.prototype.error=function(e){this.o.onError(e)},MergeObserver.prototype.completed=function(){this.done=!0,0===this.activeCount&&this.o.onCompleted()},inherits(InnerObserver,__super__),InnerObserver.prototype.next=function(x){this.parent.o.onNext(x)},InnerObserver.prototype.error=function(e){this.parent.o.onError(e)},InnerObserver.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.q.length>0?this.parent.handleSubscribe(this.parent.q.shift()):(this.parent.activeCount--,this.parent.done&&0===this.parent.activeCount&&this.parent.o.onCompleted())},MergeObserver}(AbstractObserver);observableProto.merge=function(maxConcurrentOrOther){return"number"!=typeof maxConcurrentOrOther?observableMerge(this,maxConcurrentOrOther):new MergeObservable(this,maxConcurrentOrOther)};var observableMerge=Observable.merge=function(){var scheduler,i,sources=[],len=arguments.length;if(arguments[0])if(isScheduler(arguments[0]))for(scheduler=arguments[0],i=1;i<len;i++)sources.push(arguments[i]);else for(scheduler=immediateScheduler,i=0;i<len;i++)sources.push(arguments[i]);else for(scheduler=immediateScheduler,i=1;i<len;i++)sources.push(arguments[i]);return Array.isArray(sources[0])&&(sources=sources[0]),observableOf(scheduler,sources).mergeAll()},MergeAllObservable=function(__super__){function MergeAllObservable(source){this.source=source,__super__.call(this)}return inherits(MergeAllObservable,__super__),MergeAllObservable.prototype.subscribeCore=function(o){var g=new CompositeDisposable,m=new SingleAssignmentDisposable;return g.add(m),m.setDisposable(this.source.subscribe(new MergeAllObserver(o,g))),g},MergeAllObservable}(ObservableBase),MergeAllObserver=function(__super__){function MergeAllObserver(o,g){this.o=o,this.g=g,this.done=!1,__super__.call(this)}function InnerObserver(parent,sad){this.parent=parent,this.sad=sad,__super__.call(this)}return inherits(MergeAllObserver,__super__),MergeAllObserver.prototype.next=function(innerSource){var sad=new SingleAssignmentDisposable;this.g.add(sad),isPromise(innerSource)&&(innerSource=observableFromPromise(innerSource)),sad.setDisposable(innerSource.subscribe(new InnerObserver(this,sad)))},MergeAllObserver.prototype.error=function(e){this.o.onError(e)},MergeAllObserver.prototype.completed=function(){this.done=!0,1===this.g.length&&this.o.onCompleted()},inherits(InnerObserver,__super__),InnerObserver.prototype.next=function(x){this.parent.o.onNext(x)},InnerObserver.prototype.error=function(e){this.parent.o.onError(e)},InnerObserver.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.done&&1===this.parent.g.length&&this.parent.o.onCompleted()},MergeAllObserver}(AbstractObserver);observableProto.mergeAll=function(){return new MergeAllObservable(this)};var CompositeError=Rx.CompositeError=function(errors){this.innerErrors=errors,this.message="This contains multiple errors. Check the innerErrors",Error.call(this)};CompositeError.prototype=(0,_create2.default)(Error.prototype),CompositeError.prototype.name="CompositeError";var MergeDelayErrorObservable=function(__super__){function MergeDelayErrorObservable(source){this.source=source,__super__.call(this)}return inherits(MergeDelayErrorObservable,__super__),MergeDelayErrorObservable.prototype.subscribeCore=function(o){var group=new CompositeDisposable,m=new SingleAssignmentDisposable,state={isStopped:!1,errors:[],o:o};return group.add(m),m.setDisposable(this.source.subscribe(new MergeDelayErrorObserver(group,state))),group},MergeDelayErrorObservable}(ObservableBase),MergeDelayErrorObserver=function(__super__){function MergeDelayErrorObserver(group,state){this._group=group,this._state=state,__super__.call(this)}function setCompletion(o,errors){0===errors.length?o.onCompleted():1===errors.length?o.onError(errors[0]):o.onError(new CompositeError(errors))}function InnerObserver(inner,group,state){this._inner=inner,this._group=group,this._state=state,__super__.call(this)}return inherits(MergeDelayErrorObserver,__super__),MergeDelayErrorObserver.prototype.next=function(x){var inner=new SingleAssignmentDisposable;this._group.add(inner),isPromise(x)&&(x=observableFromPromise(x)),inner.setDisposable(x.subscribe(new InnerObserver(inner,this._group,this._state)))},MergeDelayErrorObserver.prototype.error=function(e){this._state.errors.push(e),this._state.isStopped=!0,1===this._group.length&&setCompletion(this._state.o,this._state.errors)},MergeDelayErrorObserver.prototype.completed=function(){this._state.isStopped=!0,1===this._group.length&&setCompletion(this._state.o,this._state.errors)},inherits(InnerObserver,__super__),InnerObserver.prototype.next=function(x){this._state.o.onNext(x)},InnerObserver.prototype.error=function(e){this._state.errors.push(e),this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&setCompletion(this._state.o,this._state.errors)},InnerObserver.prototype.completed=function(){this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&setCompletion(this._state.o,this._state.errors)},MergeDelayErrorObserver}(AbstractObserver);Observable.mergeDelayError=function(){var args;if(Array.isArray(arguments[0]))args=arguments[0];else{var len=arguments.length;args=new Array(len);for(var i=0;i<len;i++)args[i]=arguments[i]}var source=observableOf(null,args);return new MergeDelayErrorObservable(source)},observableProto.onErrorResumeNext=function(second){if(!second)throw new Error("Second observable is required");return onErrorResumeNext([this,second])};var OnErrorResumeNextObservable=function(__super__){function OnErrorResumeNextObservable(sources){this.sources=sources,__super__.call(this)}function scheduleMethod(state,recurse){if(state.pos<state.sources.length){var current=state.sources[state.pos++];isPromise(current)&&(current=observableFromPromise(current));var d=new SingleAssignmentDisposable;state.subscription.setDisposable(d),d.setDisposable(current.subscribe(new OnErrorResumeNextObserver(state,recurse)))}else state.o.onCompleted()}return inherits(OnErrorResumeNextObservable,__super__),OnErrorResumeNextObservable.prototype.subscribeCore=function(o){var subscription=new SerialDisposable,state={pos:0,subscription:subscription,o:o,sources:this.sources},cancellable=immediateScheduler.scheduleRecursive(state,scheduleMethod);return new BinaryDisposable(subscription,cancellable)},OnErrorResumeNextObservable}(ObservableBase),OnErrorResumeNextObserver=function(__super__){function OnErrorResumeNextObserver(state,recurse){this._state=state,this._recurse=recurse,__super__.call(this)}return inherits(OnErrorResumeNextObserver,__super__),OnErrorResumeNextObserver.prototype.next=function(x){this._state.o.onNext(x)},OnErrorResumeNextObserver.prototype.error=function(){this._recurse(this._state)},OnErrorResumeNextObserver.prototype.completed=function(){this._recurse(this._state)},OnErrorResumeNextObserver}(AbstractObserver),onErrorResumeNext=Observable.onErrorResumeNext=function(){var sources=[];if(Array.isArray(arguments[0]))sources=arguments[0];else{var len=arguments.length;sources=new Array(len);for(var i=0;i<len;i++)sources[i]=arguments[i]}return new OnErrorResumeNextObservable(sources)},SkipUntilObservable=function(__super__){function SkipUntilObservable(source,other){this._s=source,this._o=isPromise(other)?observableFromPromise(other):other,this._open=!1,__super__.call(this)}return inherits(SkipUntilObservable,__super__),SkipUntilObservable.prototype.subscribeCore=function(o){var leftSubscription=new SingleAssignmentDisposable;leftSubscription.setDisposable(this._s.subscribe(new SkipUntilSourceObserver(o,this))),isPromise(this._o)&&(this._o=observableFromPromise(this._o));var rightSubscription=new SingleAssignmentDisposable;return rightSubscription.setDisposable(this._o.subscribe(new SkipUntilOtherObserver(o,this,rightSubscription))),new BinaryDisposable(leftSubscription,rightSubscription)},SkipUntilObservable}(ObservableBase),SkipUntilSourceObserver=function(__super__){function SkipUntilSourceObserver(o,p){this._o=o,this._p=p,__super__.call(this)}return inherits(SkipUntilSourceObserver,__super__),SkipUntilSourceObserver.prototype.next=function(x){this._p._open&&this._o.onNext(x)},SkipUntilSourceObserver.prototype.error=function(err){this._o.onError(err)},SkipUntilSourceObserver.prototype.onCompleted=function(){this._p._open&&this._o.onCompleted()},SkipUntilSourceObserver}(AbstractObserver),SkipUntilOtherObserver=function(__super__){function SkipUntilOtherObserver(o,p,r){this._o=o,this._p=p,this._r=r,__super__.call(this)}return inherits(SkipUntilOtherObserver,__super__),SkipUntilOtherObserver.prototype.next=function(){this._p._open=!0,this._r.dispose()},SkipUntilOtherObserver.prototype.error=function(err){this._o.onError(err)},SkipUntilOtherObserver.prototype.onCompleted=function(){this._r.dispose()},SkipUntilOtherObserver}(AbstractObserver);observableProto.skipUntil=function(other){return new SkipUntilObservable(this,other)};var SwitchObservable=function(__super__){function SwitchObservable(source){this.source=source,__super__.call(this)}function SwitchObserver(o,inner){this.o=o,this.inner=inner,this.stopped=!1,this.latest=0,this.hasLatest=!1,AbstractObserver.call(this)}function InnerObserver(parent,id){this.parent=parent,this.id=id,AbstractObserver.call(this)}return inherits(SwitchObservable,__super__),SwitchObservable.prototype.subscribeCore=function(o){var inner=new SerialDisposable,s=this.source.subscribe(new SwitchObserver(o,inner));return new BinaryDisposable(s,inner)},inherits(SwitchObserver,AbstractObserver),SwitchObserver.prototype.next=function(innerSource){var d=new SingleAssignmentDisposable,id=++this.latest;this.hasLatest=!0,this.inner.setDisposable(d),isPromise(innerSource)&&(innerSource=observableFromPromise(innerSource)),d.setDisposable(innerSource.subscribe(new InnerObserver(this,id)))},SwitchObserver.prototype.error=function(e){this.o.onError(e)},SwitchObserver.prototype.completed=function(){this.stopped=!0,!this.hasLatest&&this.o.onCompleted()},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype.next=function(x){this.parent.latest===this.id&&this.parent.o.onNext(x)},InnerObserver.prototype.error=function(e){this.parent.latest===this.id&&this.parent.o.onError(e)},InnerObserver.prototype.completed=function(){this.parent.latest===this.id&&(this.parent.hasLatest=!1,this.parent.stopped&&this.parent.o.onCompleted())},SwitchObservable}(ObservableBase);observableProto.switch=observableProto.switchLatest=function(){return new SwitchObservable(this)};var TakeUntilObservable=function(__super__){function TakeUntilObservable(source,other){this.source=source,this.other=isPromise(other)?observableFromPromise(other):other,__super__.call(this)}return inherits(TakeUntilObservable,__super__),TakeUntilObservable.prototype.subscribeCore=function(o){return new BinaryDisposable(this.source.subscribe(o),this.other.subscribe(new TakeUntilObserver(o)))},TakeUntilObservable}(ObservableBase),TakeUntilObserver=function(__super__){function TakeUntilObserver(o){this._o=o,__super__.call(this)}return inherits(TakeUntilObserver,__super__),TakeUntilObserver.prototype.next=function(){this._o.onCompleted()},TakeUntilObserver.prototype.error=function(err){this._o.onError(err)},TakeUntilObserver.prototype.onCompleted=noop,TakeUntilObserver}(AbstractObserver);observableProto.takeUntil=function(other){return new TakeUntilObservable(this,other)};var WithLatestFromObservable=function(__super__){function WithLatestFromObservable(source,sources,resultSelector){this._s=source,this._ss=sources,this._cb=resultSelector,__super__.call(this)}return inherits(WithLatestFromObservable,__super__),WithLatestFromObservable.prototype.subscribeCore=function(o){for(var len=this._ss.length,state={hasValue:arrayInitialize(len,falseFactory),hasValueAll:!1,values:new Array(len)},n=this._ss.length,subscriptions=new Array(n+1),i=0;i<n;i++){var other=this._ss[i],sad=new SingleAssignmentDisposable;isPromise(other)&&(other=observableFromPromise(other)),sad.setDisposable(other.subscribe(new WithLatestFromOtherObserver(o,i,state))),subscriptions[i]=sad}var outerSad=new SingleAssignmentDisposable;return outerSad.setDisposable(this._s.subscribe(new WithLatestFromSourceObserver(o,this._cb,state))),subscriptions[n]=outerSad,new NAryDisposable(subscriptions)},WithLatestFromObservable}(ObservableBase),WithLatestFromOtherObserver=function(__super__){function WithLatestFromOtherObserver(o,i,state){this._o=o,this._i=i,this._state=state,__super__.call(this)}return inherits(WithLatestFromOtherObserver,__super__),WithLatestFromOtherObserver.prototype.next=function(x){this._state.values[this._i]=x,this._state.hasValue[this._i]=!0,this._state.hasValueAll=this._state.hasValue.every(identity)},WithLatestFromOtherObserver.prototype.error=function(e){this._o.onError(e)},WithLatestFromOtherObserver.prototype.completed=noop,WithLatestFromOtherObserver}(AbstractObserver),WithLatestFromSourceObserver=function(__super__){function WithLatestFromSourceObserver(o,cb,state){this._o=o,this._cb=cb,this._state=state,__super__.call(this)}return inherits(WithLatestFromSourceObserver,__super__),WithLatestFromSourceObserver.prototype.next=function(x){var allValues=[x].concat(this._state.values);if(this._state.hasValueAll){var res=tryCatch(this._cb).apply(null,allValues);return res===errorObj?this._o.onError(res.e):void this._o.onNext(res)}},WithLatestFromSourceObserver.prototype.error=function(e){this._o.onError(e)},WithLatestFromSourceObserver.prototype.completed=function(){this._o.onCompleted()},WithLatestFromSourceObserver}(AbstractObserver);observableProto.withLatestFrom=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];var resultSelector=isFunction(args[len-1])?args.pop():argumentsToArray;return Array.isArray(args[0])&&(args=args[0]),new WithLatestFromObservable(this,args,resultSelector)};var ZipObservable=function(__super__){function ZipObservable(sources,resultSelector){this._s=sources,this._cb=resultSelector,__super__.call(this)}return inherits(ZipObservable,__super__),ZipObservable.prototype.subscribeCore=function(observer){for(var n=this._s.length,subscriptions=new Array(n),done=arrayInitialize(n,falseFactory),q=arrayInitialize(n,emptyArrayFactory),i=0;i<n;i++){var source=this._s[i],sad=new SingleAssignmentDisposable;subscriptions[i]=sad,isPromise(source)&&(source=observableFromPromise(source)),sad.setDisposable(source.subscribe(new ZipObserver(observer,i,this,q,done)))}return new NAryDisposable(subscriptions)},ZipObservable}(ObservableBase),ZipObserver=function(__super__){function ZipObserver(o,i,p,q,d){this._o=o,this._i=i,this._p=p,this._q=q,this._d=d,__super__.call(this)}function notEmpty(x){return x.length>0}function shiftEach(x){return x.shift()}function notTheSame(i){return function(x,j){return j!==i}}return inherits(ZipObserver,__super__),ZipObserver.prototype.next=function(x){if(this._q[this._i].push(x),this._q.every(notEmpty)){var queuedValues=this._q.map(shiftEach),res=tryCatch(this._p._cb).apply(null,queuedValues);if(res===errorObj)return this._o.onError(res.e);this._o.onNext(res)}else this._d.filter(notTheSame(this._i)).every(identity)&&this._o.onCompleted()},ZipObserver.prototype.error=function(e){this._o.onError(e)},ZipObserver.prototype.completed=function(){this._d[this._i]=!0,this._d.every(identity)&&this._o.onCompleted()},ZipObserver}(AbstractObserver);observableProto.zip=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];var resultSelector=isFunction(args[len-1])?args.pop():argumentsToArray;Array.isArray(args[0])&&(args=args[0]);var parent=this;return args.unshift(parent),new ZipObservable(args,resultSelector)},Observable.zip=function(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];Array.isArray(args[0])&&(args=isFunction(args[1])?args[0].concat(args[1]):args[0]);var first=args.shift();return first.zip.apply(first,args)};var ZipIterableObservable=function(__super__){function ZipIterableObservable(sources,cb){this.sources=sources,this._cb=cb,__super__.call(this)}return inherits(ZipIterableObservable,__super__),ZipIterableObservable.prototype.subscribeCore=function(o){for(var sources=this.sources,len=sources.length,subscriptions=new Array(len),state={q:arrayInitialize(len,emptyArrayFactory),done:arrayInitialize(len,falseFactory),cb:this._cb,o:o},i=0;i<len;i++)!function(i){var source=sources[i],sad=new SingleAssignmentDisposable;(isArrayLike(source)||isIterable(source))&&(source=observableFrom(source)),subscriptions[i]=sad,sad.setDisposable(source.subscribe(new ZipIterableObserver(state,i)))}(i);return new NAryDisposable(subscriptions)},ZipIterableObservable}(ObservableBase),ZipIterableObserver=function(__super__){function ZipIterableObserver(s,i){this._s=s,this._i=i,__super__.call(this)}function notEmpty(x){return x.length>0}function shiftEach(x){return x.shift()}function notTheSame(i){return function(x,j){return j!==i}}return inherits(ZipIterableObserver,__super__),ZipIterableObserver.prototype.next=function(x){if(this._s.q[this._i].push(x),this._s.q.every(notEmpty)){var queuedValues=this._s.q.map(shiftEach),res=tryCatch(this._s.cb).apply(null,queuedValues);if(res===errorObj)return this._s.o.onError(res.e);this._s.o.onNext(res)}else this._s.done.filter(notTheSame(this._i)).every(identity)&&this._s.o.onCompleted()},ZipIterableObserver.prototype.error=function(e){this._s.o.onError(e)},ZipIterableObserver.prototype.completed=function(){this._s.done[this._i]=!0,this._s.done.every(identity)&&this._s.o.onCompleted()},ZipIterableObserver}(AbstractObserver);observableProto.zipIterable=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];var resultSelector=isFunction(args[len-1])?args.pop():argumentsToArray,parent=this;return args.unshift(parent),new ZipIterableObservable(args,resultSelector)},observableProto.asObservable=function(){return new AnonymousObservable(asObservable(this),this)},observableProto.bufferWithCount=observableProto.bufferCount=function(count,skip){return"number"!=typeof skip&&(skip=count),this.windowWithCount(count,skip).flatMap(toArray).filter(notEmpty)};var DematerializeObservable=function(__super__){function DematerializeObservable(source){this.source=source,__super__.call(this)}return inherits(DematerializeObservable,__super__),DematerializeObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new DematerializeObserver(o))},DematerializeObservable}(ObservableBase),DematerializeObserver=function(__super__){function DematerializeObserver(o){this._o=o,__super__.call(this)}return inherits(DematerializeObserver,__super__),DematerializeObserver.prototype.next=function(x){x.accept(this._o)},DematerializeObserver.prototype.error=function(e){this._o.onError(e)},DematerializeObserver.prototype.completed=function(){this._o.onCompleted()},DematerializeObserver}(AbstractObserver);observableProto.dematerialize=function(){return new DematerializeObservable(this)};var DistinctUntilChangedObservable=function(__super__){function DistinctUntilChangedObservable(source,keyFn,comparer){this.source=source,this.keyFn=keyFn,this.comparer=comparer,__super__.call(this)}return inherits(DistinctUntilChangedObservable,__super__),DistinctUntilChangedObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new DistinctUntilChangedObserver(o,this.keyFn,this.comparer))},DistinctUntilChangedObservable}(ObservableBase),DistinctUntilChangedObserver=function(__super__){function DistinctUntilChangedObserver(o,keyFn,comparer){this.o=o,this.keyFn=keyFn,this.comparer=comparer,this.hasCurrentKey=!1,this.currentKey=null,__super__.call(this)}return inherits(DistinctUntilChangedObserver,__super__),DistinctUntilChangedObserver.prototype.next=function(x){var comparerEquals,key=x;return isFunction(this.keyFn)&&(key=tryCatch(this.keyFn)(x),key===errorObj)?this.o.onError(key.e):this.hasCurrentKey&&(comparerEquals=tryCatch(this.comparer)(this.currentKey,key),comparerEquals===errorObj)?this.o.onError(comparerEquals.e):void(this.hasCurrentKey&&comparerEquals||(this.hasCurrentKey=!0,this.currentKey=key,this.o.onNext(x)))},DistinctUntilChangedObserver.prototype.error=function(e){this.o.onError(e)},DistinctUntilChangedObserver.prototype.completed=function(){this.o.onCompleted()},DistinctUntilChangedObserver}(AbstractObserver);observableProto.distinctUntilChanged=function(keyFn,comparer){return comparer||(comparer=defaultComparer),new DistinctUntilChangedObservable(this,keyFn,comparer)};var TapObservable=function(__super__){function TapObservable(source,observerOrOnNext,onError,onCompleted){this.source=source,this._oN=observerOrOnNext,this._oE=onError,this._oC=onCompleted,__super__.call(this)}function InnerObserver(o,p){this.o=o,this.t=!p._oN||isFunction(p._oN)?observerCreate(p._oN||noop,p._oE||noop,p._oC||noop):p._oN,this.isStopped=!1,AbstractObserver.call(this)}return inherits(TapObservable,__super__),TapObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new InnerObserver(o,this))},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype.next=function(x){var res=tryCatch(this.t.onNext).call(this.t,x);res===errorObj&&this.o.onError(res.e),this.o.onNext(x)},InnerObserver.prototype.error=function(err){var res=tryCatch(this.t.onError).call(this.t,err);return res===errorObj?this.o.onError(res.e):void this.o.onError(err)},InnerObserver.prototype.completed=function(){var res=tryCatch(this.t.onCompleted).call(this.t);return res===errorObj?this.o.onError(res.e):void this.o.onCompleted()},TapObservable}(ObservableBase);observableProto.do=observableProto.tap=observableProto.doAction=function(observerOrOnNext,onError,onCompleted){return new TapObservable(this,observerOrOnNext,onError,onCompleted)},observableProto.doOnNext=observableProto.tapOnNext=function(onNext,thisArg){return this.tap("undefined"!=typeof thisArg?function(x){onNext.call(thisArg,x)}:onNext)},observableProto.doOnError=observableProto.tapOnError=function(onError,thisArg){return this.tap(noop,"undefined"!=typeof thisArg?function(e){onError.call(thisArg,e)}:onError)},observableProto.doOnCompleted=observableProto.tapOnCompleted=function(onCompleted,thisArg){return this.tap(noop,null,"undefined"!=typeof thisArg?function(){onCompleted.call(thisArg)}:onCompleted)};var FinallyObservable=function(__super__){function FinallyObservable(source,fn,thisArg){this.source=source,this._fn=bindCallback(fn,thisArg,0),__super__.call(this)}function FinallyDisposable(s,fn){this.isDisposed=!1,this._s=s,this._fn=fn}return inherits(FinallyObservable,__super__),FinallyObservable.prototype.subscribeCore=function(o){var d=tryCatch(this.source.subscribe).call(this.source,o);return d===errorObj&&(this._fn(),thrower(d.e)),new FinallyDisposable(d,this._fn)},FinallyDisposable.prototype.dispose=function(){if(!this.isDisposed){var res=tryCatch(this._s.dispose).call(this._s);this._fn(),res===errorObj&&thrower(res.e)}},FinallyObservable}(ObservableBase);observableProto.finally=function(action,thisArg){return new FinallyObservable(this,action,thisArg)};var IgnoreElementsObservable=function(__super__){function IgnoreElementsObservable(source){this.source=source,__super__.call(this)}function InnerObserver(o){this.o=o,this.isStopped=!1}return inherits(IgnoreElementsObservable,__super__),IgnoreElementsObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new InnerObserver(o))},InnerObserver.prototype.onNext=noop,InnerObserver.prototype.onError=function(err){this.isStopped||(this.isStopped=!0,this.o.onError(err))},InnerObserver.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},InnerObserver.prototype.dispose=function(){this.isStopped=!0},InnerObserver.prototype.fail=function(e){return!this.isStopped&&(this.isStopped=!0,this.observer.onError(e),!0)},IgnoreElementsObservable}(ObservableBase);observableProto.ignoreElements=function(){return new IgnoreElementsObservable(this)};var MaterializeObservable=function(__super__){function MaterializeObservable(source,fn){this.source=source,__super__.call(this)}return inherits(MaterializeObservable,__super__),MaterializeObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new MaterializeObserver(o))},MaterializeObservable}(ObservableBase),MaterializeObserver=function(__super__){function MaterializeObserver(o){this._o=o,__super__.call(this)}return inherits(MaterializeObserver,__super__),MaterializeObserver.prototype.next=function(x){this._o.onNext(notificationCreateOnNext(x))},MaterializeObserver.prototype.error=function(e){this._o.onNext(notificationCreateOnError(e)),this._o.onCompleted()},MaterializeObserver.prototype.completed=function(){this._o.onNext(notificationCreateOnCompleted()),this._o.onCompleted()},MaterializeObserver}(AbstractObserver);observableProto.materialize=function(){return new MaterializeObservable(this)},observableProto.repeat=function(repeatCount){return enumerableRepeat(this,repeatCount).concat()},observableProto.retry=function(retryCount){return enumerableRepeat(this,retryCount).catchError()};var RetryWhenObservable=function(__super__){function createDisposable(state){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,state.isDisposed=!0)}}}function RetryWhenObservable(source,notifier){this.source=source,this._notifier=notifier,__super__.call(this)}return inherits(RetryWhenObservable,__super__),RetryWhenObservable.prototype.subscribeCore=function(o){var lastError,exceptions=new Subject,notifier=new Subject,handled=this._notifier(exceptions),notificationDisposable=handled.subscribe(notifier),e=this.source["@@iterator"](),state={isDisposed:!1},subscription=new SerialDisposable,cancelable=currentThreadScheduler.scheduleRecursive(null,function(_,recurse){if(!state.isDisposed){var currentItem=e.next();if(currentItem.done)return void(lastError?o.onError(lastError):o.onCompleted());var currentValue=currentItem.value;isPromise(currentValue)&&(currentValue=observableFromPromise(currentValue));var outer=new SingleAssignmentDisposable,inner=new SingleAssignmentDisposable;subscription.setDisposable(new BinaryDisposable(inner,outer)),outer.setDisposable(currentValue.subscribe(function(x){o.onNext(x)},function(exn){inner.setDisposable(notifier.subscribe(recurse,function(ex){o.onError(ex)},function(){o.onCompleted()})),exceptions.onNext(exn),outer.dispose()},function(){o.onCompleted()}))}});return new NAryDisposable([notificationDisposable,subscription,cancelable,createDisposable(state)])},RetryWhenObservable}(ObservableBase);observableProto.retryWhen=function(notifier){return new RetryWhenObservable(repeat(this),notifier)};var RepeatWhenObservable=function(__super__){function createDisposable(state){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,state.isDisposed=!0)}}}function RepeatWhenObservable(source,notifier){this.source=source,this._notifier=notifier,__super__.call(this)}return inherits(RepeatWhenObservable,__super__),RepeatWhenObservable.prototype.subscribeCore=function(o){var lastError,completions=new Subject,notifier=new Subject,handled=this._notifier(completions),notificationDisposable=handled.subscribe(notifier),e=this.source["@@iterator"](),state={isDisposed:!1},subscription=new SerialDisposable,cancelable=currentThreadScheduler.scheduleRecursive(null,function(_,recurse){if(!state.isDisposed){var currentItem=e.next();if(currentItem.done)return void(lastError?o.onError(lastError):o.onCompleted());var currentValue=currentItem.value;isPromise(currentValue)&&(currentValue=observableFromPromise(currentValue));var outer=new SingleAssignmentDisposable,inner=new SingleAssignmentDisposable;subscription.setDisposable(new BinaryDisposable(inner,outer)),outer.setDisposable(currentValue.subscribe(function(x){o.onNext(x)},function(exn){o.onError(exn)},function(){inner.setDisposable(notifier.subscribe(recurse,function(ex){o.onError(ex)},function(){o.onCompleted()})),completions.onNext(null),outer.dispose()}))}});return new NAryDisposable([notificationDisposable,subscription,cancelable,createDisposable(state)])},RepeatWhenObservable}(ObservableBase);observableProto.repeatWhen=function(notifier){return new RepeatWhenObservable(repeat(this),notifier)};var ScanObservable=function(__super__){function ScanObservable(source,accumulator,hasSeed,seed){this.source=source,this.accumulator=accumulator,this.hasSeed=hasSeed,this.seed=seed,__super__.call(this)}return inherits(ScanObservable,__super__),ScanObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new ScanObserver(o,this))},ScanObservable}(ObservableBase),ScanObserver=function(__super__){function ScanObserver(o,parent){this._o=o,this._p=parent,this._fn=parent.accumulator,this._hs=parent.hasSeed,this._s=parent.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,__super__.call(this)}return inherits(ScanObserver,__super__),ScanObserver.prototype.next=function(x){return!this._hv&&(this._hv=!0),this._ha?this._a=tryCatch(this._fn)(this._a,x,this._i,this._p):(this._a=this._hs?tryCatch(this._fn)(this._s,x,this._i,this._p):x,this._ha=!0),this._a===errorObj?this._o.onError(this._a.e):(this._o.onNext(this._a),void this._i++)},ScanObserver.prototype.error=function(e){this._o.onError(e)},ScanObserver.prototype.completed=function(){!this._hv&&this._hs&&this._o.onNext(this._s),this._o.onCompleted()},ScanObserver}(AbstractObserver);observableProto.scan=function(){var seed,hasSeed=!1,accumulator=arguments[0];return 2===arguments.length&&(hasSeed=!0,seed=arguments[1]),new ScanObservable(this,accumulator,hasSeed,seed)};var SkipLastObservable=function(__super__){function SkipLastObservable(source,c){this.source=source,this._c=c,__super__.call(this)}return inherits(SkipLastObservable,__super__),SkipLastObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new SkipLastObserver(o,this._c))},SkipLastObservable}(ObservableBase),SkipLastObserver=function(__super__){function SkipLastObserver(o,c){this._o=o,this._c=c,this._q=[],__super__.call(this)}return inherits(SkipLastObserver,__super__),SkipLastObserver.prototype.next=function(x){this._q.push(x),this._q.length>this._c&&this._o.onNext(this._q.shift())},SkipLastObserver.prototype.error=function(e){this._o.onError(e)},SkipLastObserver.prototype.completed=function(){this._o.onCompleted()},SkipLastObserver;
}(AbstractObserver);observableProto.skipLast=function(count){if(count<0)throw new ArgumentOutOfRangeError;return new SkipLastObservable(this,count)},observableProto.startWith=function(){var scheduler,start=0;arguments.length&&isScheduler(arguments[0])?(scheduler=arguments[0],start=1):scheduler=immediateScheduler;for(var args=[],i=start,len=arguments.length;i<len;i++)args.push(arguments[i]);return observableConcat.apply(null,[observableFromArray(args,scheduler),this])};var TakeLastObserver=function(__super__){function TakeLastObserver(o,c){this._o=o,this._c=c,this._q=[],__super__.call(this)}return inherits(TakeLastObserver,__super__),TakeLastObserver.prototype.next=function(x){this._q.push(x),this._q.length>this._c&&this._q.shift()},TakeLastObserver.prototype.error=function(e){this._o.onError(e)},TakeLastObserver.prototype.completed=function(){for(;this._q.length>0;)this._o.onNext(this._q.shift());this._o.onCompleted()},TakeLastObserver}(AbstractObserver);observableProto.takeLast=function(count){if(count<0)throw new ArgumentOutOfRangeError;var source=this;return new AnonymousObservable(function(o){return source.subscribe(new TakeLastObserver(o,count))},source)};var TakeLastBufferObserver=function(__super__){function TakeLastBufferObserver(o,c){this._o=o,this._c=c,this._q=[],__super__.call(this)}return inherits(TakeLastBufferObserver,__super__),TakeLastBufferObserver.prototype.next=function(x){this._q.push(x),this._q.length>this._c&&this._q.shift()},TakeLastBufferObserver.prototype.error=function(e){this._o.onError(e)},TakeLastBufferObserver.prototype.completed=function(){this._o.onNext(this._q),this._o.onCompleted()},TakeLastBufferObserver}(AbstractObserver);observableProto.takeLastBuffer=function(count){if(count<0)throw new ArgumentOutOfRangeError;var source=this;return new AnonymousObservable(function(o){return source.subscribe(new TakeLastBufferObserver(o,count))},source)},observableProto.windowWithCount=observableProto.windowCount=function(count,skip){var source=this;if(+count||(count=0),Math.abs(count)===1/0&&(count=0),count<=0)throw new ArgumentOutOfRangeError;if(null==skip&&(skip=count),+skip||(skip=0),Math.abs(skip)===1/0&&(skip=0),skip<=0)throw new ArgumentOutOfRangeError;return new AnonymousObservable(function(observer){function createWindow(){var s=new Subject;q.push(s),observer.onNext(addRef(s,refCountDisposable))}var m=new SingleAssignmentDisposable,refCountDisposable=new RefCountDisposable(m),n=0,q=[];return createWindow(),m.setDisposable(source.subscribe(function(x){for(var i=0,len=q.length;i<len;i++)q[i].onNext(x);var c=n-count+1;c>=0&&c%skip===0&&q.shift().onCompleted(),++n%skip===0&&createWindow()},function(e){for(;q.length>0;)q.shift().onError(e);observer.onError(e)},function(){for(;q.length>0;)q.shift().onCompleted();observer.onCompleted()})),refCountDisposable},source)},observableProto.selectConcat=observableProto.concatMap=function(selector,resultSelector,thisArg){return isFunction(selector)&&isFunction(resultSelector)?this.concatMap(function(x,i){var selectorResult=selector(x,i);return isPromise(selectorResult)&&(selectorResult=observableFromPromise(selectorResult)),(isArrayLike(selectorResult)||isIterable(selectorResult))&&(selectorResult=observableFrom(selectorResult)),selectorResult.map(function(y,i2){return resultSelector(x,y,i,i2)})}):isFunction(selector)?concatMap(this,selector,thisArg):concatMap(this,function(){return selector})},observableProto.concatMapObserver=observableProto.selectConcatObserver=function(onNext,onError,onCompleted,thisArg){var source=this,onNextFunc=bindCallback(onNext,thisArg,2),onErrorFunc=bindCallback(onError,thisArg,1),onCompletedFunc=bindCallback(onCompleted,thisArg,0);return new AnonymousObservable(function(observer){var index=0;return source.subscribe(function(x){var result;try{result=onNextFunc(x,index++)}catch(e){return void observer.onError(e)}isPromise(result)&&(result=observableFromPromise(result)),observer.onNext(result)},function(err){var result;try{result=onErrorFunc(err)}catch(e){return void observer.onError(e)}isPromise(result)&&(result=observableFromPromise(result)),observer.onNext(result),observer.onCompleted()},function(){var result;try{result=onCompletedFunc()}catch(e){return void observer.onError(e)}isPromise(result)&&(result=observableFromPromise(result)),observer.onNext(result),observer.onCompleted()})},this).concatAll()};var DefaultIfEmptyObserver=function(__super__){function DefaultIfEmptyObserver(o,d){this._o=o,this._d=d,this._f=!1,__super__.call(this)}return inherits(DefaultIfEmptyObserver,__super__),DefaultIfEmptyObserver.prototype.next=function(x){this._f=!0,this._o.onNext(x)},DefaultIfEmptyObserver.prototype.error=function(e){this._o.onError(e)},DefaultIfEmptyObserver.prototype.completed=function(){!this._f&&this._o.onNext(this._d),this._o.onCompleted()},DefaultIfEmptyObserver}(AbstractObserver);observableProto.defaultIfEmpty=function(defaultValue){var source=this;return defaultValue===undefined&&(defaultValue=null),new AnonymousObservable(function(o){return source.subscribe(new DefaultIfEmptyObserver(o,defaultValue))},source)},HashSet.prototype.push=function(value){var retValue=arrayIndexOfComparer(this.set,value,this.comparer)===-1;return retValue&&this.set.push(value),retValue};var DistinctObservable=function(__super__){function DistinctObservable(source,keyFn,cmpFn){this.source=source,this._keyFn=keyFn,this._cmpFn=cmpFn,__super__.call(this)}return inherits(DistinctObservable,__super__),DistinctObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new DistinctObserver(o,this._keyFn,this._cmpFn))},DistinctObservable}(ObservableBase),DistinctObserver=function(__super__){function DistinctObserver(o,keyFn,cmpFn){this._o=o,this._keyFn=keyFn,this._h=new HashSet(cmpFn),__super__.call(this)}return inherits(DistinctObserver,__super__),DistinctObserver.prototype.next=function(x){var key=x;return isFunction(this._keyFn)&&(key=tryCatch(this._keyFn)(x),key===errorObj)?this._o.onError(key.e):void(this._h.push(key)&&this._o.onNext(x))},DistinctObserver.prototype.error=function(e){this._o.onError(e)},DistinctObserver.prototype.completed=function(){this._o.onCompleted()},DistinctObserver}(AbstractObserver);observableProto.distinct=function(keySelector,comparer){return comparer||(comparer=defaultComparer),new DistinctObservable(this,keySelector,comparer)},observableProto.groupBy=function(keySelector,elementSelector){return this.groupByUntil(keySelector,elementSelector,observableNever)},observableProto.groupByUntil=function(keySelector,elementSelector,durationSelector){var source=this;return new AnonymousObservable(function(o){var map=new Map,groupDisposable=new CompositeDisposable,refCountDisposable=new RefCountDisposable(groupDisposable),handleError=function(e){return function(item){item.onError(e)}};return groupDisposable.add(source.subscribe(function(x){var key=tryCatch(keySelector)(x);if(key===errorObj)return map.forEach(handleError(key.e)),o.onError(key.e);var fireNewMapEntry=!1,writer=map.get(key);if(writer===undefined&&(writer=new Subject,map.set(key,writer),fireNewMapEntry=!0),fireNewMapEntry){var group=new GroupedObservable(key,writer,refCountDisposable),durationGroup=new GroupedObservable(key,writer),duration=tryCatch(durationSelector)(durationGroup);if(duration===errorObj)return map.forEach(handleError(duration.e)),o.onError(duration.e);o.onNext(group);var md=new SingleAssignmentDisposable;groupDisposable.add(md),md.setDisposable(duration.take(1).subscribe(noop,function(e){map.forEach(handleError(e)),o.onError(e)},function(){map.delete(key)&&writer.onCompleted(),groupDisposable.remove(md)}))}var element=x;return isFunction(elementSelector)&&(element=tryCatch(elementSelector)(x),element===errorObj)?(map.forEach(handleError(element.e)),o.onError(element.e)):void writer.onNext(element)},function(e){map.forEach(handleError(e)),o.onError(e)},function(){map.forEach(function(item){item.onCompleted()}),o.onCompleted()})),refCountDisposable},source)};var MapObservable=function(__super__){function MapObservable(source,selector,thisArg){this.source=source,this.selector=bindCallback(selector,thisArg,3),__super__.call(this)}function innerMap(selector,self){return function(x,i,o){return selector.call(this,self.selector(x,i,o),i,o)}}function InnerObserver(o,selector,source){this.o=o,this.selector=selector,this.source=source,this.i=0,AbstractObserver.call(this)}return inherits(MapObservable,__super__),MapObservable.prototype.internalMap=function(selector,thisArg){return new MapObservable(this.source,innerMap(selector,this),thisArg)},MapObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new InnerObserver(o,this.selector,this))},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype.next=function(x){var result=tryCatch(this.selector)(x,this.i++,this.source);return result===errorObj?this.o.onError(result.e):void this.o.onNext(result)},InnerObserver.prototype.error=function(e){this.o.onError(e)},InnerObserver.prototype.completed=function(){this.o.onCompleted()},MapObservable}(ObservableBase);observableProto.map=observableProto.select=function(selector,thisArg){var selectorFn="function"==typeof selector?selector:function(){return selector};return this instanceof MapObservable?this.internalMap(selectorFn,thisArg):new MapObservable(this,selectorFn,thisArg)},observableProto.pluck=function(){var len=arguments.length,args=new Array(len);if(0===len)throw new Error("List of properties cannot be empty.");for(var i=0;i<len;i++)args[i]=arguments[i];return this.map(plucker(args,len))},observableProto.flatMap=observableProto.selectMany=observableProto.mergeMap=function(selector,resultSelector,thisArg){return new FlatMapObservable(this,selector,resultSelector,thisArg).mergeAll()},observableProto.flatMapObserver=observableProto.selectManyObserver=function(onNext,onError,onCompleted,thisArg){var source=this;return new AnonymousObservable(function(observer){var index=0;return source.subscribe(function(x){var result;try{result=onNext.call(thisArg,x,index++)}catch(e){return void observer.onError(e)}isPromise(result)&&(result=observableFromPromise(result)),observer.onNext(result)},function(err){var result;try{result=onError.call(thisArg,err)}catch(e){return void observer.onError(e)}isPromise(result)&&(result=observableFromPromise(result)),observer.onNext(result),observer.onCompleted()},function(){var result;try{result=onCompleted.call(thisArg)}catch(e){return void observer.onError(e)}isPromise(result)&&(result=observableFromPromise(result)),observer.onNext(result),observer.onCompleted()})},source).mergeAll()},observableProto.flatMapLatest=observableProto.switchMap=function(selector,resultSelector,thisArg){return new FlatMapObservable(this,selector,resultSelector,thisArg).switchLatest()};var SkipObservable=function(__super__){function SkipObservable(source,count){this.source=source,this._count=count,__super__.call(this)}function SkipObserver(o,c){this._o=o,this._r=c,AbstractObserver.call(this)}return inherits(SkipObservable,__super__),SkipObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new SkipObserver(o,this._count))},inherits(SkipObserver,AbstractObserver),SkipObserver.prototype.next=function(x){this._r<=0?this._o.onNext(x):this._r--},SkipObserver.prototype.error=function(e){this._o.onError(e)},SkipObserver.prototype.completed=function(){this._o.onCompleted()},SkipObservable}(ObservableBase);observableProto.skip=function(count){if(count<0)throw new ArgumentOutOfRangeError;return new SkipObservable(this,count)};var SkipWhileObservable=function(__super__){function SkipWhileObservable(source,fn){this.source=source,this._fn=fn,__super__.call(this)}return inherits(SkipWhileObservable,__super__),SkipWhileObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new SkipWhileObserver(o,this))},SkipWhileObservable}(ObservableBase),SkipWhileObserver=function(__super__){function SkipWhileObserver(o,p){this._o=o,this._p=p,this._i=0,this._r=!1,__super__.call(this)}return inherits(SkipWhileObserver,__super__),SkipWhileObserver.prototype.next=function(x){if(!this._r){var res=tryCatch(this._p._fn)(x,this._i++,this._p);if(res===errorObj)return this._o.onError(res.e);this._r=!res}this._r&&this._o.onNext(x)},SkipWhileObserver.prototype.error=function(e){this._o.onError(e)},SkipWhileObserver.prototype.completed=function(){this._o.onCompleted()},SkipWhileObserver}(AbstractObserver);observableProto.skipWhile=function(predicate,thisArg){var fn=bindCallback(predicate,thisArg,3);return new SkipWhileObservable(this,fn)};var TakeObservable=function(__super__){function TakeObservable(source,count){this.source=source,this._count=count,__super__.call(this)}function TakeObserver(o,c){this._o=o,this._c=c,this._r=c,AbstractObserver.call(this)}return inherits(TakeObservable,__super__),TakeObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new TakeObserver(o,this._count))},inherits(TakeObserver,AbstractObserver),TakeObserver.prototype.next=function(x){this._r-- >0&&(this._o.onNext(x),this._r<=0&&this._o.onCompleted())},TakeObserver.prototype.error=function(e){this._o.onError(e)},TakeObserver.prototype.completed=function(){this._o.onCompleted()},TakeObservable}(ObservableBase);observableProto.take=function(count,scheduler){if(count<0)throw new ArgumentOutOfRangeError;return 0===count?observableEmpty(scheduler):new TakeObservable(this,count)};var TakeWhileObservable=function(__super__){function TakeWhileObservable(source,fn){this.source=source,this._fn=fn,__super__.call(this)}return inherits(TakeWhileObservable,__super__),TakeWhileObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new TakeWhileObserver(o,this))},TakeWhileObservable}(ObservableBase),TakeWhileObserver=function(__super__){function TakeWhileObserver(o,p){this._o=o,this._p=p,this._i=0,this._r=!0,__super__.call(this)}return inherits(TakeWhileObserver,__super__),TakeWhileObserver.prototype.next=function(x){return this._r&&(this._r=tryCatch(this._p._fn)(x,this._i++,this._p),this._r===errorObj)?this._o.onError(this._r.e):void(this._r?this._o.onNext(x):this._o.onCompleted())},TakeWhileObserver.prototype.error=function(e){this._o.onError(e)},TakeWhileObserver.prototype.completed=function(){this._o.onCompleted()},TakeWhileObserver}(AbstractObserver);observableProto.takeWhile=function(predicate,thisArg){var fn=bindCallback(predicate,thisArg,3);return new TakeWhileObservable(this,fn)};var FilterObservable=function(__super__){function FilterObservable(source,predicate,thisArg){this.source=source,this.predicate=bindCallback(predicate,thisArg,3),__super__.call(this)}function innerPredicate(predicate,self){return function(x,i,o){return self.predicate(x,i,o)&&predicate.call(this,x,i,o)}}function InnerObserver(o,predicate,source){this.o=o,this.predicate=predicate,this.source=source,this.i=0,AbstractObserver.call(this)}return inherits(FilterObservable,__super__),FilterObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new InnerObserver(o,this.predicate,this))},FilterObservable.prototype.internalFilter=function(predicate,thisArg){return new FilterObservable(this.source,innerPredicate(predicate,this),thisArg)},inherits(InnerObserver,AbstractObserver),InnerObserver.prototype.next=function(x){var shouldYield=tryCatch(this.predicate)(x,this.i++,this.source);return shouldYield===errorObj?this.o.onError(shouldYield.e):void(shouldYield&&this.o.onNext(x))},InnerObserver.prototype.error=function(e){this.o.onError(e)},InnerObserver.prototype.completed=function(){this.o.onCompleted()},FilterObservable}(ObservableBase);observableProto.filter=observableProto.where=function(predicate,thisArg){return this instanceof FilterObservable?this.internalFilter(predicate,thisArg):new FilterObservable(this,predicate,thisArg)};var ExtremaByObservable=function(__super__){function ExtremaByObservable(source,k,c){this.source=source,this._k=k,this._c=c,__super__.call(this)}return inherits(ExtremaByObservable,__super__),ExtremaByObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new ExtremaByObserver(o,this._k,this._c))},ExtremaByObservable}(ObservableBase),ExtremaByObserver=function(__super__){function ExtremaByObserver(o,k,c){this._o=o,this._k=k,this._c=c,this._v=null,this._hv=!1,this._l=[],__super__.call(this)}return inherits(ExtremaByObserver,__super__),ExtremaByObserver.prototype.next=function(x){var key=tryCatch(this._k)(x);if(key===errorObj)return this._o.onError(key.e);var comparison=0;if(this._hv){if(comparison=tryCatch(this._c)(key,this._v),comparison===errorObj)return this._o.onError(comparison.e)}else this._hv=!0,this._v=key;comparison>0&&(this._v=key,this._l=[]),comparison>=0&&this._l.push(x)},ExtremaByObserver.prototype.error=function(e){this._o.onError(e)},ExtremaByObserver.prototype.completed=function(){this._o.onNext(this._l),this._o.onCompleted()},ExtremaByObserver}(AbstractObserver),ReduceObservable=function(__super__){function ReduceObservable(source,accumulator,hasSeed,seed){this.source=source,this.accumulator=accumulator,this.hasSeed=hasSeed,this.seed=seed,__super__.call(this)}return inherits(ReduceObservable,__super__),ReduceObservable.prototype.subscribeCore=function(observer){return this.source.subscribe(new ReduceObserver(observer,this))},ReduceObservable}(ObservableBase),ReduceObserver=function(__super__){function ReduceObserver(o,parent){this._o=o,this._p=parent,this._fn=parent.accumulator,this._hs=parent.hasSeed,this._s=parent.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,__super__.call(this)}return inherits(ReduceObserver,__super__),ReduceObserver.prototype.next=function(x){return!this._hv&&(this._hv=!0),this._ha?this._a=tryCatch(this._fn)(this._a,x,this._i,this._p):(this._a=this._hs?tryCatch(this._fn)(this._s,x,this._i,this._p):x,this._ha=!0),this._a===errorObj?this._o.onError(this._a.e):void this._i++},ReduceObserver.prototype.error=function(e){this._o.onError(e)},ReduceObserver.prototype.completed=function(){this._hv&&this._o.onNext(this._a),!this._hv&&this._hs&&this._o.onNext(this._s),!this._hv&&!this._hs&&this._o.onError(new EmptyError),this._o.onCompleted()},ReduceObserver}(AbstractObserver);observableProto.reduce=function(){var seed,hasSeed=!1,accumulator=arguments[0];return 2===arguments.length&&(hasSeed=!0,seed=arguments[1]),new ReduceObservable(this,accumulator,hasSeed,seed)};var SomeObservable=function(__super__){function SomeObservable(source,fn){this.source=source,this._fn=fn,__super__.call(this)}return inherits(SomeObservable,__super__),SomeObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new SomeObserver(o,this._fn,this.source))},SomeObservable}(ObservableBase),SomeObserver=function(__super__){function SomeObserver(o,fn,s){this._o=o,this._fn=fn,this._s=s,this._i=0,__super__.call(this)}return inherits(SomeObserver,__super__),SomeObserver.prototype.next=function(x){var result=tryCatch(this._fn)(x,this._i++,this._s);return result===errorObj?this._o.onError(result.e):void(Boolean(result)&&(this._o.onNext(!0),this._o.onCompleted()))},SomeObserver.prototype.error=function(e){this._o.onError(e)},SomeObserver.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},SomeObserver}(AbstractObserver);observableProto.some=function(predicate,thisArg){var fn=bindCallback(predicate,thisArg,3);return new SomeObservable(this,fn)};var IsEmptyObservable=function(__super__){function IsEmptyObservable(source){this.source=source,__super__.call(this)}return inherits(IsEmptyObservable,__super__),IsEmptyObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new IsEmptyObserver(o))},IsEmptyObservable}(ObservableBase),IsEmptyObserver=function(__super__){function IsEmptyObserver(o){this._o=o,__super__.call(this)}return inherits(IsEmptyObserver,__super__),IsEmptyObserver.prototype.next=function(){this._o.onNext(!1),this._o.onCompleted()},IsEmptyObserver.prototype.error=function(e){this._o.onError(e)},IsEmptyObserver.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},IsEmptyObserver}(AbstractObserver);observableProto.isEmpty=function(){return new IsEmptyObservable(this)};var EveryObservable=function(__super__){function EveryObservable(source,fn){this.source=source,this._fn=fn,__super__.call(this)}return inherits(EveryObservable,__super__),EveryObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new EveryObserver(o,this._fn,this.source))},EveryObservable}(ObservableBase),EveryObserver=function(__super__){function EveryObserver(o,fn,s){this._o=o,this._fn=fn,this._s=s,this._i=0,__super__.call(this)}return inherits(EveryObserver,__super__),EveryObserver.prototype.next=function(x){var result=tryCatch(this._fn)(x,this._i++,this._s);return result===errorObj?this._o.onError(result.e):void(Boolean(result)||(this._o.onNext(!1),this._o.onCompleted()))},EveryObserver.prototype.error=function(e){this._o.onError(e)},EveryObserver.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},EveryObserver}(AbstractObserver);observableProto.every=function(predicate,thisArg){var fn=bindCallback(predicate,thisArg,3);return new EveryObservable(this,fn)};var IncludesObservable=function(__super__){function IncludesObservable(source,elem,idx){var n=+idx||0;Math.abs(n)===1/0&&(n=0),this.source=source,this._elem=elem,this._n=n,__super__.call(this)}return inherits(IncludesObservable,__super__),IncludesObservable.prototype.subscribeCore=function(o){return this._n<0?(o.onNext(!1),o.onCompleted(),disposableEmpty):this.source.subscribe(new IncludesObserver(o,this._elem,this._n))},IncludesObservable}(ObservableBase),IncludesObserver=function(__super__){function IncludesObserver(o,elem,n){this._o=o,this._elem=elem,this._n=n,this._i=0,__super__.call(this)}function comparer(a,b){return 0===a&&0===b||a===b||isNaN(a)&&isNaN(b)}return inherits(IncludesObserver,__super__),IncludesObserver.prototype.next=function(x){this._i++>=this._n&&comparer(x,this._elem)&&(this._o.onNext(!0),this._o.onCompleted())},IncludesObserver.prototype.error=function(e){this._o.onError(e)},IncludesObserver.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},IncludesObserver}(AbstractObserver);observableProto.includes=function(searchElement,fromIndex){return new IncludesObservable(this,searchElement,fromIndex)};var CountObservable=function(__super__){function CountObservable(source,fn){this.source=source,this._fn=fn,__super__.call(this)}return inherits(CountObservable,__super__),CountObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new CountObserver(o,this._fn,this.source))},CountObservable}(ObservableBase),CountObserver=function(__super__){function CountObserver(o,fn,s){this._o=o,this._fn=fn,this._s=s,this._i=0,this._c=0,__super__.call(this)}return inherits(CountObserver,__super__),CountObserver.prototype.next=function(x){if(this._fn){var result=tryCatch(this._fn)(x,this._i++,this._s);if(result===errorObj)return this._o.onError(result.e);Boolean(result)&&this._c++}else this._c++},CountObserver.prototype.error=function(e){this._o.onError(e)},CountObserver.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},CountObserver}(AbstractObserver);observableProto.count=function(predicate,thisArg){var fn=bindCallback(predicate,thisArg,3);return new CountObservable(this,fn)};var IndexOfObservable=function(__super__){function IndexOfObservable(source,e,n){this.source=source,this._e=e,this._n=n,__super__.call(this)}return inherits(IndexOfObservable,__super__),IndexOfObservable.prototype.subscribeCore=function(o){return this._n<0?(o.onNext(-1),o.onCompleted(),disposableEmpty):this.source.subscribe(new IndexOfObserver(o,this._e,this._n))},IndexOfObservable}(ObservableBase),IndexOfObserver=function(__super__){function IndexOfObserver(o,e,n){this._o=o,this._e=e,this._n=n,this._i=0,__super__.call(this)}return inherits(IndexOfObserver,__super__),IndexOfObserver.prototype.next=function(x){this._i>=this._n&&x===this._e&&(this._o.onNext(this._i),this._o.onCompleted()),this._i++},IndexOfObserver.prototype.error=function(e){this._o.onError(e)},IndexOfObserver.prototype.completed=function(){this._o.onNext(-1),this._o.onCompleted()},IndexOfObserver}(AbstractObserver);observableProto.indexOf=function(searchElement,fromIndex){var n=+fromIndex||0;return Math.abs(n)===1/0&&(n=0),new IndexOfObservable(this,searchElement,n)};var SumObservable=function(__super__){function SumObservable(source,fn){this.source=source,this._fn=fn,__super__.call(this)}return inherits(SumObservable,__super__),SumObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new SumObserver(o,this._fn,this.source))},SumObservable}(ObservableBase),SumObserver=function(__super__){function SumObserver(o,fn,s){this._o=o,this._fn=fn,this._s=s,this._i=0,this._c=0,__super__.call(this)}return inherits(SumObserver,__super__),SumObserver.prototype.next=function(x){if(this._fn){var result=tryCatch(this._fn)(x,this._i++,this._s);if(result===errorObj)return this._o.onError(result.e);this._c+=result}else this._c+=x},SumObserver.prototype.error=function(e){this._o.onError(e)},SumObserver.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},SumObserver}(AbstractObserver);observableProto.sum=function(keySelector,thisArg){var fn=bindCallback(keySelector,thisArg,3);return new SumObservable(this,fn)},observableProto.minBy=function(keySelector,comparer){return comparer||(comparer=defaultSubComparer),new ExtremaByObservable(this,keySelector,function(x,y){return comparer(x,y)*-1})},observableProto.min=function(comparer){return this.minBy(identity,comparer).map(firstOnly)},observableProto.maxBy=function(keySelector,comparer){return comparer||(comparer=defaultSubComparer),new ExtremaByObservable(this,keySelector,comparer)},observableProto.max=function(comparer){return this.maxBy(identity,comparer).map(firstOnly)};var AverageObservable=function(__super__){function AverageObservable(source,fn){this.source=source,this._fn=fn,__super__.call(this)}return inherits(AverageObservable,__super__),AverageObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new AverageObserver(o,this._fn,this.source))},AverageObservable}(ObservableBase),AverageObserver=function(__super__){function AverageObserver(o,fn,s){this._o=o,this._fn=fn,this._s=s,this._c=0,this._t=0,__super__.call(this)}return inherits(AverageObserver,__super__),AverageObserver.prototype.next=function(x){if(this._fn){var r=tryCatch(this._fn)(x,this._c++,this._s);if(r===errorObj)return this._o.onError(r.e);this._t+=r}else this._c++,this._t+=x},AverageObserver.prototype.error=function(e){this._o.onError(e)},AverageObserver.prototype.completed=function(){return 0===this._c?this._o.onError(new EmptyError):(this._o.onNext(this._t/this._c),void this._o.onCompleted())},AverageObserver}(AbstractObserver);observableProto.average=function(keySelector,thisArg){var fn,source=this;return isFunction(keySelector)&&(fn=bindCallback(keySelector,thisArg,3)),new AverageObservable(source,fn)},observableProto.sequenceEqual=function(second,comparer){var first=this;return comparer||(comparer=defaultComparer),new AnonymousObservable(function(o){var donel=!1,doner=!1,ql=[],qr=[],subscription1=first.subscribe(function(x){if(qr.length>0){var v=qr.shift(),equal=tryCatch(comparer)(v,x);if(equal===errorObj)return o.onError(equal.e);equal||(o.onNext(!1),o.onCompleted())}else doner?(o.onNext(!1),o.onCompleted()):ql.push(x)},function(e){o.onError(e)},function(){donel=!0,0===ql.length&&(qr.length>0?(o.onNext(!1),o.onCompleted()):doner&&(o.onNext(!0),o.onCompleted()))});(isArrayLike(second)||isIterable(second))&&(second=observableFrom(second)),isPromise(second)&&(second=observableFromPromise(second));var subscription2=second.subscribe(function(x){if(ql.length>0){var v=ql.shift(),equal=tryCatch(comparer)(v,x);if(equal===errorObj)return o.onError(equal.e);equal||(o.onNext(!1),o.onCompleted())}else donel?(o.onNext(!1),o.onCompleted()):qr.push(x)},function(e){o.onError(e)},function(){doner=!0,0===qr.length&&(ql.length>0?(o.onNext(!1),o.onCompleted()):donel&&(o.onNext(!0),o.onCompleted()))});return new BinaryDisposable(subscription1,subscription2)},first)};var ElementAtObservable=function(__super__){function ElementAtObservable(source,i,d){this.source=source,this._i=i,this._d=d,__super__.call(this)}return inherits(ElementAtObservable,__super__),ElementAtObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new ElementAtObserver(o,this._i,this._d))},ElementAtObservable}(ObservableBase),ElementAtObserver=function(__super__){function ElementAtObserver(o,i,d){this._o=o,this._i=i,this._d=d,__super__.call(this)}return inherits(ElementAtObserver,__super__),ElementAtObserver.prototype.next=function(x){0===this._i--&&(this._o.onNext(x),this._o.onCompleted())},ElementAtObserver.prototype.error=function(e){this._o.onError(e)},ElementAtObserver.prototype.completed=function(){this._d===undefined?this._o.onError(new ArgumentOutOfRangeError):(this._o.onNext(this._d),this._o.onCompleted())},ElementAtObserver}(AbstractObserver);observableProto.elementAt=function(index,defaultValue){if(index<0)throw new ArgumentOutOfRangeError;return new ElementAtObservable(this,index,defaultValue)};var SingleObserver=function(__super__){function SingleObserver(o,obj,s){this._o=o,this._obj=obj,this._s=s,this._i=0,this._hv=!1,this._v=null,__super__.call(this)}return inherits(SingleObserver,__super__),SingleObserver.prototype.next=function(x){var shouldYield=!1;if(this._obj.predicate){var res=tryCatch(this._obj.predicate)(x,this._i++,this._s);if(res===errorObj)return this._o.onError(res.e);Boolean(res)&&(shouldYield=!0)}else this._obj.predicate||(shouldYield=!0);if(shouldYield){if(this._hv)return this._o.onError(new Error("Sequence contains more than one matching element"));this._hv=!0,this._v=x}},SingleObserver.prototype.error=function(e){this._o.onError(e)},SingleObserver.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===undefined?this._o.onError(new EmptyError):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},SingleObserver}(AbstractObserver);observableProto.single=function(predicate,thisArg){var obj={},source=this;if(obj="object"===(0,_typeof3.default)(arguments[0])?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},isFunction(obj.predicate)){var fn=obj.predicate;obj.predicate=bindCallback(fn,obj.thisArg,3)}return new AnonymousObservable(function(o){return source.subscribe(new SingleObserver(o,obj,source))},source)};var FirstObservable=function(__super__){function FirstObservable(source,obj){this.source=source,this._obj=obj,__super__.call(this)}return inherits(FirstObservable,__super__),FirstObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new FirstObserver(o,this._obj,this.source))},FirstObservable}(ObservableBase),FirstObserver=function(__super__){function FirstObserver(o,obj,s){this._o=o,this._obj=obj,this._s=s,this._i=0,__super__.call(this)}return inherits(FirstObserver,__super__),FirstObserver.prototype.next=function(x){if(this._obj.predicate){var res=tryCatch(this._obj.predicate)(x,this._i++,this._s);if(res===errorObj)return this._o.onError(res.e);Boolean(res)&&(this._o.onNext(x),this._o.onCompleted())}else this._obj.predicate||(this._o.onNext(x),this._o.onCompleted())},FirstObserver.prototype.error=function(e){this._o.onError(e)},FirstObserver.prototype.completed=function(){this._obj.defaultValue===undefined?this._o.onError(new EmptyError):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},FirstObserver}(AbstractObserver);observableProto.first=function(){var obj={};if(obj="object"===(0,_typeof3.default)(arguments[0])?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},isFunction(obj.predicate)){var fn=obj.predicate;obj.predicate=bindCallback(fn,obj.thisArg,3);
}return new FirstObservable(this,obj)};var LastObservable=function(__super__){function LastObservable(source,obj){this.source=source,this._obj=obj,__super__.call(this)}return inherits(LastObservable,__super__),LastObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new LastObserver(o,this._obj,this.source))},LastObservable}(ObservableBase),LastObserver=function(__super__){function LastObserver(o,obj,s){this._o=o,this._obj=obj,this._s=s,this._i=0,this._hv=!1,this._v=null,__super__.call(this)}return inherits(LastObserver,__super__),LastObserver.prototype.next=function(x){var shouldYield=!1;if(this._obj.predicate){var res=tryCatch(this._obj.predicate)(x,this._i++,this._s);if(res===errorObj)return this._o.onError(res.e);Boolean(res)&&(shouldYield=!0)}else this._obj.predicate||(shouldYield=!0);shouldYield&&(this._hv=!0,this._v=x)},LastObserver.prototype.error=function(e){this._o.onError(e)},LastObserver.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===undefined?this._o.onError(new EmptyError):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},LastObserver}(AbstractObserver);observableProto.last=function(){var obj={};if(obj="object"===(0,_typeof3.default)(arguments[0])?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},isFunction(obj.predicate)){var fn=obj.predicate;obj.predicate=bindCallback(fn,obj.thisArg,3)}return new LastObservable(this,obj)};var FindValueObserver=function(__super__){function FindValueObserver(observer,source,callback,yieldIndex){this._o=observer,this._s=source,this._cb=callback,this._y=yieldIndex,this._i=0,__super__.call(this)}return inherits(FindValueObserver,__super__),FindValueObserver.prototype.next=function(x){var shouldRun=tryCatch(this._cb)(x,this._i,this._s);return shouldRun===errorObj?this._o.onError(shouldRun.e):void(shouldRun?(this._o.onNext(this._y?this._i:x),this._o.onCompleted()):this._i++)},FindValueObserver.prototype.error=function(e){this._o.onError(e)},FindValueObserver.prototype.completed=function(){this._y&&this._o.onNext(-1),this._o.onCompleted()},FindValueObserver}(AbstractObserver);observableProto.find=function(predicate,thisArg){return findValue(this,predicate,thisArg,!1)},observableProto.findIndex=function(predicate,thisArg){return findValue(this,predicate,thisArg,!0)};var ToSetObservable=function(__super__){function ToSetObservable(source){this.source=source,__super__.call(this)}return inherits(ToSetObservable,__super__),ToSetObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new ToSetObserver(o))},ToSetObservable}(ObservableBase),ToSetObserver=function(__super__){function ToSetObserver(o){this._o=o,this._s=new root.Set,__super__.call(this)}return inherits(ToSetObserver,__super__),ToSetObserver.prototype.next=function(x){this._s.add(x)},ToSetObserver.prototype.error=function(e){this._o.onError(e)},ToSetObserver.prototype.completed=function(){this._o.onNext(this._s),this._o.onCompleted()},ToSetObserver}(AbstractObserver);observableProto.toSet=function(){if("undefined"==typeof root.Set)throw new TypeError;return new ToSetObservable(this)};var ToMapObservable=function(__super__){function ToMapObservable(source,k,e){this.source=source,this._k=k,this._e=e,__super__.call(this)}return inherits(ToMapObservable,__super__),ToMapObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new ToMapObserver(o,this._k,this._e))},ToMapObservable}(ObservableBase),ToMapObserver=function(__super__){function ToMapObserver(o,k,e){this._o=o,this._k=k,this._e=e,this._m=new root.Map,__super__.call(this)}return inherits(ToMapObserver,__super__),ToMapObserver.prototype.next=function(x){var key=tryCatch(this._k)(x);if(key===errorObj)return this._o.onError(key.e);var elem=x;return this._e&&(elem=tryCatch(this._e)(x),elem===errorObj)?this._o.onError(elem.e):void this._m.set(key,elem)},ToMapObserver.prototype.error=function(e){this._o.onError(e)},ToMapObserver.prototype.completed=function(){this._o.onNext(this._m),this._o.onCompleted()},ToMapObserver}(AbstractObserver);observableProto.toMap=function(keySelector,elementSelector){if("undefined"==typeof root.Map)throw new TypeError;return new ToMapObservable(this,keySelector,elementSelector)};var SliceObservable=function(__super__){function SliceObservable(source,b,e){this.source=source,this._b=b,this._e=e,__super__.call(this)}return inherits(SliceObservable,__super__),SliceObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new SliceObserver(o,this._b,this._e))},SliceObservable}(ObservableBase),SliceObserver=function(__super__){function SliceObserver(o,b,e){this._o=o,this._b=b,this._e=e,this._i=0,__super__.call(this)}return inherits(SliceObserver,__super__),SliceObserver.prototype.next=function(x){this._i>=this._b&&(this._e===this._i?this._o.onCompleted():this._o.onNext(x)),this._i++},SliceObserver.prototype.error=function(e){this._o.onError(e)},SliceObserver.prototype.completed=function(){this._o.onCompleted()},SliceObserver}(AbstractObserver);observableProto.slice=function(begin,end){var start=begin||0;if(start<0)throw new Rx.ArgumentOutOfRangeError;if("number"==typeof end&&end<start)throw new Rx.ArgumentOutOfRangeError;return new SliceObservable(this,start,end)};var LastIndexOfObservable=function(__super__){function LastIndexOfObservable(source,e,n){this.source=source,this._e=e,this._n=n,__super__.call(this)}return inherits(LastIndexOfObservable,__super__),LastIndexOfObservable.prototype.subscribeCore=function(o){return this._n<0?(o.onNext(-1),o.onCompleted(),disposableEmpty):this.source.subscribe(new LastIndexOfObserver(o,this._e,this._n))},LastIndexOfObservable}(ObservableBase),LastIndexOfObserver=function(__super__){function LastIndexOfObserver(o,e,n){this._o=o,this._e=e,this._n=n,this._v=0,this._hv=!1,this._i=0,__super__.call(this)}return inherits(LastIndexOfObserver,__super__),LastIndexOfObserver.prototype.next=function(x){this._i>=this._n&&x===this._e&&(this._hv=!0,this._v=this._i),this._i++},LastIndexOfObserver.prototype.error=function(e){this._o.onError(e)},LastIndexOfObserver.prototype.completed=function(){this._hv?this._o.onNext(this._v):this._o.onNext(-1),this._o.onCompleted()},LastIndexOfObserver}(AbstractObserver);observableProto.lastIndexOf=function(searchElement,fromIndex){var n=+fromIndex||0;return Math.abs(n)===1/0&&(n=0),new LastIndexOfObservable(this,searchElement,n)},Observable.wrap=function(fn){function createObservable(){return Observable.spawn.call(this,fn.apply(this,arguments))}return createObservable.__generatorFunction__=fn,createObservable};var spawn=Observable.spawn=function(){for(var gen=arguments[0],self=this,args=[],i=1,len=arguments.length;i<len;i++)args.push(arguments[i]);return new AnonymousObservable(function(o){function processGenerator(res){var ret=tryCatch(gen.next).call(gen,res);return ret===errorObj?o.onError(ret.e):void next(ret)}function onError(err){var ret=tryCatch(gen.next).call(gen,err);return ret===errorObj?o.onError(ret.e):void next(ret)}function next(ret){if(ret.done)return o.onNext(ret.value),void o.onCompleted();var obs=toObservable.call(self,ret.value),value=null,hasValue=!1;Observable.isObservable(obs)?g.add(obs.subscribe(function(val){hasValue=!0,value=val},onError,function(){hasValue&&processGenerator(value)})):onError(new TypeError("type not supported"))}var g=new CompositeDisposable;return isFunction(gen)&&(gen=gen.apply(self,args)),gen&&isFunction(gen.next)?(processGenerator(),g):(o.onNext(gen),o.onCompleted())})};Observable.start=function(func,context,scheduler){return observableToAsync(func,context,scheduler)()};var observableToAsync=Observable.toAsync=function(func,context,scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),function(){var args=arguments,subject=new AsyncSubject;return scheduler.schedule(null,function(){var result;try{result=func.apply(context,args)}catch(e){return void subject.onError(e)}subject.onNext(result),subject.onCompleted()}),subject.asObservable()}};Observable.fromCallback=function(fn,ctx,selector){return function(){"undefined"==typeof ctx&&(ctx=this);for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];return createCbObservable(fn,ctx,selector,args)}},Observable.fromNodeCallback=function(fn,ctx,selector){return function(){"undefined"==typeof ctx&&(ctx=this);for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];return createNodeObservable(fn,ctx,selector,args)}},ListenDisposable.prototype.dispose=function(){this.isDisposed||(this._e.removeEventListener(this._n,this._fn,!1),this.isDisposed=!0)},Rx.config.useNativeEvents=!1;var EventObservable=function(__super__){function EventObservable(el,name,fn){this._el=el,this._n=name,this._fn=fn,__super__.call(this)}function createHandler(o,fn){return function(){var results=arguments[0];return isFunction(fn)&&(results=tryCatch(fn).apply(null,arguments),results===errorObj)?o.onError(results.e):void o.onNext(results)}}return inherits(EventObservable,__super__),EventObservable.prototype.subscribeCore=function(o){return createEventListener(this._el,this._n,createHandler(o,this._fn))},EventObservable}(ObservableBase);Observable.fromEvent=function(element,eventName,selector){return element.addListener?fromEventPattern(function(h){element.addListener(eventName,h)},function(h){element.removeListener(eventName,h)},selector):Rx.config.useNativeEvents||"function"!=typeof element.on||"function"!=typeof element.off?new EventObservable(element,eventName,selector).publish().refCount():fromEventPattern(function(h){element.on(eventName,h)},function(h){element.off(eventName,h)},selector)};var EventPatternObservable=function(__super__){function EventPatternObservable(add,del,fn){this._add=add,this._del=del,this._fn=fn,__super__.call(this)}function createHandler(o,fn){return function(){var results=arguments[0];return isFunction(fn)&&(results=tryCatch(fn).apply(null,arguments),results===errorObj)?o.onError(results.e):void o.onNext(results)}}function EventPatternDisposable(del,fn,ret){this._del=del,this._fn=fn,this._ret=ret,this.isDisposed=!1}return inherits(EventPatternObservable,__super__),EventPatternObservable.prototype.subscribeCore=function(o){var fn=createHandler(o,this._fn),returnValue=this._add(fn);return new EventPatternDisposable(this._del,fn,returnValue)},EventPatternDisposable.prototype.dispose=function(){this.isDisposed||(isFunction(this._del)&&this._del(this._fn,this._ret),this.isDisposed=!0)},EventPatternObservable}(ObservableBase),fromEventPattern=Observable.fromEventPattern=function(addHandler,removeHandler,selector){return new EventPatternObservable(addHandler,removeHandler,selector).publish().refCount()};Observable.startAsync=function(functionAsync){var promise=tryCatch(functionAsync)();return promise===errorObj?observableThrow(promise.e):observableFromPromise(promise)};var PausableObservable=function(__super__){function PausableObservable(source,pauser){this.source=source,this.controller=new Subject,this.paused=!0,pauser&&pauser.subscribe?this.pauser=this.controller.merge(pauser):this.pauser=this.controller,__super__.call(this)}return inherits(PausableObservable,__super__),PausableObservable.prototype._subscribe=function(o){var conn=this.source.publish(),subscription=conn.subscribe(o),connection=disposableEmpty,pausable=this.pauser.startWith(!this.paused).distinctUntilChanged().subscribe(function(b){b?connection=conn.connect():(connection.dispose(),connection=disposableEmpty)});return new NAryDisposable([subscription,connection,pausable])},PausableObservable.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},PausableObservable.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},PausableObservable}(Observable);observableProto.pausable=function(pauser){return new PausableObservable(this,pauser)};var PausableBufferedObservable=function(__super__){function PausableBufferedObservable(source,pauser){this.source=source,this.controller=new Subject,this.paused=!0,pauser&&pauser.subscribe?this.pauser=this.controller.merge(pauser):this.pauser=this.controller,__super__.call(this)}return inherits(PausableBufferedObservable,__super__),PausableBufferedObservable.prototype._subscribe=function(o){function drainQueue(){for(;q.length>0;)o.onNext(q.shift())}var previousShouldFire,q=[],subscription=combineLatestSource(this.source,this.pauser.startWith(!this.paused).distinctUntilChanged(),function(data,shouldFire){return{data:data,shouldFire:shouldFire}}).subscribe(function(results){previousShouldFire!==undefined&&results.shouldFire!==previousShouldFire?(previousShouldFire=results.shouldFire,results.shouldFire&&drainQueue()):(previousShouldFire=results.shouldFire,results.shouldFire?o.onNext(results.data):q.push(results.data))},function(err){drainQueue(),o.onError(err)},function(){drainQueue(),o.onCompleted()});return subscription},PausableBufferedObservable.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},PausableBufferedObservable.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},PausableBufferedObservable}(Observable);observableProto.pausableBuffered=function(pauser){return new PausableBufferedObservable(this,pauser)};var ControlledObservable=function(__super__){function ControlledObservable(source,enableQueue,scheduler){__super__.call(this),this.subject=new ControlledSubject(enableQueue,scheduler),this.source=source.multicast(this.subject).refCount()}return inherits(ControlledObservable,__super__),ControlledObservable.prototype._subscribe=function(o){return this.source.subscribe(o)},ControlledObservable.prototype.request=function(numberOfItems){return this.subject.request(null==numberOfItems?-1:numberOfItems)},ControlledObservable}(Observable),ControlledSubject=function(__super__){function ControlledSubject(enableQueue,scheduler){null==enableQueue&&(enableQueue=!0),__super__.call(this),this.subject=new Subject,this.enableQueue=enableQueue,this.queue=enableQueue?[]:null,this.requestedCount=0,this.requestedDisposable=null,this.error=null,this.hasFailed=!1,this.hasCompleted=!1,this.scheduler=scheduler||currentThreadScheduler}return inherits(ControlledSubject,__super__),addProperties(ControlledSubject.prototype,Observer,{_subscribe:function(o){return this.subject.subscribe(o)},onCompleted:function(){this.hasCompleted=!0,this.enableQueue&&0!==this.queue.length?this.queue.push(Notification.createOnCompleted()):(this.subject.onCompleted(),this.disposeCurrentRequest())},onError:function(error){this.hasFailed=!0,this.error=error,this.enableQueue&&0!==this.queue.length?this.queue.push(Notification.createOnError(error)):(this.subject.onError(error),this.disposeCurrentRequest())},onNext:function(value){this.requestedCount<=0?this.enableQueue&&this.queue.push(Notification.createOnNext(value)):(0===this.requestedCount--&&this.disposeCurrentRequest(),this.subject.onNext(value))},_processRequest:function(numberOfItems){if(this.enableQueue)for(;this.queue.length>0&&(numberOfItems>0||"N"!==this.queue[0].kind);){var first=this.queue.shift();first.accept(this.subject),"N"===first.kind?numberOfItems--:(this.disposeCurrentRequest(),this.queue=[])}return numberOfItems},request:function(number){this.disposeCurrentRequest();var self=this;return this.requestedDisposable=this.scheduler.schedule(number,function(s,i){var remaining=self._processRequest(i),stopped=self.hasCompleted||self.hasFailed;if(!stopped&&remaining>0)return self.requestedCount=remaining,disposableCreate(function(){self.requestedCount=0})}),this.requestedDisposable},disposeCurrentRequest:function(){this.requestedDisposable&&(this.requestedDisposable.dispose(),this.requestedDisposable=null)}}),ControlledSubject}(Observable);observableProto.controlled=function(enableQueue,scheduler){return enableQueue&&isScheduler(enableQueue)&&(scheduler=enableQueue,enableQueue=!0),null==enableQueue&&(enableQueue=!0),new ControlledObservable(this,enableQueue,scheduler)};var StopAndWaitObservable=function(__super__){function StopAndWaitObservable(source){__super__.call(this),this.source=source}function scheduleMethod(s,self){return self.source.request(1)}inherits(StopAndWaitObservable,__super__),StopAndWaitObservable.prototype._subscribe=function(o){return this.subscription=this.source.subscribe(new StopAndWaitObserver(o,this,this.subscription)),new BinaryDisposable(this.subscription,defaultScheduler.schedule(this,scheduleMethod))};var StopAndWaitObserver=function(__sub__){function StopAndWaitObserver(observer,observable,cancel){__sub__.call(this),this.observer=observer,this.observable=observable,this.cancel=cancel,this.scheduleDisposable=null}function innerScheduleMethod(s,self){return self.observable.source.request(1)}return inherits(StopAndWaitObserver,__sub__),StopAndWaitObserver.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},StopAndWaitObserver.prototype.error=function(error){this.observer.onError(error),this.dispose()},StopAndWaitObserver.prototype.next=function(value){this.observer.onNext(value),this.scheduleDisposable=defaultScheduler.schedule(this,innerScheduleMethod)},StopAndWaitObserver.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),__sub__.prototype.dispose.call(this)},StopAndWaitObserver}(AbstractObserver);return StopAndWaitObservable}(Observable);ControlledObservable.prototype.stopAndWait=function(){return new StopAndWaitObservable(this)};var WindowedObservable=function(__super__){function WindowedObservable(source,windowSize){__super__.call(this),this.source=source,this.windowSize=windowSize}function scheduleMethod(s,self){return self.source.request(self.windowSize)}inherits(WindowedObservable,__super__),WindowedObservable.prototype._subscribe=function(o){return this.subscription=this.source.subscribe(new WindowedObserver(o,this,this.subscription)),new BinaryDisposable(this.subscription,defaultScheduler.schedule(this,scheduleMethod))};var WindowedObserver=function(__sub__){function WindowedObserver(observer,observable,cancel){this.observer=observer,this.observable=observable,this.cancel=cancel,this.received=0,this.scheduleDisposable=null,__sub__.call(this)}function innerScheduleMethod(s,self){return self.observable.source.request(self.observable.windowSize)}return inherits(WindowedObserver,__sub__),WindowedObserver.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},WindowedObserver.prototype.error=function(error){this.observer.onError(error),this.dispose()},WindowedObserver.prototype.next=function(value){this.observer.onNext(value),this.received=++this.received%this.observable.windowSize,0===this.received&&(this.scheduleDisposable=defaultScheduler.schedule(this,innerScheduleMethod))},WindowedObserver.prototype.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),__sub__.prototype.dispose.call(this)},WindowedObserver}(AbstractObserver);return WindowedObservable}(Observable);ControlledObservable.prototype.windowed=function(windowSize){return new WindowedObservable(this,windowSize)},observableProto.pipe=function(dest){function onDrain(){source.resume()}var source=this.pausableBuffered();return dest.addListener("drain",onDrain),source.subscribe(function(x){!dest.write(x)&&source.pause()},function(err){dest.emit("error",err)},function(){!dest._isStdio&&dest.end(),dest.removeListener("drain",onDrain)}),source.resume(),dest};var MulticastObservable=function(__super__){function MulticastObservable(source,fn1,fn2){this.source=source,this._fn1=fn1,this._fn2=fn2,__super__.call(this)}return inherits(MulticastObservable,__super__),MulticastObservable.prototype.subscribeCore=function(o){var connectable=this.source.multicast(this._fn1());return new BinaryDisposable(this._fn2(connectable).subscribe(o),connectable.connect())},MulticastObservable}(ObservableBase);observableProto.multicast=function(subjectOrSubjectSelector,selector){return isFunction(subjectOrSubjectSelector)?new MulticastObservable(this,subjectOrSubjectSelector,selector):new ConnectableObservable(this,subjectOrSubjectSelector)},observableProto.publish=function(selector){return selector&&isFunction(selector)?this.multicast(function(){return new Subject},selector):this.multicast(new Subject)},observableProto.share=function(){return this.publish().refCount()},observableProto.publishLast=function(selector){return selector&&isFunction(selector)?this.multicast(function(){return new AsyncSubject},selector):this.multicast(new AsyncSubject)},observableProto.publishValue=function(initialValueOrSelector,initialValue){return 2===arguments.length?this.multicast(function(){return new BehaviorSubject(initialValue)},initialValueOrSelector):this.multicast(new BehaviorSubject(initialValueOrSelector))},observableProto.shareValue=function(initialValue){return this.publishValue(initialValue).refCount()},observableProto.replay=function(selector,bufferSize,windowSize,scheduler){return selector&&isFunction(selector)?this.multicast(function(){return new ReplaySubject(bufferSize,windowSize,scheduler)},selector):this.multicast(new ReplaySubject(bufferSize,windowSize,scheduler))},observableProto.shareReplay=function(bufferSize,windowSize,scheduler){return this.replay(null,bufferSize,windowSize,scheduler).refCount()};var InnerSubscription=function(s,o){this._s=s,this._o=o};InnerSubscription.prototype.dispose=function(){if(!this._s.isDisposed&&null!==this._o){var idx=this._s.observers.indexOf(this._o);this._s.observers.splice(idx,1),this._o=null}};var RefCountObservable=function(__super__){function RefCountObservable(source){this.source=source,this._count=0,this._connectableSubscription=null,__super__.call(this)}function RefCountDisposable(p,s){this._p=p,this._s=s,this.isDisposed=!1}return inherits(RefCountObservable,__super__),RefCountObservable.prototype.subscribeCore=function(o){var subscription=this.source.subscribe(o);return 1===++this._count&&(this._connectableSubscription=this.source.connect()),new RefCountDisposable(this,subscription)},RefCountDisposable.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.dispose(),0===--this._p._count&&this._p._connectableSubscription.dispose())},RefCountObservable}(ObservableBase),ConnectableObservable=Rx.ConnectableObservable=function(__super__){function ConnectableObservable(source,subject){this.source=source,this._connection=null,this._source=source.asObservable(),this._subject=subject,__super__.call(this)}function ConnectDisposable(parent,subscription){this._p=parent,this._s=subscription}return inherits(ConnectableObservable,__super__),ConnectDisposable.prototype.dispose=function(){this._s&&(this._s.dispose(),this._s=null,this._p._connection=null)},ConnectableObservable.prototype.connect=function(){if(!this._connection){if(this._subject.isStopped)return disposableEmpty;var subscription=this._source.subscribe(this._subject);this._connection=new ConnectDisposable(this,subscription)}return this._connection},ConnectableObservable.prototype._subscribe=function(o){return this._subject.subscribe(o)},ConnectableObservable.prototype.refCount=function(){return new RefCountObservable(this)},ConnectableObservable}(Observable);observableProto.singleInstance=function(){function getObservable(){return hasObservable||(hasObservable=!0,observable=source.finally(function(){hasObservable=!1}).publish().refCount()),observable}var observable,source=this,hasObservable=!1;return new AnonymousObservable(function(o){return getObservable().subscribe(o)})},observableProto.join=function(right,leftDurationSelector,rightDurationSelector,resultSelector){var left=this;return new AnonymousObservable(function(o){var group=new CompositeDisposable,leftDone=!1,rightDone=!1,leftId=0,rightId=0,leftMap=new Map,rightMap=new Map,handleError=function(e){o.onError(e)};return group.add(left.subscribe(function(value){var id=leftId++,md=new SingleAssignmentDisposable;leftMap.set(id,value),group.add(md);var duration=tryCatch(leftDurationSelector)(value);return duration===errorObj?o.onError(duration.e):(md.setDisposable(duration.take(1).subscribe(noop,handleError,function(){leftMap.delete(id)&&0===leftMap.size&&leftDone&&o.onCompleted(),group.remove(md)})),void rightMap.forEach(function(v){var result=tryCatch(resultSelector)(value,v);return result===errorObj?o.onError(result.e):void o.onNext(result)}))},handleError,function(){leftDone=!0,(rightDone||0===leftMap.size)&&o.onCompleted()})),group.add(right.subscribe(function(value){var id=rightId++,md=new SingleAssignmentDisposable;rightMap.set(id,value),group.add(md);var duration=tryCatch(rightDurationSelector)(value);return duration===errorObj?o.onError(duration.e):(md.setDisposable(duration.take(1).subscribe(noop,handleError,function(){rightMap.delete(id)&&0===rightMap.size&&rightDone&&o.onCompleted(),group.remove(md)})),void leftMap.forEach(function(v){var result=tryCatch(resultSelector)(v,value);return result===errorObj?o.onError(result.e):void o.onNext(result)}))},handleError,function(){rightDone=!0,(leftDone||0===rightMap.size)&&o.onCompleted()})),group},left)},observableProto.groupJoin=function(right,leftDurationSelector,rightDurationSelector,resultSelector){var left=this;return new AnonymousObservable(function(o){function handleError(e){}var group=new CompositeDisposable,r=new RefCountDisposable(group),leftMap=new Map,rightMap=new Map,leftId=0,rightId=0,handleError=function(e){return function(v){v.onError(e)}};return group.add(left.subscribe(function(value){var s=new Subject,id=leftId++;leftMap.set(id,s);var result=tryCatch(resultSelector)(value,addRef(s,r));if(result===errorObj)return leftMap.forEach(handleError(result.e)),o.onError(result.e);o.onNext(result),rightMap.forEach(function(v){s.onNext(v)});var md=new SingleAssignmentDisposable;group.add(md);var duration=tryCatch(leftDurationSelector)(value);return duration===errorObj?(leftMap.forEach(handleError(duration.e)),o.onError(duration.e)):void md.setDisposable(duration.take(1).subscribe(noop,function(e){leftMap.forEach(handleError(e)),o.onError(e)},function(){leftMap.delete(id)&&s.onCompleted(),group.remove(md)}))},function(e){leftMap.forEach(handleError(e)),o.onError(e)},function(){o.onCompleted()})),group.add(right.subscribe(function(value){var id=rightId++;rightMap.set(id,value);var md=new SingleAssignmentDisposable;group.add(md);var duration=tryCatch(rightDurationSelector)(value);return duration===errorObj?(leftMap.forEach(handleError(duration.e)),o.onError(duration.e)):(md.setDisposable(duration.take(1).subscribe(noop,function(e){leftMap.forEach(handleError(e)),o.onError(e)},function(){rightMap.delete(id),group.remove(md)})),void leftMap.forEach(function(v){v.onNext(value)}))},function(e){leftMap.forEach(handleError(e)),o.onError(e)})),r},left)},observableProto.buffer=function(){return this.window.apply(this,arguments).flatMap(toArray)},observableProto.window=function(windowOpeningsOrClosingSelector,windowClosingSelector){return 1===arguments.length&&"function"!=typeof arguments[0]?observableWindowWithBoundaries.call(this,windowOpeningsOrClosingSelector):"function"==typeof windowOpeningsOrClosingSelector?observableWindowWithClosingSelector.call(this,windowOpeningsOrClosingSelector):observableWindowWithOpenings.call(this,windowOpeningsOrClosingSelector,windowClosingSelector)};var PairwiseObservable=function(__super__){function PairwiseObservable(source){this.source=source,__super__.call(this)}return inherits(PairwiseObservable,__super__),PairwiseObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new PairwiseObserver(o))},PairwiseObservable}(ObservableBase),PairwiseObserver=function(__super__){function PairwiseObserver(o){this._o=o,this._p=null,this._hp=!1,__super__.call(this)}return inherits(PairwiseObserver,__super__),PairwiseObserver.prototype.next=function(x){this._hp?this._o.onNext([this._p,x]):this._hp=!0,this._p=x},PairwiseObserver.prototype.error=function(err){this._o.onError(err)},PairwiseObserver.prototype.completed=function(){this._o.onCompleted()},PairwiseObserver}(AbstractObserver);observableProto.pairwise=function(){return new PairwiseObservable(this)},observableProto.partition=function(predicate,thisArg){var fn=bindCallback(predicate,thisArg,3);return[this.filter(predicate,thisArg),this.filter(function(x,i,o){return!fn(x,i,o)})]};var WhileEnumerable=function(__super__){function WhileEnumerable(c,s){this.c=c,this.s=s}return inherits(WhileEnumerable,__super__),WhileEnumerable.prototype[$iterator$]=function(){var self=this;return{next:function(){return self.c()?{done:!1,value:self.s}:{done:!0,value:void 0}}}},WhileEnumerable}(Enumerable);observableProto.letBind=observableProto.let=function(func){return func(this)},Observable.if=function(condition,thenSource,elseSourceOrScheduler){return observableDefer(function(){return elseSourceOrScheduler||(elseSourceOrScheduler=observableEmpty()),isPromise(thenSource)&&(thenSource=observableFromPromise(thenSource)),isPromise(elseSourceOrScheduler)&&(elseSourceOrScheduler=observableFromPromise(elseSourceOrScheduler)),"function"==typeof elseSourceOrScheduler.now&&(elseSourceOrScheduler=observableEmpty(elseSourceOrScheduler)),condition()?thenSource:elseSourceOrScheduler})},Observable.for=Observable.forIn=function(sources,resultSelector,thisArg){return enumerableOf(sources,resultSelector,thisArg).concat()};var observableWhileDo=Observable.while=Observable.whileDo=function(condition,source){return isPromise(source)&&(source=observableFromPromise(source)),enumerableWhile(condition,source).concat()};observableProto.doWhile=function(condition){return observableConcat([this,observableWhileDo(condition,this)])},Observable.case=function(selector,sources,defaultSourceOrScheduler){return observableDefer(function(){isPromise(defaultSourceOrScheduler)&&(defaultSourceOrScheduler=observableFromPromise(defaultSourceOrScheduler)),defaultSourceOrScheduler||(defaultSourceOrScheduler=observableEmpty()),isScheduler(defaultSourceOrScheduler)&&(defaultSourceOrScheduler=observableEmpty(defaultSourceOrScheduler));var result=sources[selector()];return isPromise(result)&&(result=observableFromPromise(result)),result||defaultSourceOrScheduler})};var ExpandObservable=function(__super__){function ExpandObservable(source,fn,scheduler){this.source=source,this._fn=fn,this._scheduler=scheduler,__super__.call(this)}function scheduleRecursive(args,recurse){var work,state=args[0],self=args[1];if(!(state.q.length>0))return void(state.isAcquired=!1);work=state.q.shift();var m1=new SingleAssignmentDisposable;state.d.add(m1),m1.setDisposable(work.subscribe(new ExpandObserver(state,self,m1))),recurse([state,self])}return inherits(ExpandObservable,__super__),ExpandObservable.prototype._ensureActive=function(state){var isOwner=!1;state.q.length>0&&(isOwner=!state.isAcquired,state.isAcquired=!0),isOwner&&state.m.setDisposable(this._scheduler.scheduleRecursive([state,this],scheduleRecursive))},ExpandObservable.prototype.subscribeCore=function(o){var m=new SerialDisposable,d=new CompositeDisposable(m),state={q:[],m:m,d:d,activeCount:0,isAcquired:!1,o:o};return state.q.push(this.source),state.activeCount++,this._ensureActive(state),d},ExpandObservable}(ObservableBase),ExpandObserver=function(__super__){function ExpandObserver(state,parent,m1){this._s=state,this._p=parent,this._m1=m1,__super__.call(this)}return inherits(ExpandObserver,__super__),ExpandObserver.prototype.next=function(x){this._s.o.onNext(x);var result=tryCatch(this._p._fn)(x);return result===errorObj?this._s.o.onError(result.e):(this._s.q.push(result),this._s.activeCount++,void this._p._ensureActive(this._s))},ExpandObserver.prototype.error=function(e){this._s.o.onError(e)},ExpandObserver.prototype.completed=function(){this._s.d.remove(this._m1),this._s.activeCount--,0===this._s.activeCount&&this._s.o.onCompleted();
},ExpandObserver}(AbstractObserver);observableProto.expand=function(selector,scheduler){return isScheduler(scheduler)||(scheduler=currentThreadScheduler),new ExpandObservable(this,selector,scheduler)};var ForkJoinObservable=function(__super__){function ForkJoinObservable(sources,cb){this._sources=sources,this._cb=cb,__super__.call(this)}return inherits(ForkJoinObservable,__super__),ForkJoinObservable.prototype.subscribeCore=function(o){if(0===this._sources.length)return o.onCompleted(),disposableEmpty;for(var count=this._sources.length,state={finished:!1,hasResults:new Array(count),hasCompleted:new Array(count),results:new Array(count)},subscriptions=new CompositeDisposable,i=0,len=this._sources.length;i<len;i++){var source=this._sources[i];isPromise(source)&&(source=observableFromPromise(source)),subscriptions.add(source.subscribe(new ForkJoinObserver(o,state,i,this._cb,subscriptions)))}return subscriptions},ForkJoinObservable}(ObservableBase),ForkJoinObserver=function(__super__){function ForkJoinObserver(o,s,i,cb,subs){this._o=o,this._s=s,this._i=i,this._cb=cb,this._subs=subs,__super__.call(this)}return inherits(ForkJoinObserver,__super__),ForkJoinObserver.prototype.next=function(x){this._s.finished||(this._s.hasResults[this._i]=!0,this._s.results[this._i]=x)},ForkJoinObserver.prototype.error=function(e){this._s.finished=!0,this._o.onError(e),this._subs.dispose()},ForkJoinObserver.prototype.completed=function(){if(!this._s.finished){if(!this._s.hasResults[this._i])return this._o.onCompleted();this._s.hasCompleted[this._i]=!0;for(var i=0;i<this._s.results.length;i++)if(!this._s.hasCompleted[i])return;this._s.finished=!0;var res=tryCatch(this._cb).apply(null,this._s.results);if(res===errorObj)return this._o.onError(res.e);this._o.onNext(res),this._o.onCompleted()}},ForkJoinObserver}(AbstractObserver);Observable.forkJoin=function(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];var resultSelector=isFunction(args[len-1])?args.pop():argumentsToArray;return Array.isArray(args[0])&&(args=args[0]),new ForkJoinObservable(args,resultSelector)},observableProto.forkJoin=function(){for(var len=arguments.length,args=new Array(len),i=0;i<len;i++)args[i]=arguments[i];return Array.isArray(args[0])?args[0].unshift(this):args.unshift(this),Observable.forkJoin.apply(null,args)},observableProto.manySelect=observableProto.extend=function(selector,scheduler){isScheduler(scheduler)||(scheduler=Rx.Scheduler.immediate);var source=this;return observableDefer(function(){var chain;return source.map(function(x){var curr=new ChainObservable(x);return chain&&chain.onNext(x),chain=curr,curr}).tap(noop,function(e){chain&&chain.onError(e)},function(){chain&&chain.onCompleted()}).observeOn(scheduler).map(selector)},source)};var ChainObservable=function(__super__){function ChainObservable(head){__super__.call(this),this.head=head,this.tail=new AsyncSubject}return inherits(ChainObservable,__super__),addProperties(ChainObservable.prototype,Observer,{_subscribe:function(o){var g=new CompositeDisposable;return g.add(currentThreadScheduler.schedule(this,function(_,self){o.onNext(self.head),g.add(self.tail.mergeAll().subscribe(o))})),g},onCompleted:function(){this.onNext(Observable.empty())},onError:function(e){this.onNext(Observable.throw(e))},onNext:function(v){this.tail.onNext(v),this.tail.onCompleted()}}),ChainObservable}(Observable),Map=root.Map||function(){function Map(){this.size=0,this._values=[],this._keys=[]}return Map.prototype.delete=function(key){var i=this._keys.indexOf(key);return i!==-1&&(this._values.splice(i,1),this._keys.splice(i,1),this.size--,!0)},Map.prototype.get=function(key){var i=this._keys.indexOf(key);return i===-1?undefined:this._values[i]},Map.prototype.set=function(key,value){var i=this._keys.indexOf(key);return i===-1?(this._keys.push(key),this._values.push(value),this.size++):this._values[i]=value,this},Map.prototype.forEach=function(cb,thisArg){for(var i=0;i<this.size;i++)cb.call(thisArg,this._values[i],this._keys[i])},Map}();Pattern.prototype.and=function(other){return new Pattern(this.patterns.concat(other))},Pattern.prototype.thenDo=function(selector){return new Plan(this,selector)},Plan.prototype.activate=function(externalSubscriptions,observer,deactivate){for(var joinObservers=[],errHandler=handleOnError(observer),i=0,len=this.expression.patterns.length;i<len;i++)joinObservers.push(planCreateObserver(externalSubscriptions,this.expression.patterns[i],errHandler));var activePlan=new ActivePlan(joinObservers,handleOnNext(this,observer),function(){for(var j=0,jlen=joinObservers.length;j<jlen;j++)joinObservers[j].removeActivePlan(activePlan);deactivate(activePlan)});for(i=0,len=joinObservers.length;i<len;i++)joinObservers[i].addActivePlan(activePlan);return activePlan},ActivePlan.prototype.dequeue=function(){this.joinObservers.forEach(function(v){v.queue.shift()})},ActivePlan.prototype.match=function(){var i,len,hasValues=!0;for(i=0,len=this.joinObserverArray.length;i<len;i++)if(0===this.joinObserverArray[i].queue.length){hasValues=!1;break}if(hasValues){var firstValues=[],isCompleted=!1;for(i=0,len=this.joinObserverArray.length;i<len;i++)firstValues.push(this.joinObserverArray[i].queue[0]),"C"===this.joinObserverArray[i].queue[0].kind&&(isCompleted=!0);if(isCompleted)this.onCompleted();else{this.dequeue();var values=[];for(i=0,len=firstValues.length;i<firstValues.length;i++)values.push(firstValues[i].value);this.onNext.apply(this,values)}}};var JoinObserver=function(__super__){function JoinObserver(source,onError){__super__.call(this),this.source=source,this.onError=onError,this.queue=[],this.activePlans=[],this.subscription=new SingleAssignmentDisposable,this.isDisposed=!1}inherits(JoinObserver,__super__);var JoinObserverPrototype=JoinObserver.prototype;return JoinObserverPrototype.next=function(notification){if(!this.isDisposed){if("E"===notification.kind)return this.onError(notification.error);this.queue.push(notification);for(var activePlans=this.activePlans.slice(0),i=0,len=activePlans.length;i<len;i++)activePlans[i].match()}},JoinObserverPrototype.error=noop,JoinObserverPrototype.completed=noop,JoinObserverPrototype.addActivePlan=function(activePlan){this.activePlans.push(activePlan)},JoinObserverPrototype.subscribe=function(){this.subscription.setDisposable(this.source.materialize().subscribe(this))},JoinObserverPrototype.removeActivePlan=function(activePlan){this.activePlans.splice(this.activePlans.indexOf(activePlan),1),0===this.activePlans.length&&this.dispose()},JoinObserverPrototype.dispose=function(){__super__.prototype.dispose.call(this),this.isDisposed||(this.isDisposed=!0,this.subscription.dispose())},JoinObserver}(AbstractObserver);observableProto.and=function(right){return new Pattern([this,right])},observableProto.thenDo=function(selector){return new Pattern([this]).thenDo(selector)},Observable.when=function(){var plans,len=arguments.length;if(Array.isArray(arguments[0]))plans=arguments[0];else{plans=new Array(len);for(var i=0;i<len;i++)plans[i]=arguments[i]}return new AnonymousObservable(function(o){var activePlans=[],externalSubscriptions=new Map,outObserver=observerCreate(function(x){o.onNext(x)},function(err){externalSubscriptions.forEach(function(v){v.onError(err)}),o.onError(err)},function(x){o.onCompleted()});try{for(var i=0,len=plans.length;i<len;i++)activePlans.push(plans[i].activate(externalSubscriptions,outObserver,function(activePlan){var idx=activePlans.indexOf(activePlan);activePlans.splice(idx,1),0===activePlans.length&&o.onCompleted()}))}catch(e){return observableThrow(e).subscribe(o)}var group=new CompositeDisposable;return externalSubscriptions.forEach(function(joinObserver){joinObserver.subscribe(),group.add(joinObserver)}),group})};var TimerObservable=function(__super__){function TimerObservable(dt,s){this._dt=dt,this._s=s,__super__.call(this)}function scheduleMethod(s,o){o.onNext(0),o.onCompleted()}return inherits(TimerObservable,__super__),TimerObservable.prototype.subscribeCore=function(o){return this._s.scheduleFuture(o,this._dt,scheduleMethod)},TimerObservable}(ObservableBase),observableinterval=Observable.interval=function(period,scheduler){return observableTimerTimeSpanAndPeriod(period,period,isScheduler(scheduler)?scheduler:defaultScheduler)};Observable.timer=function(dueTime,periodOrScheduler,scheduler){var period;return isScheduler(scheduler)||(scheduler=defaultScheduler),null!=periodOrScheduler&&"number"==typeof periodOrScheduler?period=periodOrScheduler:isScheduler(periodOrScheduler)&&(scheduler=periodOrScheduler),(dueTime instanceof Date||"number"==typeof dueTime)&&period===undefined?_observableTimer(dueTime,scheduler):dueTime instanceof Date&&period!==undefined?observableTimerDateAndPeriod(dueTime,periodOrScheduler,scheduler):observableTimerTimeSpanAndPeriod(dueTime,period,scheduler)};observableProto.delay=function(){var firstArg=arguments[0];if("number"==typeof firstArg||firstArg instanceof Date){var dueTime=firstArg,scheduler=arguments[1];return isScheduler(scheduler)||(scheduler=defaultScheduler),dueTime instanceof Date?observableDelayAbsolute(this,dueTime,scheduler):observableDelayRelative(this,dueTime,scheduler)}if(Observable.isObservable(firstArg)||isFunction(firstArg))return delayWithSelector(this,firstArg,arguments[1]);throw new Error("Invalid arguments")};var DebounceObservable=function(__super__){function DebounceObservable(source,dt,s){isScheduler(s)||(s=defaultScheduler),this.source=source,this._dt=dt,this._s=s,__super__.call(this)}return inherits(DebounceObservable,__super__),DebounceObservable.prototype.subscribeCore=function(o){var cancelable=new SerialDisposable;return new BinaryDisposable(this.source.subscribe(new DebounceObserver(o,this._dt,this._s,cancelable)),cancelable)},DebounceObservable}(ObservableBase),DebounceObserver=function(__super__){function DebounceObserver(observer,dueTime,scheduler,cancelable){this._o=observer,this._d=dueTime,this._scheduler=scheduler,this._c=cancelable,this._v=null,this._hv=!1,this._id=0,__super__.call(this)}return inherits(DebounceObserver,__super__),DebounceObserver.prototype.next=function(x){this._hv=!0,this._v=x;var currentId=++this._id,d=new SingleAssignmentDisposable;this._c.setDisposable(d),d.setDisposable(this._scheduler.scheduleFuture(this,this._d,function(_,self){self._hv&&self._id===currentId&&self._o.onNext(x),self._hv=!1}))},DebounceObserver.prototype.error=function(e){this._c.dispose(),this._o.onError(e),this._hv=!1,this._id++},DebounceObserver.prototype.completed=function(){this._c.dispose(),this._hv&&this._o.onNext(this._v),this._o.onCompleted(),this._hv=!1,this._id++},DebounceObserver}(AbstractObserver);observableProto.debounce=function(){if(isFunction(arguments[0]))return debounceWithSelector(this,arguments[0]);if("number"==typeof arguments[0])return new DebounceObservable(this,arguments[0],arguments[1]);throw new Error("Invalid arguments")},observableProto.windowWithTime=observableProto.windowTime=function(timeSpan,timeShiftOrScheduler,scheduler){var timeShift,source=this;return null==timeShiftOrScheduler&&(timeShift=timeSpan),isScheduler(scheduler)||(scheduler=defaultScheduler),"number"==typeof timeShiftOrScheduler?timeShift=timeShiftOrScheduler:isScheduler(timeShiftOrScheduler)&&(timeShift=timeSpan,scheduler=timeShiftOrScheduler),new AnonymousObservable(function(observer){function createTimer(){var m=new SingleAssignmentDisposable,isSpan=!1,isShift=!1;timerD.setDisposable(m),nextSpan===nextShift?(isSpan=!0,isShift=!0):nextSpan<nextShift?isSpan=!0:isShift=!0;var newTotalTime=isSpan?nextSpan:nextShift,ts=newTotalTime-totalTime;totalTime=newTotalTime,isSpan&&(nextSpan+=timeShift),isShift&&(nextShift+=timeShift),m.setDisposable(scheduler.scheduleFuture(null,ts,function(){if(isShift){var s=new Subject;q.push(s),observer.onNext(addRef(s,refCountDisposable))}isSpan&&q.shift().onCompleted(),createTimer()}))}var groupDisposable,refCountDisposable,nextShift=timeShift,nextSpan=timeSpan,q=[],timerD=new SerialDisposable,totalTime=0;return groupDisposable=new CompositeDisposable(timerD),refCountDisposable=new RefCountDisposable(groupDisposable),q.push(new Subject),observer.onNext(addRef(q[0],refCountDisposable)),createTimer(),groupDisposable.add(source.subscribe(function(x){for(var i=0,len=q.length;i<len;i++)q[i].onNext(x)},function(e){for(var i=0,len=q.length;i<len;i++)q[i].onError(e);observer.onError(e)},function(){for(var i=0,len=q.length;i<len;i++)q[i].onCompleted();observer.onCompleted()})),refCountDisposable},source)},observableProto.windowWithTimeOrCount=observableProto.windowTimeOrCount=function(timeSpan,count,scheduler){var source=this;return isScheduler(scheduler)||(scheduler=defaultScheduler),new AnonymousObservable(function(observer){function createTimer(id){var m=new SingleAssignmentDisposable;timerD.setDisposable(m),m.setDisposable(scheduler.scheduleFuture(null,timeSpan,function(){if(id===windowId){n=0;var newId=++windowId;s.onCompleted(),s=new Subject,observer.onNext(addRef(s,refCountDisposable)),createTimer(newId)}}))}var timerD=new SerialDisposable,groupDisposable=new CompositeDisposable(timerD),refCountDisposable=new RefCountDisposable(groupDisposable),n=0,windowId=0,s=new Subject;return observer.onNext(addRef(s,refCountDisposable)),createTimer(0),groupDisposable.add(source.subscribe(function(x){var newId=0,newWindow=!1;s.onNext(x),++n===count&&(newWindow=!0,n=0,newId=++windowId,s.onCompleted(),s=new Subject,observer.onNext(addRef(s,refCountDisposable))),newWindow&&createTimer(newId)},function(e){s.onError(e),observer.onError(e)},function(){s.onCompleted(),observer.onCompleted()})),refCountDisposable},source)},observableProto.bufferWithTime=observableProto.bufferTime=function(timeSpan,timeShiftOrScheduler,scheduler){return this.windowWithTime(timeSpan,timeShiftOrScheduler,scheduler).flatMap(toArray)},observableProto.bufferWithTimeOrCount=observableProto.bufferTimeOrCount=function(timeSpan,count,scheduler){return this.windowWithTimeOrCount(timeSpan,count,scheduler).flatMap(toArray)};var TimeIntervalObservable=function(__super__){function TimeIntervalObservable(source,s){this.source=source,this._s=s,__super__.call(this)}return inherits(TimeIntervalObservable,__super__),TimeIntervalObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new TimeIntervalObserver(o,this._s))},TimeIntervalObservable}(ObservableBase),TimeIntervalObserver=function(__super__){function TimeIntervalObserver(o,s){this._o=o,this._s=s,this._l=s.now(),__super__.call(this)}return inherits(TimeIntervalObserver,__super__),TimeIntervalObserver.prototype.next=function(x){var now=this._s.now(),span=now-this._l;this._l=now,this._o.onNext({value:x,interval:span})},TimeIntervalObserver.prototype.error=function(e){this._o.onError(e)},TimeIntervalObserver.prototype.completed=function(){this._o.onCompleted()},TimeIntervalObserver}(AbstractObserver);observableProto.timeInterval=function(scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),new TimeIntervalObservable(this,scheduler)};var TimestampObservable=function(__super__){function TimestampObservable(source,s){this.source=source,this._s=s,__super__.call(this)}return inherits(TimestampObservable,__super__),TimestampObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new TimestampObserver(o,this._s))},TimestampObservable}(ObservableBase),TimestampObserver=function(__super__){function TimestampObserver(o,s){this._o=o,this._s=s,__super__.call(this)}return inherits(TimestampObserver,__super__),TimestampObserver.prototype.next=function(x){this._o.onNext({value:x,timestamp:this._s.now()})},TimestampObserver.prototype.error=function(e){this._o.onError(e)},TimestampObserver.prototype.completed=function(){this._o.onCompleted()},TimestampObserver}(AbstractObserver);observableProto.timestamp=function(scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),new TimestampObservable(this,scheduler)};var SampleObservable=function(__super__){function SampleObservable(source,sampler){this.source=source,this._sampler=sampler,__super__.call(this)}return inherits(SampleObservable,__super__),SampleObservable.prototype.subscribeCore=function(o){var state={o:o,atEnd:!1,value:null,hasValue:!1,sourceSubscription:new SingleAssignmentDisposable};return state.sourceSubscription.setDisposable(this.source.subscribe(new SampleSourceObserver(state))),new BinaryDisposable(state.sourceSubscription,this._sampler.subscribe(new SamplerObserver(state)))},SampleObservable}(ObservableBase),SamplerObserver=function(__super__){function SamplerObserver(s){this._s=s,__super__.call(this)}return inherits(SamplerObserver,__super__),SamplerObserver.prototype._handleMessage=function(){this._s.hasValue&&(this._s.hasValue=!1,this._s.o.onNext(this._s.value)),this._s.atEnd&&this._s.o.onCompleted()},SamplerObserver.prototype.next=function(){this._handleMessage()},SamplerObserver.prototype.error=function(e){this._s.onError(e)},SamplerObserver.prototype.completed=function(){this._handleMessage()},SamplerObserver}(AbstractObserver),SampleSourceObserver=function(__super__){function SampleSourceObserver(s){this._s=s,__super__.call(this)}return inherits(SampleSourceObserver,__super__),SampleSourceObserver.prototype.next=function(x){this._s.hasValue=!0,this._s.value=x},SampleSourceObserver.prototype.error=function(e){this._s.o.onError(e)},SampleSourceObserver.prototype.completed=function(){this._s.atEnd=!0,this._s.sourceSubscription.dispose()},SampleSourceObserver}(AbstractObserver);observableProto.sample=function(intervalOrSampler,scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),"number"==typeof intervalOrSampler?new SampleObservable(this,observableinterval(intervalOrSampler,scheduler)):new SampleObservable(this,intervalOrSampler)};var TimeoutError=Rx.TimeoutError=function(message){this.message=message||"Timeout has occurred",this.name="TimeoutError",Error.call(this)};TimeoutError.prototype=(0,_create2.default)(Error.prototype),observableProto.timeout=function(){var firstArg=arguments[0];if(firstArg instanceof Date||"number"==typeof firstArg)return timeout(this,firstArg,arguments[1],arguments[2]);if(Observable.isObservable(firstArg)||isFunction(firstArg))return timeoutWithSelector(this,firstArg,arguments[1],arguments[2]);throw new Error("Invalid arguments")};var GenerateAbsoluteObservable=function(__super__){function GenerateAbsoluteObservable(state,cndFn,itrFn,resFn,timeFn,s){this._state=state,this._cndFn=cndFn,this._itrFn=itrFn,this._resFn=resFn,this._timeFn=timeFn,this._s=s,__super__.call(this)}function scheduleRecursive(state,recurse){if(state.hasResult&&state.o.onNext(state.result),state.first)state.first=!1;else if(state.newState=tryCatch(state.self._itrFn)(state.newState),state.newState===errorObj)return state.o.onError(state.newState.e);if(state.hasResult=tryCatch(state.self._cndFn)(state.newState),state.hasResult===errorObj)return state.o.onError(state.hasResult.e);if(state.hasResult){if(state.result=tryCatch(state.self._resFn)(state.newState),state.result===errorObj)return state.o.onError(state.result.e);var time=tryCatch(state.self._timeFn)(state.newState);if(time===errorObj)return state.o.onError(time.e);recurse(state,time)}else state.o.onCompleted()}return inherits(GenerateAbsoluteObservable,__super__),GenerateAbsoluteObservable.prototype.subscribeCore=function(o){var state={o:o,self:this,newState:this._state,first:!0,hasResult:!1};return this._s.scheduleRecursiveFuture(state,new Date(this._s.now()),scheduleRecursive)},GenerateAbsoluteObservable}(ObservableBase);Observable.generateWithAbsoluteTime=function(initialState,condition,iterate,resultSelector,timeSelector,scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),new GenerateAbsoluteObservable(initialState,condition,iterate,resultSelector,timeSelector,scheduler)};var GenerateRelativeObservable=function(__super__){function GenerateRelativeObservable(state,cndFn,itrFn,resFn,timeFn,s){this._state=state,this._cndFn=cndFn,this._itrFn=itrFn,this._resFn=resFn,this._timeFn=timeFn,this._s=s,__super__.call(this)}function scheduleRecursive(state,recurse){if(state.hasResult&&state.o.onNext(state.result),state.first)state.first=!1;else if(state.newState=tryCatch(state.self._itrFn)(state.newState),state.newState===errorObj)return state.o.onError(state.newState.e);if(state.hasResult=tryCatch(state.self._cndFn)(state.newState),state.hasResult===errorObj)return state.o.onError(state.hasResult.e);if(state.hasResult){if(state.result=tryCatch(state.self._resFn)(state.newState),state.result===errorObj)return state.o.onError(state.result.e);var time=tryCatch(state.self._timeFn)(state.newState);if(time===errorObj)return state.o.onError(time.e);recurse(state,time)}else state.o.onCompleted()}return inherits(GenerateRelativeObservable,__super__),GenerateRelativeObservable.prototype.subscribeCore=function(o){var state={o:o,self:this,newState:this._state,first:!0,hasResult:!1};return this._s.scheduleRecursiveFuture(state,0,scheduleRecursive)},GenerateRelativeObservable}(ObservableBase);Observable.generateWithRelativeTime=function(initialState,condition,iterate,resultSelector,timeSelector,scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),new GenerateRelativeObservable(initialState,condition,iterate,resultSelector,timeSelector,scheduler)};var DelaySubscription=function(__super__){function DelaySubscription(source,dt,s){this.source=source,this._dt=dt,this._s=s,__super__.call(this)}function scheduleMethod(s,state){var source=state[0],o=state[1],d=state[2];d.setDisposable(source.subscribe(o))}return inherits(DelaySubscription,__super__),DelaySubscription.prototype.subscribeCore=function(o){var d=new SerialDisposable;return d.setDisposable(this._s.scheduleFuture([this.source,o,d],this._dt,scheduleMethod)),d},DelaySubscription}(ObservableBase);observableProto.delaySubscription=function(dueTime,scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),new DelaySubscription(this,dueTime,scheduler)};var SkipLastWithTimeObservable=function(__super__){function SkipLastWithTimeObservable(source,d,s){this.source=source,this._d=d,this._s=s,__super__.call(this)}return inherits(SkipLastWithTimeObservable,__super__),SkipLastWithTimeObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new SkipLastWithTimeObserver(o,this))},SkipLastWithTimeObservable}(ObservableBase),SkipLastWithTimeObserver=function(__super__){function SkipLastWithTimeObserver(o,p){this._o=o,this._s=p._s,this._d=p._d,this._q=[],__super__.call(this)}return inherits(SkipLastWithTimeObserver,__super__),SkipLastWithTimeObserver.prototype.next=function(x){var now=this._s.now();for(this._q.push({interval:now,value:x});this._q.length>0&&now-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value)},SkipLastWithTimeObserver.prototype.error=function(e){this._o.onError(e)},SkipLastWithTimeObserver.prototype.completed=function(){for(var now=this._s.now();this._q.length>0&&now-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value);this._o.onCompleted()},SkipLastWithTimeObserver}(AbstractObserver);observableProto.skipLastWithTime=function(duration,scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),new SkipLastWithTimeObservable(this,duration,scheduler)};var TakeLastWithTimeObservable=function(__super__){function TakeLastWithTimeObservable(source,d,s){this.source=source,this._d=d,this._s=s,__super__.call(this)}return inherits(TakeLastWithTimeObservable,__super__),TakeLastWithTimeObservable.prototype.subscribeCore=function(o){return this.source.subscribe(new TakeLastWithTimeObserver(o,this._d,this._s))},TakeLastWithTimeObservable}(ObservableBase),TakeLastWithTimeObserver=function(__super__){function TakeLastWithTimeObserver(o,d,s){this._o=o,this._d=d,this._s=s,this._q=[],__super__.call(this)}return inherits(TakeLastWithTimeObserver,__super__),TakeLastWithTimeObserver.prototype.next=function(x){var now=this._s.now();for(this._q.push({interval:now,value:x});this._q.length>0&&now-this._q[0].interval>=this._d;)this._q.shift()},TakeLastWithTimeObserver.prototype.error=function(e){this._o.onError(e)},TakeLastWithTimeObserver.prototype.completed=function(){for(var now=this._s.now();this._q.length>0;){var next=this._q.shift();now-next.interval<=this._d&&this._o.onNext(next.value)}this._o.onCompleted()},TakeLastWithTimeObserver}(AbstractObserver);observableProto.takeLastWithTime=function(duration,scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),new TakeLastWithTimeObservable(this,duration,scheduler)},observableProto.takeLastBufferWithTime=function(duration,scheduler){var source=this;return isScheduler(scheduler)||(scheduler=defaultScheduler),new AnonymousObservable(function(o){var q=[];return source.subscribe(function(x){var now=scheduler.now();for(q.push({interval:now,value:x});q.length>0&&now-q[0].interval>=duration;)q.shift()},function(e){o.onError(e)},function(){for(var now=scheduler.now(),res=[];q.length>0;){var next=q.shift();now-next.interval<=duration&&res.push(next.value)}o.onNext(res),o.onCompleted()})},source)};var TakeWithTimeObservable=function(__super__){function TakeWithTimeObservable(source,d,s){this.source=source,this._d=d,this._s=s,__super__.call(this)}function scheduleMethod(s,o){o.onCompleted()}return inherits(TakeWithTimeObservable,__super__),TakeWithTimeObservable.prototype.subscribeCore=function(o){return new BinaryDisposable(this._s.scheduleFuture(o,this._d,scheduleMethod),this.source.subscribe(o))},TakeWithTimeObservable}(ObservableBase);observableProto.takeWithTime=function(duration,scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),new TakeWithTimeObservable(this,duration,scheduler)};var SkipWithTimeObservable=function(__super__){function SkipWithTimeObservable(source,d,s){this.source=source,this._d=d,this._s=s,this._open=!1,__super__.call(this)}function scheduleMethod(s,self){self._open=!0}return inherits(SkipWithTimeObservable,__super__),SkipWithTimeObservable.prototype.subscribeCore=function(o){return new BinaryDisposable(this._s.scheduleFuture(this,this._d,scheduleMethod),this.source.subscribe(new SkipWithTimeObserver(o,this)))},SkipWithTimeObservable}(ObservableBase),SkipWithTimeObserver=function(__super__){function SkipWithTimeObserver(o,p){this._o=o,this._p=p,__super__.call(this)}return inherits(SkipWithTimeObserver,__super__),SkipWithTimeObserver.prototype.next=function(x){this._p._open&&this._o.onNext(x)},SkipWithTimeObserver.prototype.error=function(e){this._o.onError(e)},SkipWithTimeObserver.prototype.completed=function(){this._o.onCompleted()},SkipWithTimeObserver}(AbstractObserver);observableProto.skipWithTime=function(duration,scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),new SkipWithTimeObservable(this,duration,scheduler)};var SkipUntilWithTimeObservable=function(__super__){function SkipUntilWithTimeObservable(source,startTime,scheduler){this.source=source,this._st=startTime,this._s=scheduler,__super__.call(this)}function scheduleMethod(s,state){state._open=!0}return inherits(SkipUntilWithTimeObservable,__super__),SkipUntilWithTimeObservable.prototype.subscribeCore=function(o){return this._open=!1,new BinaryDisposable(this._s.scheduleFuture(this,this._st,scheduleMethod),this.source.subscribe(new SkipUntilWithTimeObserver(o,this)))},SkipUntilWithTimeObservable}(ObservableBase),SkipUntilWithTimeObserver=function(__super__){function SkipUntilWithTimeObserver(o,p){this._o=o,this._p=p,__super__.call(this)}return inherits(SkipUntilWithTimeObserver,__super__),SkipUntilWithTimeObserver.prototype.next=function(x){this._p._open&&this._o.onNext(x)},SkipUntilWithTimeObserver.prototype.error=function(e){this._o.onError(e)},SkipUntilWithTimeObserver.prototype.completed=function(){this._o.onCompleted()},SkipUntilWithTimeObserver}(AbstractObserver);observableProto.skipUntilWithTime=function(startTime,scheduler){return isScheduler(scheduler)||(scheduler=defaultScheduler),new SkipUntilWithTimeObservable(this,startTime,scheduler)},observableProto.takeUntilWithTime=function(endTime,scheduler){isScheduler(scheduler)||(scheduler=defaultScheduler);var source=this;return new AnonymousObservable(function(o){return new BinaryDisposable(scheduler.scheduleFuture(o,endTime,function(_,o){o.onCompleted()}),source.subscribe(o))},source)},observableProto.throttle=function(windowDuration,scheduler){isScheduler(scheduler)||(scheduler=defaultScheduler);var duration=+windowDuration||0;if(duration<=0)throw new RangeError("windowDuration cannot be less or equal zero.");var source=this;return new AnonymousObservable(function(o){var lastOnNext=0;return source.subscribe(function(x){var now=scheduler.now();(0===lastOnNext||now-lastOnNext>=duration)&&(lastOnNext=now,o.onNext(x))},function(e){o.onError(e)},function(){o.onCompleted()})},source)};var TransduceObserver=function(__super__){function TransduceObserver(o,xform){this._o=o,this._xform=xform,__super__.call(this)}return inherits(TransduceObserver,__super__),TransduceObserver.prototype.next=function(x){var res=tryCatch(this._xform["@@transducer/step"]).call(this._xform,this._o,x);res===errorObj&&this._o.onError(res.e)},TransduceObserver.prototype.error=function(e){this._o.onError(e)},TransduceObserver.prototype.completed=function(){this._xform["@@transducer/result"](this._o)},TransduceObserver}(AbstractObserver);observableProto.transduce=function(transducer){var source=this;return new AnonymousObservable(function(o){var xform=transducer(transformForObserver(o));return source.subscribe(new TransduceObserver(o,xform))},source)};var SwitchFirstObservable=function(__super__){function SwitchFirstObservable(source){this.source=source,__super__.call(this)}return inherits(SwitchFirstObservable,__super__),SwitchFirstObservable.prototype.subscribeCore=function(o){var m=new SingleAssignmentDisposable,g=new CompositeDisposable,state={hasCurrent:!1,isStopped:!1,o:o,g:g};return g.add(m),m.setDisposable(this.source.subscribe(new SwitchFirstObserver(state))),g},SwitchFirstObservable}(ObservableBase),SwitchFirstObserver=function(__super__){function SwitchFirstObserver(state){this._s=state,__super__.call(this)}function InnerObserver(state,inner){this._s=state,this._i=inner,__super__.call(this)}return inherits(SwitchFirstObserver,__super__),SwitchFirstObserver.prototype.next=function(x){if(!this._s.hasCurrent){this._s.hasCurrent=!0,isPromise(x)&&(x=observableFromPromise(x));var inner=new SingleAssignmentDisposable;this._s.g.add(inner),inner.setDisposable(x.subscribe(new InnerObserver(this._s,inner)))}},SwitchFirstObserver.prototype.error=function(e){this._s.o.onError(e)},SwitchFirstObserver.prototype.completed=function(){this._s.isStopped=!0,!this._s.hasCurrent&&1===this._s.g.length&&this._s.o.onCompleted()},inherits(InnerObserver,__super__),InnerObserver.prototype.next=function(x){this._s.o.onNext(x)},InnerObserver.prototype.error=function(e){this._s.o.onError(e)},InnerObserver.prototype.completed=function(){this._s.g.remove(this._i),this._s.hasCurrent=!1,this._s.isStopped&&1===this._s.g.length&&this._s.o.onCompleted()},SwitchFirstObserver}(AbstractObserver);observableProto.switchFirst=function(){return new SwitchFirstObservable(this)},observableProto.flatMapFirst=observableProto.exhaustMap=function(selector,resultSelector,thisArg){return new FlatMapObservable(this,selector,resultSelector,thisArg).switchFirst()},observableProto.flatMapWithMaxConcurrent=observableProto.flatMapMaxConcurrent=function(limit,selector,resultSelector,thisArg){return new FlatMapObservable(this,selector,resultSelector,thisArg).merge(limit)};var VirtualTimeScheduler=Rx.VirtualTimeScheduler=function(__super__){function VirtualTimeScheduler(initialClock,comparer){this.clock=initialClock,this.comparer=comparer,this.isEnabled=!1,this.queue=new PriorityQueue(1024),__super__.call(this)}inherits(VirtualTimeScheduler,__super__);var VirtualTimeSchedulerPrototype=VirtualTimeScheduler.prototype;return VirtualTimeSchedulerPrototype.now=function(){
return this.toAbsoluteTime(this.clock)},VirtualTimeSchedulerPrototype.schedule=function(state,action){return this.scheduleAbsolute(state,this.clock,action)},VirtualTimeSchedulerPrototype.scheduleFuture=function(state,dueTime,action){var dt=dueTime instanceof Date?this.toRelativeTime(dueTime-this.now()):this.toRelativeTime(dueTime);return this.scheduleRelative(state,dt,action)},VirtualTimeSchedulerPrototype.add=notImplemented,VirtualTimeSchedulerPrototype.toAbsoluteTime=notImplemented,VirtualTimeSchedulerPrototype.toRelativeTime=notImplemented,VirtualTimeSchedulerPrototype.schedulePeriodic=function(state,period,action){var s=new SchedulePeriodicRecursive(this,state,period,action);return s.start()},VirtualTimeSchedulerPrototype.scheduleRelative=function(state,dueTime,action){var runAt=this.add(this.clock,dueTime);return this.scheduleAbsolute(state,runAt,action)},VirtualTimeSchedulerPrototype.start=function(){if(!this.isEnabled){this.isEnabled=!0;do{var next=this.getNext();null!==next?(this.comparer(next.dueTime,this.clock)>0&&(this.clock=next.dueTime),next.invoke()):this.isEnabled=!1}while(this.isEnabled)}},VirtualTimeSchedulerPrototype.stop=function(){this.isEnabled=!1},VirtualTimeSchedulerPrototype.advanceTo=function(time){var dueToClock=this.comparer(this.clock,time);if(this.comparer(this.clock,time)>0)throw new ArgumentOutOfRangeError;if(0!==dueToClock&&!this.isEnabled){this.isEnabled=!0;do{var next=this.getNext();null!==next&&this.comparer(next.dueTime,time)<=0?(this.comparer(next.dueTime,this.clock)>0&&(this.clock=next.dueTime),next.invoke()):this.isEnabled=!1}while(this.isEnabled);this.clock=time}},VirtualTimeSchedulerPrototype.advanceBy=function(time){var dt=this.add(this.clock,time),dueToClock=this.comparer(this.clock,dt);if(dueToClock>0)throw new ArgumentOutOfRangeError;0!==dueToClock&&this.advanceTo(dt)},VirtualTimeSchedulerPrototype.sleep=function(time){var dt=this.add(this.clock,time);if(this.comparer(this.clock,dt)>=0)throw new ArgumentOutOfRangeError;this.clock=dt},VirtualTimeSchedulerPrototype.getNext=function(){for(;this.queue.length>0;){var next=this.queue.peek();if(!next.isCancelled())return next;this.queue.dequeue()}return null},VirtualTimeSchedulerPrototype.scheduleAbsolute=function(state,dueTime,action){function run(scheduler,state1){return self.queue.remove(si),action(scheduler,state1)}var self=this,si=new ScheduledItem(this,state,run,dueTime,this.comparer);return this.queue.enqueue(si),si.disposable},VirtualTimeScheduler}(Scheduler);Rx.HistoricalScheduler=function(__super__){function HistoricalScheduler(initialClock,comparer){var clock=null==initialClock?0:initialClock,cmp=comparer||defaultSubComparer;__super__.call(this,clock,cmp)}inherits(HistoricalScheduler,__super__);var HistoricalSchedulerProto=HistoricalScheduler.prototype;return HistoricalSchedulerProto.add=function(absolute,relative){return absolute+relative},HistoricalSchedulerProto.toAbsoluteTime=function(absolute){return new Date(absolute).getTime()},HistoricalSchedulerProto.toRelativeTime=function(timeSpan){return timeSpan},HistoricalScheduler}(Rx.VirtualTimeScheduler),OnNextPredicate.prototype.equals=function(other){return other===this||null!=other&&("N"===other.kind&&this.predicate(other.value))},OnErrorPredicate.prototype.equals=function(other){return other===this||null!=other&&("E"===other.kind&&this.predicate(other.error))};var ReactiveTest=Rx.ReactiveTest={created:100,subscribed:200,disposed:1e3,onNext:function(ticks,value){return"function"==typeof value?new Recorded(ticks,new OnNextPredicate(value)):new Recorded(ticks,Notification.createOnNext(value))},onError:function(ticks,error){return"function"==typeof error?new Recorded(ticks,new OnErrorPredicate(error)):new Recorded(ticks,Notification.createOnError(error))},onCompleted:function(ticks){return new Recorded(ticks,Notification.createOnCompleted())},subscribe:function(start,end){return new Subscription(start,end)}},Recorded=Rx.Recorded=function(time,value,comparer){this.time=time,this.value=value,this.comparer=comparer||defaultComparer};Recorded.prototype.equals=function(other){return this.time===other.time&&this.comparer(this.value,other.value)},Recorded.prototype.toString=function(){return this.value.toString()+"@"+this.time};var Subscription=Rx.Subscription=function(start,end){this.subscribe=start,this.unsubscribe=end||Number.MAX_VALUE};Subscription.prototype.equals=function(other){return this.subscribe===other.subscribe&&this.unsubscribe===other.unsubscribe},Subscription.prototype.toString=function(){return"("+this.subscribe+", "+(this.unsubscribe===Number.MAX_VALUE?"Infinite":this.unsubscribe)+")"};var MockDisposable=Rx.MockDisposable=function(scheduler){this.scheduler=scheduler,this.disposes=[],this.disposes.push(this.scheduler.clock)};MockDisposable.prototype.dispose=function(){this.disposes.push(this.scheduler.clock)};var MockObserver=function(__super__){function MockObserver(scheduler){__super__.call(this),this.scheduler=scheduler,this.messages=[]}inherits(MockObserver,__super__);var MockObserverPrototype=MockObserver.prototype;return MockObserverPrototype.onNext=function(value){this.messages.push(new Recorded(this.scheduler.clock,Notification.createOnNext(value)))},MockObserverPrototype.onError=function(e){this.messages.push(new Recorded(this.scheduler.clock,Notification.createOnError(e)))},MockObserverPrototype.onCompleted=function(){this.messages.push(new Recorded(this.scheduler.clock,Notification.createOnCompleted()))},MockObserver}(Observer);MockPromise.prototype.then=function(onResolved,onRejected){var self=this;this.subscriptions.push(new Subscription(this.scheduler.clock));var newPromise,index=this.subscriptions.length-1,observer=Rx.Observer.create(function(x){var retValue=onResolved(x);if(retValue&&"function"==typeof retValue.then)newPromise=retValue;else{var ticks=self.scheduler.clock;newPromise=new MockPromise(self.scheduler,[Rx.ReactiveTest.onNext(ticks,undefined),Rx.ReactiveTest.onCompleted(ticks)])}var idx=self.observers.indexOf(observer);self.observers.splice(idx,1),self.subscriptions[index]=new Subscription(self.subscriptions[index].subscribe,self.scheduler.clock)},function(err){onRejected(err);var idx=self.observers.indexOf(observer);self.observers.splice(idx,1),self.subscriptions[index]=new Subscription(self.subscriptions[index].subscribe,self.scheduler.clock)});return this.observers.push(observer),newPromise||new MockPromise(this.scheduler,this.messages)};var HotObservable=function(__super__){function HotObservable(scheduler,messages){__super__.call(this);var message,notification,observable=this;this.scheduler=scheduler,this.messages=messages,this.subscriptions=[],this.observers=[];for(var i=0,len=this.messages.length;i<len;i++)message=this.messages[i],notification=message.value,function(innerNotification){scheduler.scheduleAbsolute(null,message.time,function(){for(var obs=observable.observers.slice(0),j=0,jLen=obs.length;j<jLen;j++)innerNotification.accept(obs[j]);return disposableEmpty})}(notification)}return inherits(HotObservable,__super__),HotObservable.prototype._subscribe=function(o){var observable=this;this.observers.push(o),this.subscriptions.push(new Subscription(this.scheduler.clock));var index=this.subscriptions.length-1;return disposableCreate(function(){var idx=observable.observers.indexOf(o);observable.observers.splice(idx,1),observable.subscriptions[index]=new Subscription(observable.subscriptions[index].subscribe,observable.scheduler.clock)})},HotObservable}(Observable),ColdObservable=function(__super__){function ColdObservable(scheduler,messages){__super__.call(this),this.scheduler=scheduler,this.messages=messages,this.subscriptions=[]}return inherits(ColdObservable,__super__),ColdObservable.prototype._subscribe=function(o){var message,notification,observable=this;this.subscriptions.push(new Subscription(this.scheduler.clock));for(var index=this.subscriptions.length-1,d=new CompositeDisposable,i=0,len=this.messages.length;i<len;i++)message=this.messages[i],notification=message.value,function(innerNotification){d.add(observable.scheduler.scheduleRelative(null,message.time,function(){return innerNotification.accept(o),disposableEmpty}))}(notification);return disposableCreate(function(){observable.subscriptions[index]=new Subscription(observable.subscriptions[index].subscribe,observable.scheduler.clock),d.dispose()})},ColdObservable}(Observable);Rx.TestScheduler=function(__super__){function baseComparer(x,y){return x>y?1:x<y?-1:0}function TestScheduler(){__super__.call(this,0,baseComparer)}return inherits(TestScheduler,__super__),TestScheduler.prototype.scheduleAbsolute=function(state,dueTime,action){return dueTime<=this.clock&&(dueTime=this.clock+1),__super__.prototype.scheduleAbsolute.call(this,state,dueTime,action)},TestScheduler.prototype.add=function(absolute,relative){return absolute+relative},TestScheduler.prototype.toAbsoluteTime=function(absolute){return new Date(absolute).getTime()},TestScheduler.prototype.toRelativeTime=function(timeSpan){return timeSpan},TestScheduler.prototype.startScheduler=function(createFn,settings){settings||(settings={}),null==settings.created&&(settings.created=ReactiveTest.created),null==settings.subscribed&&(settings.subscribed=ReactiveTest.subscribed),null==settings.disposed&&(settings.disposed=ReactiveTest.disposed);var source,subscription,observer=this.createObserver();return this.scheduleAbsolute(null,settings.created,function(){return source=createFn(),disposableEmpty}),this.scheduleAbsolute(null,settings.subscribed,function(){return subscription=source.subscribe(observer),disposableEmpty}),this.scheduleAbsolute(null,settings.disposed,function(){return subscription.dispose(),disposableEmpty}),this.start(),observer},TestScheduler.prototype.createHotObservable=function(){var args,len=arguments.length;if(Array.isArray(arguments[0]))args=arguments[0];else{args=new Array(len);for(var i=0;i<len;i++)args[i]=arguments[i]}return new HotObservable(this,args)},TestScheduler.prototype.createColdObservable=function(){var args,len=arguments.length;if(Array.isArray(arguments[0]))args=arguments[0];else{args=new Array(len);for(var i=0;i<len;i++)args[i]=arguments[i]}return new ColdObservable(this,args)},TestScheduler.prototype.createResolvedPromise=function(ticks,value){return new MockPromise(this,[Rx.ReactiveTest.onNext(ticks,value),Rx.ReactiveTest.onCompleted(ticks)])},TestScheduler.prototype.createRejectedPromise=function(ticks,reason){return new MockPromise(this,[Rx.ReactiveTest.onError(ticks,reason)])},TestScheduler.prototype.createObserver=function(){return new MockObserver(this)},TestScheduler}(VirtualTimeScheduler);var AnonymousObservable=Rx.AnonymousObservable=function(__super__){function fixSubscriber(subscriber){return subscriber&&isFunction(subscriber.dispose)?subscriber:isFunction(subscriber)?disposableCreate(subscriber):disposableEmpty}function setDisposable(s,state){var ado=state[0],self=state[1],sub=tryCatch(self.__subscribe).call(self,ado);sub!==errorObj||ado.fail(errorObj.e)||thrower(errorObj.e),ado.setDisposable(fixSubscriber(sub))}function AnonymousObservable(subscribe,parent){this.source=parent,this.__subscribe=subscribe,__super__.call(this)}return inherits(AnonymousObservable,__super__),AnonymousObservable.prototype._subscribe=function(o){var ado=new AutoDetachObserver(o),state=[ado,this];return currentThreadScheduler.scheduleRequired()?currentThreadScheduler.schedule(state,setDisposable):setDisposable(null,state),ado},AnonymousObservable}(Observable),AutoDetachObserver=function(__super__){function AutoDetachObserver(observer){__super__.call(this),this.observer=observer,this.m=new SingleAssignmentDisposable}inherits(AutoDetachObserver,__super__);var AutoDetachObserverPrototype=AutoDetachObserver.prototype;return AutoDetachObserverPrototype.next=function(value){var result=tryCatch(this.observer.onNext).call(this.observer,value);result===errorObj&&(this.dispose(),thrower(result.e))},AutoDetachObserverPrototype.error=function(err){var result=tryCatch(this.observer.onError).call(this.observer,err);this.dispose(),result===errorObj&&thrower(result.e)},AutoDetachObserverPrototype.completed=function(){var result=tryCatch(this.observer.onCompleted).call(this.observer);this.dispose(),result===errorObj&&thrower(result.e)},AutoDetachObserverPrototype.setDisposable=function(value){this.m.setDisposable(value)},AutoDetachObserverPrototype.getDisposable=function(){return this.m.getDisposable()},AutoDetachObserverPrototype.dispose=function(){__super__.prototype.dispose.call(this),this.m.dispose()},AutoDetachObserver}(AbstractObserver),UnderlyingObservable=function(__super__){function UnderlyingObservable(m,u){this._m=m,this._u=u,__super__.call(this)}return inherits(UnderlyingObservable,__super__),UnderlyingObservable.prototype.subscribeCore=function(o){return new BinaryDisposable(this._m.getDisposable(),this._u.subscribe(o))},UnderlyingObservable}(ObservableBase),GroupedObservable=function(__super__){function GroupedObservable(key,underlyingObservable,mergedDisposable){__super__.call(this),this.key=key,this.underlyingObservable=mergedDisposable?new UnderlyingObservable(mergedDisposable,underlyingObservable):underlyingObservable}return inherits(GroupedObservable,__super__),GroupedObservable.prototype._subscribe=function(o){return this.underlyingObservable.subscribe(o)},GroupedObservable}(Observable),Subject=Rx.Subject=function(__super__){function Subject(){__super__.call(this),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return inherits(Subject,__super__),addProperties(Subject.prototype,Observer.prototype,{_subscribe:function(o){return checkDisposed(this),this.isStopped?this.hasError?(o.onError(this.error),disposableEmpty):(o.onCompleted(),disposableEmpty):(this.observers.push(o),new InnerSubscription(this,o))},hasObservers:function(){return checkDisposed(this),this.observers.length>0},onCompleted:function(){if(checkDisposed(this),!this.isStopped){this.isStopped=!0;for(var i=0,os=cloneArray(this.observers),len=os.length;i<len;i++)os[i].onCompleted();this.observers.length=0}},onError:function(error){if(checkDisposed(this),!this.isStopped){this.isStopped=!0,this.error=error,this.hasError=!0;for(var i=0,os=cloneArray(this.observers),len=os.length;i<len;i++)os[i].onError(error);this.observers.length=0}},onNext:function(value){if(checkDisposed(this),!this.isStopped)for(var i=0,os=cloneArray(this.observers),len=os.length;i<len;i++)os[i].onNext(value)},dispose:function(){this.isDisposed=!0,this.observers=null}}),Subject.create=function(observer,observable){return new AnonymousSubject(observer,observable)},Subject}(Observable),AsyncSubject=Rx.AsyncSubject=function(__super__){function AsyncSubject(){__super__.call(this),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return inherits(AsyncSubject,__super__),addProperties(AsyncSubject.prototype,Observer.prototype,{_subscribe:function(o){return checkDisposed(this),this.isStopped?(this.hasError?o.onError(this.error):this.hasValue?(o.onNext(this.value),o.onCompleted()):o.onCompleted(),disposableEmpty):(this.observers.push(o),new InnerSubscription(this,o))},hasObservers:function(){return checkDisposed(this),this.observers.length>0},onCompleted:function(){var i,len;if(checkDisposed(this),!this.isStopped){this.isStopped=!0;var os=cloneArray(this.observers),len=os.length;if(this.hasValue)for(i=0;i<len;i++){var o=os[i];o.onNext(this.value),o.onCompleted()}else for(i=0;i<len;i++)os[i].onCompleted();this.observers.length=0}},onError:function(error){if(checkDisposed(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=error;for(var i=0,os=cloneArray(this.observers),len=os.length;i<len;i++)os[i].onError(error);this.observers.length=0}},onNext:function(value){checkDisposed(this),this.isStopped||(this.value=value,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.error=null,this.value=null}}),AsyncSubject}(Observable),BehaviorSubject=Rx.BehaviorSubject=function(__super__){function BehaviorSubject(value){__super__.call(this),this.value=value,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.hasError=!1}return inherits(BehaviorSubject,__super__),addProperties(BehaviorSubject.prototype,Observer.prototype,{_subscribe:function(o){return checkDisposed(this),this.isStopped?(this.hasError?o.onError(this.error):o.onCompleted(),disposableEmpty):(this.observers.push(o),o.onNext(this.value),new InnerSubscription(this,o))},getValue:function(){return checkDisposed(this),this.hasError&&thrower(this.error),this.value},hasObservers:function(){return checkDisposed(this),this.observers.length>0},onCompleted:function(){if(checkDisposed(this),!this.isStopped){this.isStopped=!0;for(var i=0,os=cloneArray(this.observers),len=os.length;i<len;i++)os[i].onCompleted();this.observers.length=0}},onError:function(error){if(checkDisposed(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=error;for(var i=0,os=cloneArray(this.observers),len=os.length;i<len;i++)os[i].onError(error);this.observers.length=0}},onNext:function(value){if(checkDisposed(this),!this.isStopped){this.value=value;for(var i=0,os=cloneArray(this.observers),len=os.length;i<len;i++)os[i].onNext(value)}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.error=null}}),BehaviorSubject}(Observable),ReplaySubject=Rx.ReplaySubject=function(__super__){function createRemovableDisposable(subject,observer){return disposableCreate(function(){observer.dispose(),!subject.isDisposed&&subject.observers.splice(subject.observers.indexOf(observer),1)})}function ReplaySubject(bufferSize,windowSize,scheduler){this.bufferSize=null==bufferSize?maxSafeInteger:bufferSize,this.windowSize=null==windowSize?maxSafeInteger:windowSize,this.scheduler=scheduler||currentThreadScheduler,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,__super__.call(this)}var maxSafeInteger=Math.pow(2,53)-1;return inherits(ReplaySubject,__super__),addProperties(ReplaySubject.prototype,Observer.prototype,{_subscribe:function(o){checkDisposed(this);var so=new ScheduledObserver(this.scheduler,o),subscription=createRemovableDisposable(this,so);this._trim(this.scheduler.now()),this.observers.push(so);for(var i=0,len=this.q.length;i<len;i++)so.onNext(this.q[i].value);return this.hasError?so.onError(this.error):this.isStopped&&so.onCompleted(),so.ensureActive(),subscription},hasObservers:function(){return checkDisposed(this),this.observers.length>0},_trim:function(now){for(;this.q.length>this.bufferSize;)this.q.shift();for(;this.q.length>0&&now-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(value){if(checkDisposed(this),!this.isStopped){var now=this.scheduler.now();this.q.push({interval:now,value:value}),this._trim(now);for(var i=0,os=cloneArray(this.observers),len=os.length;i<len;i++){var observer=os[i];observer.onNext(value),observer.ensureActive()}}},onError:function(error){if(checkDisposed(this),!this.isStopped){this.isStopped=!0,this.error=error,this.hasError=!0;var now=this.scheduler.now();this._trim(now);for(var i=0,os=cloneArray(this.observers),len=os.length;i<len;i++){var observer=os[i];observer.onError(error),observer.ensureActive()}this.observers.length=0}},onCompleted:function(){if(checkDisposed(this),!this.isStopped){this.isStopped=!0;var now=this.scheduler.now();this._trim(now);for(var i=0,os=cloneArray(this.observers),len=os.length;i<len;i++){var observer=os[i];observer.onCompleted(),observer.ensureActive()}this.observers.length=0}},dispose:function(){this.isDisposed=!0,this.observers=null}}),ReplaySubject}(Observable),AnonymousSubject=Rx.AnonymousSubject=function(__super__){function AnonymousSubject(observer,observable){this.observer=observer,this.observable=observable,__super__.call(this)}return inherits(AnonymousSubject,__super__),addProperties(AnonymousSubject.prototype,Observer.prototype,{_subscribe:function(o){return this.observable.subscribe(o)},onCompleted:function(){this.observer.onCompleted()},onError:function(error){this.observer.onError(error)},onNext:function(value){this.observer.onNext(value)}}),AnonymousSubject}(Observable);Rx.Pauser=function(__super__){function Pauser(){__super__.call(this)}return inherits(Pauser,__super__),Pauser.prototype.pause=function(){this.onNext(!1)},Pauser.prototype.resume=function(){this.onNext(!0)},Pauser}(Subject),"function"==typeof define&&"object"==(0,_typeof3.default)(define.amd)&&define.amd?(root.Rx=Rx,define(function(){return Rx})):freeExports&&freeModule?moduleExports?(freeModule.exports=Rx).Rx=Rx:freeExports.Rx=Rx:root.Rx=Rx;var rEndingLine=captureLine()}).call(this)}),Rx=interopDefault(rx_all),Util={test1:function(){console.log("hello!!")},average:function(list){return list.reduce(function(sum,element){return sum+element})/list.length},takeLast:function(list,count){var clone=list.concat();return list.length<=count?clone:(clone.splice(0,list.length-count),clone)},remove:function(list,item){for(var i=0;i<list.length;i++)if(list[i]===item)return void list.splice(i,1)},max:function(list){return list.reduce(function(max,current){return max>current?max:current})},min:function(list){return list.reduce(function(min,current){return min<current?min:current})}};Angle.prototype.add=function(a,b){return new Angle(a.degree+b.degree)},Angle.prototype.sub=function(a,b){return new Angle(a.degree-b.degree)};var SwipeDirection={Right:"right",Left:"left",Up:"up",Down:"down"};Rx.Observable.prototype.list=function(){return this.scan(function(acc,current){var clone=acc.concat();return clone.length>15&&clone.splice(0,1),clone.push(current),clone},[])},Rx.Observable.prototype.pre=function(){return this.scan(function(acc,current){return[acc[1],current]},[null,null])};var _ua=function(u){return{Tablet:u.indexOf("windows")!=-1&&u.indexOf("touch")!=-1&&u.indexOf("tablet pc")==-1||u.indexOf("ipad")!=-1||u.indexOf("android")!=-1&&u.indexOf("mobile")==-1||u.indexOf("firefox")!=-1&&u.indexOf("tablet")!=-1||u.indexOf("kindle")!=-1||u.indexOf("silk")!=-1||u.indexOf("playbook")!=-1,Mobile:u.indexOf("windows")!=-1&&u.indexOf("phone")!=-1||u.indexOf("iphone")!=-1||u.indexOf("ipod")!=-1||u.indexOf("android")!=-1&&u.indexOf("mobile")!=-1||u.indexOf("firefox")!=-1&&u.indexOf("mobile")!=-1||u.indexOf("blackberry")!=-1}}(window.navigator.userAgent.toLowerCase());window.MilboxTouch=MBT}).call(this,require("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:77,"babel-runtime/core-js/object/create":2,"babel-runtime/core-js/object/keys":3,"babel-runtime/core-js/symbol":4,"babel-runtime/core-js/symbol/iterator":5,"babel-runtime/helpers/typeof":6}],2:[function(require,module,exports){module.exports={default:require("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":7}],3:[function(require,module,exports){module.exports={default:require("core-js/library/fn/object/keys"),__esModule:!0}},{"core-js/library/fn/object/keys":8}],4:[function(require,module,exports){module.exports={default:require("core-js/library/fn/symbol"),__esModule:!0}},{"core-js/library/fn/symbol":9}],5:[function(require,module,exports){module.exports={default:require("core-js/library/fn/symbol/iterator"),__esModule:!0}},{"core-js/library/fn/symbol/iterator":10}],6:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.__esModule=!0;var _iterator=require("../core-js/symbol/iterator"),_iterator2=_interopRequireDefault(_iterator),_symbol=require("../core-js/symbol"),_symbol2=_interopRequireDefault(_symbol),_typeof="function"==typeof _symbol2.default&&"symbol"==typeof _iterator2.default?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof _symbol2.default&&obj.constructor===_symbol2.default?"symbol":typeof obj};exports.default="function"==typeof _symbol2.default&&"symbol"===_typeof(_iterator2.default)?function(obj){return"undefined"==typeof obj?"undefined":_typeof(obj)}:function(obj){return obj&&"function"==typeof _symbol2.default&&obj.constructor===_symbol2.default?"symbol":"undefined"==typeof obj?"undefined":_typeof(obj)}},{"../core-js/symbol":4,"../core-js/symbol/iterator":5}],7:[function(require,module,exports){require("../../modules/es6.object.create");var $Object=require("../../modules/_core").Object;module.exports=function(P,D){return $Object.create(P,D)}},{"../../modules/_core":16,"../../modules/es6.object.create":69}],8:[function(require,module,exports){require("../../modules/es6.object.keys"),module.exports=require("../../modules/_core").Object.keys},{"../../modules/_core":16,"../../modules/es6.object.keys":70}],9:[function(require,module,exports){require("../../modules/es6.symbol"),require("../../modules/es6.object.to-string"),require("../../modules/es7.symbol.async-iterator"),require("../../modules/es7.symbol.observable"),module.exports=require("../../modules/_core").Symbol},{"../../modules/_core":16,"../../modules/es6.object.to-string":71,"../../modules/es6.symbol":73,"../../modules/es7.symbol.async-iterator":74,"../../modules/es7.symbol.observable":75}],10:[function(require,module,exports){require("../../modules/es6.string.iterator"),require("../../modules/web.dom.iterable"),module.exports=require("../../modules/_wks-ext").f("iterator")},{"../../modules/_wks-ext":66,"../../modules/es6.string.iterator":72,"../../modules/web.dom.iterable":76}],11:[function(require,module,exports){module.exports=function(it){if("function"!=typeof it)throw TypeError(it+" is not a function!");return it}},{}],12:[function(require,module,exports){module.exports=function(){}},{}],13:[function(require,module,exports){var isObject=require("./_is-object");module.exports=function(it){if(!isObject(it))throw TypeError(it+" is not an object!");return it}},{"./_is-object":32}],14:[function(require,module,exports){var toIObject=require("./_to-iobject"),toLength=require("./_to-length"),toIndex=require("./_to-index");module.exports=function(IS_INCLUDES){return function($this,el,fromIndex){var value,O=toIObject($this),length=toLength(O.length),index=toIndex(fromIndex,length);if(IS_INCLUDES&&el!=el){for(;length>index;)if(value=O[index++],value!=value)return!0}else for(;length>index;index++)if((IS_INCLUDES||index in O)&&O[index]===el)return IS_INCLUDES||index||0;return!IS_INCLUDES&&-1}}},{"./_to-index":58,"./_to-iobject":60,"./_to-length":61}],15:[function(require,module,exports){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1)}},{}],16:[function(require,module,exports){var core=module.exports={version:"2.4.0"};"number"==typeof __e&&(__e=core)},{}],17:[function(require,module,exports){var aFunction=require("./_a-function");module.exports=function(fn,that,length){if(aFunction(fn),void 0===that)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},{"./_a-function":11}],18:[function(require,module,exports){module.exports=function(it){if(void 0==it)throw TypeError("Can't call method on  "+it);return it}},{}],19:[function(require,module,exports){module.exports=!require("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":24}],20:[function(require,module,exports){var isObject=require("./_is-object"),document=require("./_global").document,is=isObject(document)&&isObject(document.createElement);module.exports=function(it){return is?document.createElement(it):{}}},{"./_global":25,"./_is-object":32}],21:[function(require,module,exports){module.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],22:[function(require,module,exports){var getKeys=require("./_object-keys"),gOPS=require("./_object-gops"),pIE=require("./_object-pie");module.exports=function(it){var result=getKeys(it),getSymbols=gOPS.f;if(getSymbols)for(var key,symbols=getSymbols(it),isEnum=pIE.f,i=0;symbols.length>i;)isEnum.call(it,key=symbols[i++])&&result.push(key);return result}},{"./_object-gops":46,"./_object-keys":49,"./_object-pie":50}],23:[function(require,module,exports){var global=require("./_global"),core=require("./_core"),ctx=require("./_ctx"),hide=require("./_hide"),PROTOTYPE="prototype",$export=function(type,name,source){var key,own,out,IS_FORCED=type&$export.F,IS_GLOBAL=type&$export.G,IS_STATIC=type&$export.S,IS_PROTO=type&$export.P,IS_BIND=type&$export.B,IS_WRAP=type&$export.W,exports=IS_GLOBAL?core:core[name]||(core[name]={}),expProto=exports[PROTOTYPE],target=IS_GLOBAL?global:IS_STATIC?global[name]:(global[name]||{})[PROTOTYPE];IS_GLOBAL&&(source=name);for(key in source)own=!IS_FORCED&&target&&void 0!==target[key],own&&key in exports||(out=own?target[key]:source[key],exports[key]=IS_GLOBAL&&"function"!=typeof target[key]?source[key]:IS_BIND&&own?ctx(out,global):IS_WRAP&&target[key]==out?function(C){var F=function(a,b,c){if(this instanceof C){switch(arguments.length){case 0:return new C;case 1:return new C(a);case 2:return new C(a,b)}return new C(a,b,c)}return C.apply(this,arguments)};return F[PROTOTYPE]=C[PROTOTYPE],F}(out):IS_PROTO&&"function"==typeof out?ctx(Function.call,out):out,IS_PROTO&&((exports.virtual||(exports.virtual={}))[key]=out,type&$export.R&&expProto&&!expProto[key]&&hide(expProto,key,out)))};$export.F=1,$export.G=2,$export.S=4,$export.P=8,$export.B=16,$export.W=32,$export.U=64,$export.R=128,module.exports=$export},{"./_core":16,"./_ctx":17,"./_global":25,"./_hide":27}],24:[function(require,module,exports){module.exports=function(exec){try{return!!exec()}catch(e){return!0}}},{}],25:[function(require,module,exports){var global=module.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=global)},{}],26:[function(require,module,exports){var hasOwnProperty={}.hasOwnProperty;module.exports=function(it,key){return hasOwnProperty.call(it,key)}},{}],27:[function(require,module,exports){var dP=require("./_object-dp"),createDesc=require("./_property-desc");module.exports=require("./_descriptors")?function(object,key,value){return dP.f(object,key,createDesc(1,value))}:function(object,key,value){return object[key]=value,object}},{"./_descriptors":19,"./_object-dp":41,"./_property-desc":52}],28:[function(require,module,exports){module.exports=require("./_global").document&&document.documentElement},{"./_global":25}],29:[function(require,module,exports){module.exports=!require("./_descriptors")&&!require("./_fails")(function(){return 7!=Object.defineProperty(require("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":19,"./_dom-create":20,"./_fails":24}],30:[function(require,module,exports){var cof=require("./_cof");module.exports=Object("z").propertyIsEnumerable(0)?Object:function(it){return"String"==cof(it)?it.split(""):Object(it)}},{"./_cof":15}],31:[function(require,module,exports){var cof=require("./_cof");module.exports=Array.isArray||function(arg){return"Array"==cof(arg)}},{"./_cof":15}],32:[function(require,module,exports){module.exports=function(it){return"object"==typeof it?null!==it:"function"==typeof it}},{}],33:[function(require,module,exports){"use strict";var create=require("./_object-create"),descriptor=require("./_property-desc"),setToStringTag=require("./_set-to-string-tag"),IteratorPrototype={};require("./_hide")(IteratorPrototype,require("./_wks")("iterator"),function(){return this}),module.exports=function(Constructor,NAME,next){Constructor.prototype=create(IteratorPrototype,{next:descriptor(1,next)}),setToStringTag(Constructor,NAME+" Iterator")}},{"./_hide":27,"./_object-create":40,"./_property-desc":52,"./_set-to-string-tag":54,"./_wks":67}],34:[function(require,module,exports){"use strict";var LIBRARY=require("./_library"),$export=require("./_export"),redefine=require("./_redefine"),hide=require("./_hide"),has=require("./_has"),Iterators=require("./_iterators"),$iterCreate=require("./_iter-create"),setToStringTag=require("./_set-to-string-tag"),getPrototypeOf=require("./_object-gpo"),ITERATOR=require("./_wks")("iterator"),BUGGY=!([].keys&&"next"in[].keys()),FF_ITERATOR="@@iterator",KEYS="keys",VALUES="values",returnThis=function(){
return this};module.exports=function(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCED){$iterCreate(Constructor,NAME,next);var methods,key,IteratorPrototype,getMethod=function(kind){if(!BUGGY&&kind in proto)return proto[kind];switch(kind){case KEYS:return function(){return new Constructor(this,kind)};case VALUES:return function(){return new Constructor(this,kind)}}return function(){return new Constructor(this,kind)}},TAG=NAME+" Iterator",DEF_VALUES=DEFAULT==VALUES,VALUES_BUG=!1,proto=Base.prototype,$native=proto[ITERATOR]||proto[FF_ITERATOR]||DEFAULT&&proto[DEFAULT],$default=$native||getMethod(DEFAULT),$entries=DEFAULT?DEF_VALUES?getMethod("entries"):$default:void 0,$anyNative="Array"==NAME?proto.entries||$native:$native;if($anyNative&&(IteratorPrototype=getPrototypeOf($anyNative.call(new Base)),IteratorPrototype!==Object.prototype&&(setToStringTag(IteratorPrototype,TAG,!0),LIBRARY||has(IteratorPrototype,ITERATOR)||hide(IteratorPrototype,ITERATOR,returnThis))),DEF_VALUES&&$native&&$native.name!==VALUES&&(VALUES_BUG=!0,$default=function(){return $native.call(this)}),LIBRARY&&!FORCED||!BUGGY&&!VALUES_BUG&&proto[ITERATOR]||hide(proto,ITERATOR,$default),Iterators[NAME]=$default,Iterators[TAG]=returnThis,DEFAULT)if(methods={values:DEF_VALUES?$default:getMethod(VALUES),keys:IS_SET?$default:getMethod(KEYS),entries:$entries},FORCED)for(key in methods)key in proto||redefine(proto,key,methods[key]);else $export($export.P+$export.F*(BUGGY||VALUES_BUG),NAME,methods);return methods}},{"./_export":23,"./_has":26,"./_hide":27,"./_iter-create":33,"./_iterators":36,"./_library":38,"./_object-gpo":47,"./_redefine":53,"./_set-to-string-tag":54,"./_wks":67}],35:[function(require,module,exports){module.exports=function(done,value){return{value:value,done:!!done}}},{}],36:[function(require,module,exports){module.exports={}},{}],37:[function(require,module,exports){var getKeys=require("./_object-keys"),toIObject=require("./_to-iobject");module.exports=function(object,el){for(var key,O=toIObject(object),keys=getKeys(O),length=keys.length,index=0;length>index;)if(O[key=keys[index++]]===el)return key}},{"./_object-keys":49,"./_to-iobject":60}],38:[function(require,module,exports){module.exports=!0},{}],39:[function(require,module,exports){var META=require("./_uid")("meta"),isObject=require("./_is-object"),has=require("./_has"),setDesc=require("./_object-dp").f,id=0,isExtensible=Object.isExtensible||function(){return!0},FREEZE=!require("./_fails")(function(){return isExtensible(Object.preventExtensions({}))}),setMeta=function(it){setDesc(it,META,{value:{i:"O"+ ++id,w:{}}})},fastKey=function(it,create){if(!isObject(it))return"symbol"==typeof it?it:("string"==typeof it?"S":"P")+it;if(!has(it,META)){if(!isExtensible(it))return"F";if(!create)return"E";setMeta(it)}return it[META].i},getWeak=function(it,create){if(!has(it,META)){if(!isExtensible(it))return!0;if(!create)return!1;setMeta(it)}return it[META].w},onFreeze=function(it){return FREEZE&&meta.NEED&&isExtensible(it)&&!has(it,META)&&setMeta(it),it},meta=module.exports={KEY:META,NEED:!1,fastKey:fastKey,getWeak:getWeak,onFreeze:onFreeze}},{"./_fails":24,"./_has":26,"./_is-object":32,"./_object-dp":41,"./_uid":64}],40:[function(require,module,exports){var anObject=require("./_an-object"),dPs=require("./_object-dps"),enumBugKeys=require("./_enum-bug-keys"),IE_PROTO=require("./_shared-key")("IE_PROTO"),Empty=function(){},PROTOTYPE="prototype",createDict=function(){var iframeDocument,iframe=require("./_dom-create")("iframe"),i=enumBugKeys.length,lt="<",gt=">";for(iframe.style.display="none",require("./_html").appendChild(iframe),iframe.src="javascript:",iframeDocument=iframe.contentWindow.document,iframeDocument.open(),iframeDocument.write(lt+"script"+gt+"document.F=Object"+lt+"/script"+gt),iframeDocument.close(),createDict=iframeDocument.F;i--;)delete createDict[PROTOTYPE][enumBugKeys[i]];return createDict()};module.exports=Object.create||function(O,Properties){var result;return null!==O?(Empty[PROTOTYPE]=anObject(O),result=new Empty,Empty[PROTOTYPE]=null,result[IE_PROTO]=O):result=createDict(),void 0===Properties?result:dPs(result,Properties)}},{"./_an-object":13,"./_dom-create":20,"./_enum-bug-keys":21,"./_html":28,"./_object-dps":42,"./_shared-key":55}],41:[function(require,module,exports){var anObject=require("./_an-object"),IE8_DOM_DEFINE=require("./_ie8-dom-define"),toPrimitive=require("./_to-primitive"),dP=Object.defineProperty;exports.f=require("./_descriptors")?Object.defineProperty:function(O,P,Attributes){if(anObject(O),P=toPrimitive(P,!0),anObject(Attributes),IE8_DOM_DEFINE)try{return dP(O,P,Attributes)}catch(e){}if("get"in Attributes||"set"in Attributes)throw TypeError("Accessors not supported!");return"value"in Attributes&&(O[P]=Attributes.value),O}},{"./_an-object":13,"./_descriptors":19,"./_ie8-dom-define":29,"./_to-primitive":63}],42:[function(require,module,exports){var dP=require("./_object-dp"),anObject=require("./_an-object"),getKeys=require("./_object-keys");module.exports=require("./_descriptors")?Object.defineProperties:function(O,Properties){anObject(O);for(var P,keys=getKeys(Properties),length=keys.length,i=0;length>i;)dP.f(O,P=keys[i++],Properties[P]);return O}},{"./_an-object":13,"./_descriptors":19,"./_object-dp":41,"./_object-keys":49}],43:[function(require,module,exports){var pIE=require("./_object-pie"),createDesc=require("./_property-desc"),toIObject=require("./_to-iobject"),toPrimitive=require("./_to-primitive"),has=require("./_has"),IE8_DOM_DEFINE=require("./_ie8-dom-define"),gOPD=Object.getOwnPropertyDescriptor;exports.f=require("./_descriptors")?gOPD:function(O,P){if(O=toIObject(O),P=toPrimitive(P,!0),IE8_DOM_DEFINE)try{return gOPD(O,P)}catch(e){}if(has(O,P))return createDesc(!pIE.f.call(O,P),O[P])}},{"./_descriptors":19,"./_has":26,"./_ie8-dom-define":29,"./_object-pie":50,"./_property-desc":52,"./_to-iobject":60,"./_to-primitive":63}],44:[function(require,module,exports){var toIObject=require("./_to-iobject"),gOPN=require("./_object-gopn").f,toString={}.toString,windowNames="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],getWindowNames=function(it){try{return gOPN(it)}catch(e){return windowNames.slice()}};module.exports.f=function(it){return windowNames&&"[object Window]"==toString.call(it)?getWindowNames(it):gOPN(toIObject(it))}},{"./_object-gopn":45,"./_to-iobject":60}],45:[function(require,module,exports){var $keys=require("./_object-keys-internal"),hiddenKeys=require("./_enum-bug-keys").concat("length","prototype");exports.f=Object.getOwnPropertyNames||function(O){return $keys(O,hiddenKeys)}},{"./_enum-bug-keys":21,"./_object-keys-internal":48}],46:[function(require,module,exports){exports.f=Object.getOwnPropertySymbols},{}],47:[function(require,module,exports){var has=require("./_has"),toObject=require("./_to-object"),IE_PROTO=require("./_shared-key")("IE_PROTO"),ObjectProto=Object.prototype;module.exports=Object.getPrototypeOf||function(O){return O=toObject(O),has(O,IE_PROTO)?O[IE_PROTO]:"function"==typeof O.constructor&&O instanceof O.constructor?O.constructor.prototype:O instanceof Object?ObjectProto:null}},{"./_has":26,"./_shared-key":55,"./_to-object":62}],48:[function(require,module,exports){var has=require("./_has"),toIObject=require("./_to-iobject"),arrayIndexOf=require("./_array-includes")(!1),IE_PROTO=require("./_shared-key")("IE_PROTO");module.exports=function(object,names){var key,O=toIObject(object),i=0,result=[];for(key in O)key!=IE_PROTO&&has(O,key)&&result.push(key);for(;names.length>i;)has(O,key=names[i++])&&(~arrayIndexOf(result,key)||result.push(key));return result}},{"./_array-includes":14,"./_has":26,"./_shared-key":55,"./_to-iobject":60}],49:[function(require,module,exports){var $keys=require("./_object-keys-internal"),enumBugKeys=require("./_enum-bug-keys");module.exports=Object.keys||function(O){return $keys(O,enumBugKeys)}},{"./_enum-bug-keys":21,"./_object-keys-internal":48}],50:[function(require,module,exports){exports.f={}.propertyIsEnumerable},{}],51:[function(require,module,exports){var $export=require("./_export"),core=require("./_core"),fails=require("./_fails");module.exports=function(KEY,exec){var fn=(core.Object||{})[KEY]||Object[KEY],exp={};exp[KEY]=exec(fn),$export($export.S+$export.F*fails(function(){fn(1)}),"Object",exp)}},{"./_core":16,"./_export":23,"./_fails":24}],52:[function(require,module,exports){module.exports=function(bitmap,value){return{enumerable:!(1&bitmap),configurable:!(2&bitmap),writable:!(4&bitmap),value:value}}},{}],53:[function(require,module,exports){module.exports=require("./_hide")},{"./_hide":27}],54:[function(require,module,exports){var def=require("./_object-dp").f,has=require("./_has"),TAG=require("./_wks")("toStringTag");module.exports=function(it,tag,stat){it&&!has(it=stat?it:it.prototype,TAG)&&def(it,TAG,{configurable:!0,value:tag})}},{"./_has":26,"./_object-dp":41,"./_wks":67}],55:[function(require,module,exports){var shared=require("./_shared")("keys"),uid=require("./_uid");module.exports=function(key){return shared[key]||(shared[key]=uid(key))}},{"./_shared":56,"./_uid":64}],56:[function(require,module,exports){var global=require("./_global"),SHARED="__core-js_shared__",store=global[SHARED]||(global[SHARED]={});module.exports=function(key){return store[key]||(store[key]={})}},{"./_global":25}],57:[function(require,module,exports){var toInteger=require("./_to-integer"),defined=require("./_defined");module.exports=function(TO_STRING){return function(that,pos){var a,b,s=String(defined(that)),i=toInteger(pos),l=s.length;return i<0||i>=l?TO_STRING?"":void 0:(a=s.charCodeAt(i),a<55296||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):(a-55296<<10)+(b-56320)+65536)}}},{"./_defined":18,"./_to-integer":59}],58:[function(require,module,exports){var toInteger=require("./_to-integer"),max=Math.max,min=Math.min;module.exports=function(index,length){return index=toInteger(index),index<0?max(index+length,0):min(index,length)}},{"./_to-integer":59}],59:[function(require,module,exports){var ceil=Math.ceil,floor=Math.floor;module.exports=function(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)}},{}],60:[function(require,module,exports){var IObject=require("./_iobject"),defined=require("./_defined");module.exports=function(it){return IObject(defined(it))}},{"./_defined":18,"./_iobject":30}],61:[function(require,module,exports){var toInteger=require("./_to-integer"),min=Math.min;module.exports=function(it){return it>0?min(toInteger(it),9007199254740991):0}},{"./_to-integer":59}],62:[function(require,module,exports){var defined=require("./_defined");module.exports=function(it){return Object(defined(it))}},{"./_defined":18}],63:[function(require,module,exports){var isObject=require("./_is-object");module.exports=function(it,S){if(!isObject(it))return it;var fn,val;if(S&&"function"==typeof(fn=it.toString)&&!isObject(val=fn.call(it)))return val;if("function"==typeof(fn=it.valueOf)&&!isObject(val=fn.call(it)))return val;if(!S&&"function"==typeof(fn=it.toString)&&!isObject(val=fn.call(it)))return val;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":32}],64:[function(require,module,exports){var id=0,px=Math.random();module.exports=function(key){return"Symbol(".concat(void 0===key?"":key,")_",(++id+px).toString(36))}},{}],65:[function(require,module,exports){var global=require("./_global"),core=require("./_core"),LIBRARY=require("./_library"),wksExt=require("./_wks-ext"),defineProperty=require("./_object-dp").f;module.exports=function(name){var $Symbol=core.Symbol||(core.Symbol=LIBRARY?{}:global.Symbol||{});"_"==name.charAt(0)||name in $Symbol||defineProperty($Symbol,name,{value:wksExt.f(name)})}},{"./_core":16,"./_global":25,"./_library":38,"./_object-dp":41,"./_wks-ext":66}],66:[function(require,module,exports){exports.f=require("./_wks")},{"./_wks":67}],67:[function(require,module,exports){var store=require("./_shared")("wks"),uid=require("./_uid"),Symbol=require("./_global").Symbol,USE_SYMBOL="function"==typeof Symbol,$exports=module.exports=function(name){return store[name]||(store[name]=USE_SYMBOL&&Symbol[name]||(USE_SYMBOL?Symbol:uid)("Symbol."+name))};$exports.store=store},{"./_global":25,"./_shared":56,"./_uid":64}],68:[function(require,module,exports){"use strict";var addToUnscopables=require("./_add-to-unscopables"),step=require("./_iter-step"),Iterators=require("./_iterators"),toIObject=require("./_to-iobject");module.exports=require("./_iter-define")(Array,"Array",function(iterated,kind){this._t=toIObject(iterated),this._i=0,this._k=kind},function(){var O=this._t,kind=this._k,index=this._i++;return!O||index>=O.length?(this._t=void 0,step(1)):"keys"==kind?step(0,index):"values"==kind?step(0,O[index]):step(0,[index,O[index]])},"values"),Iterators.Arguments=Iterators.Array,addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries")},{"./_add-to-unscopables":12,"./_iter-define":34,"./_iter-step":35,"./_iterators":36,"./_to-iobject":60}],69:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Object",{create:require("./_object-create")})},{"./_export":23,"./_object-create":40}],70:[function(require,module,exports){var toObject=require("./_to-object"),$keys=require("./_object-keys");require("./_object-sap")("keys",function(){return function(it){return $keys(toObject(it))}})},{"./_object-keys":49,"./_object-sap":51,"./_to-object":62}],71:[function(require,module,exports){},{}],72:[function(require,module,exports){"use strict";var $at=require("./_string-at")(!0);require("./_iter-define")(String,"String",function(iterated){this._t=String(iterated),this._i=0},function(){var point,O=this._t,index=this._i;return index>=O.length?{value:void 0,done:!0}:(point=$at(O,index),this._i+=point.length,{value:point,done:!1})})},{"./_iter-define":34,"./_string-at":57}],73:[function(require,module,exports){"use strict";var global=require("./_global"),has=require("./_has"),DESCRIPTORS=require("./_descriptors"),$export=require("./_export"),redefine=require("./_redefine"),META=require("./_meta").KEY,$fails=require("./_fails"),shared=require("./_shared"),setToStringTag=require("./_set-to-string-tag"),uid=require("./_uid"),wks=require("./_wks"),wksExt=require("./_wks-ext"),wksDefine=require("./_wks-define"),keyOf=require("./_keyof"),enumKeys=require("./_enum-keys"),isArray=require("./_is-array"),anObject=require("./_an-object"),toIObject=require("./_to-iobject"),toPrimitive=require("./_to-primitive"),createDesc=require("./_property-desc"),_create=require("./_object-create"),gOPNExt=require("./_object-gopn-ext"),$GOPD=require("./_object-gopd"),$DP=require("./_object-dp"),$keys=require("./_object-keys"),gOPD=$GOPD.f,dP=$DP.f,gOPN=gOPNExt.f,$Symbol=global.Symbol,$JSON=global.JSON,_stringify=$JSON&&$JSON.stringify,PROTOTYPE="prototype",HIDDEN=wks("_hidden"),TO_PRIMITIVE=wks("toPrimitive"),isEnum={}.propertyIsEnumerable,SymbolRegistry=shared("symbol-registry"),AllSymbols=shared("symbols"),OPSymbols=shared("op-symbols"),ObjectProto=Object[PROTOTYPE],USE_NATIVE="function"==typeof $Symbol,QObject=global.QObject,setter=!QObject||!QObject[PROTOTYPE]||!QObject[PROTOTYPE].findChild,setSymbolDesc=DESCRIPTORS&&$fails(function(){return 7!=_create(dP({},"a",{get:function(){return dP(this,"a",{value:7}).a}})).a})?function(it,key,D){var protoDesc=gOPD(ObjectProto,key);protoDesc&&delete ObjectProto[key],dP(it,key,D),protoDesc&&it!==ObjectProto&&dP(ObjectProto,key,protoDesc)}:dP,wrap=function(tag){var sym=AllSymbols[tag]=_create($Symbol[PROTOTYPE]);return sym._k=tag,sym},isSymbol=USE_NATIVE&&"symbol"==typeof $Symbol.iterator?function(it){return"symbol"==typeof it}:function(it){return it instanceof $Symbol},$defineProperty=function(it,key,D){return it===ObjectProto&&$defineProperty(OPSymbols,key,D),anObject(it),key=toPrimitive(key,!0),anObject(D),has(AllSymbols,key)?(D.enumerable?(has(it,HIDDEN)&&it[HIDDEN][key]&&(it[HIDDEN][key]=!1),D=_create(D,{enumerable:createDesc(0,!1)})):(has(it,HIDDEN)||dP(it,HIDDEN,createDesc(1,{})),it[HIDDEN][key]=!0),setSymbolDesc(it,key,D)):dP(it,key,D)},$defineProperties=function(it,P){anObject(it);for(var key,keys=enumKeys(P=toIObject(P)),i=0,l=keys.length;l>i;)$defineProperty(it,key=keys[i++],P[key]);return it},$create=function(it,P){return void 0===P?_create(it):$defineProperties(_create(it),P)},$propertyIsEnumerable=function(key){var E=isEnum.call(this,key=toPrimitive(key,!0));return!(this===ObjectProto&&has(AllSymbols,key)&&!has(OPSymbols,key))&&(!(E||!has(this,key)||!has(AllSymbols,key)||has(this,HIDDEN)&&this[HIDDEN][key])||E)},$getOwnPropertyDescriptor=function(it,key){if(it=toIObject(it),key=toPrimitive(key,!0),it!==ObjectProto||!has(AllSymbols,key)||has(OPSymbols,key)){var D=gOPD(it,key);return!D||!has(AllSymbols,key)||has(it,HIDDEN)&&it[HIDDEN][key]||(D.enumerable=!0),D}},$getOwnPropertyNames=function(it){for(var key,names=gOPN(toIObject(it)),result=[],i=0;names.length>i;)has(AllSymbols,key=names[i++])||key==HIDDEN||key==META||result.push(key);return result},$getOwnPropertySymbols=function(it){for(var key,IS_OP=it===ObjectProto,names=gOPN(IS_OP?OPSymbols:toIObject(it)),result=[],i=0;names.length>i;)!has(AllSymbols,key=names[i++])||IS_OP&&!has(ObjectProto,key)||result.push(AllSymbols[key]);return result};USE_NATIVE||($Symbol=function(){if(this instanceof $Symbol)throw TypeError("Symbol is not a constructor!");var tag=uid(arguments.length>0?arguments[0]:void 0),$set=function(value){this===ObjectProto&&$set.call(OPSymbols,value),has(this,HIDDEN)&&has(this[HIDDEN],tag)&&(this[HIDDEN][tag]=!1),setSymbolDesc(this,tag,createDesc(1,value))};return DESCRIPTORS&&setter&&setSymbolDesc(ObjectProto,tag,{configurable:!0,set:$set}),wrap(tag)},redefine($Symbol[PROTOTYPE],"toString",function(){return this._k}),$GOPD.f=$getOwnPropertyDescriptor,$DP.f=$defineProperty,require("./_object-gopn").f=gOPNExt.f=$getOwnPropertyNames,require("./_object-pie").f=$propertyIsEnumerable,require("./_object-gops").f=$getOwnPropertySymbols,DESCRIPTORS&&!require("./_library")&&redefine(ObjectProto,"propertyIsEnumerable",$propertyIsEnumerable,!0),wksExt.f=function(name){return wrap(wks(name))}),$export($export.G+$export.W+$export.F*!USE_NATIVE,{Symbol:$Symbol});for(var symbols="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),i=0;symbols.length>i;)wks(symbols[i++]);for(var symbols=$keys(wks.store),i=0;symbols.length>i;)wksDefine(symbols[i++]);$export($export.S+$export.F*!USE_NATIVE,"Symbol",{for:function(key){return has(SymbolRegistry,key+="")?SymbolRegistry[key]:SymbolRegistry[key]=$Symbol(key)},keyFor:function(key){if(isSymbol(key))return keyOf(SymbolRegistry,key);throw TypeError(key+" is not a symbol!")},useSetter:function(){setter=!0},useSimple:function(){setter=!1}}),$export($export.S+$export.F*!USE_NATIVE,"Object",{create:$create,defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor,getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols}),$JSON&&$export($export.S+$export.F*(!USE_NATIVE||$fails(function(){var S=$Symbol();return"[null]"!=_stringify([S])||"{}"!=_stringify({a:S})||"{}"!=_stringify(Object(S))})),"JSON",{stringify:function(it){if(void 0!==it&&!isSymbol(it)){for(var replacer,$replacer,args=[it],i=1;arguments.length>i;)args.push(arguments[i++]);return replacer=args[1],"function"==typeof replacer&&($replacer=replacer),!$replacer&&isArray(replacer)||(replacer=function(key,value){if($replacer&&(value=$replacer.call(this,key,value)),!isSymbol(value))return value}),args[1]=replacer,_stringify.apply($JSON,args)}}}),$Symbol[PROTOTYPE][TO_PRIMITIVE]||require("./_hide")($Symbol[PROTOTYPE],TO_PRIMITIVE,$Symbol[PROTOTYPE].valueOf),setToStringTag($Symbol,"Symbol"),setToStringTag(Math,"Math",!0),setToStringTag(global.JSON,"JSON",!0)},{"./_an-object":13,"./_descriptors":19,"./_enum-keys":22,"./_export":23,"./_fails":24,"./_global":25,"./_has":26,"./_hide":27,"./_is-array":31,"./_keyof":37,"./_library":38,"./_meta":39,"./_object-create":40,"./_object-dp":41,"./_object-gopd":43,"./_object-gopn":45,"./_object-gopn-ext":44,"./_object-gops":46,"./_object-keys":49,"./_object-pie":50,"./_property-desc":52,"./_redefine":53,"./_set-to-string-tag":54,"./_shared":56,"./_to-iobject":60,"./_to-primitive":63,"./_uid":64,"./_wks":67,"./_wks-define":65,"./_wks-ext":66}],74:[function(require,module,exports){require("./_wks-define")("asyncIterator")},{"./_wks-define":65}],75:[function(require,module,exports){require("./_wks-define")("observable")},{"./_wks-define":65}],76:[function(require,module,exports){require("./es6.array.iterator");for(var global=require("./_global"),hide=require("./_hide"),Iterators=require("./_iterators"),TO_STRING_TAG=require("./_wks")("toStringTag"),collections=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],i=0;i<5;i++){var NAME=collections[i],Collection=global[NAME],proto=Collection&&Collection.prototype;proto&&!proto[TO_STRING_TAG]&&hide(proto,TO_STRING_TAG,NAME),Iterators[NAME]=Iterators.Array}},{"./_global":25,"./_hide":27,"./_iterators":36,"./_wks":67,"./es6.array.iterator":68}],77:[function(require,module,exports){function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,runClearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}var cachedSetTimeout,cachedClearTimeout,process=module.exports={};!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},{}]},{},[1]);